webpackJsonp([1],{"0XQa":function(e,t){},"1RBY":function(e,t){},"2/Do":function(e,t){},"27eR":function(e,t){},"2WvI":function(e,t){},"8AI5":function(e,t){},"8cYm":function(e,t){},"9LKP":function(e,t){},AaCG:function(e,t){},AaoM:function(e,t){},K2ri:function(e,t){},NHnr:function(e,t,a){"use strict";function l(e){return o(i(n(e)))}function i(e){return c(u(s(e),8*e.length))}function o(e){for(var t,a=z?"0123456789ABCDEF":"0123456789abcdef",l="",i=0;i<e.length;i++)t=e.charCodeAt(i),l+=a.charAt(t>>>4&15)+a.charAt(15&t);return l}function r(e){for(var t="",a=e.length,l=0;l<a;l+=3)for(var i=e.charCodeAt(l)<<16|(l+1<a?e.charCodeAt(l+1)<<8:0)|(l+2<a?e.charCodeAt(l+2):0),o=0;o<4;o++)8*l+6*o>8*e.length?t+=N:t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>>6*(3-o)&63);return t}function n(e){for(var t,a,l="",i=-1;++i<e.length;)t=e.charCodeAt(i),a=i+1<e.length?e.charCodeAt(i+1):0,55296<=t&&t<=56319&&56320<=a&&a<=57343&&(t=65536+((1023&t)<<10)+(1023&a),i++),t<=127?l+=String.fromCharCode(t):t<=2047?l+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?l+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(l+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return l}function s(e){for(var t=Array(e.length>>2),a=0;a<t.length;a++)t[a]=0;for(a=0;a<8*e.length;a+=8)t[a>>5]|=(255&e.charCodeAt(a/8))<<a%32;return t}function c(e){for(var t="",a=0;a<32*e.length;a+=8)t+=String.fromCharCode(e[a>>5]>>>a%32&255);return t}function u(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var a=1732584193,l=-271733879,i=-1732584194,o=271733878,r=0;r<e.length;r+=16){var n=a,s=l,c=i,u=o;l=h(l=h(l=h(l=h(l=p(l=p(l=p(l=p(l=f(l=f(l=f(l=f(l=m(l=m(l=m(l=m(l,i=m(i,o=m(o,a=m(a,l,i,o,e[r+0],7,-680876936),l,i,e[r+1],12,-389564586),a,l,e[r+2],17,606105819),o,a,e[r+3],22,-1044525330),i=m(i,o=m(o,a=m(a,l,i,o,e[r+4],7,-176418897),l,i,e[r+5],12,1200080426),a,l,e[r+6],17,-1473231341),o,a,e[r+7],22,-45705983),i=m(i,o=m(o,a=m(a,l,i,o,e[r+8],7,1770035416),l,i,e[r+9],12,-1958414417),a,l,e[r+10],17,-42063),o,a,e[r+11],22,-1990404162),i=m(i,o=m(o,a=m(a,l,i,o,e[r+12],7,1804603682),l,i,e[r+13],12,-40341101),a,l,e[r+14],17,-1502002290),o,a,e[r+15],22,1236535329),i=f(i,o=f(o,a=f(a,l,i,o,e[r+1],5,-165796510),l,i,e[r+6],9,-1069501632),a,l,e[r+11],14,643717713),o,a,e[r+0],20,-373897302),i=f(i,o=f(o,a=f(a,l,i,o,e[r+5],5,-701558691),l,i,e[r+10],9,38016083),a,l,e[r+15],14,-660478335),o,a,e[r+4],20,-405537848),i=f(i,o=f(o,a=f(a,l,i,o,e[r+9],5,568446438),l,i,e[r+14],9,-1019803690),a,l,e[r+3],14,-187363961),o,a,e[r+8],20,1163531501),i=f(i,o=f(o,a=f(a,l,i,o,e[r+13],5,-1444681467),l,i,e[r+2],9,-51403784),a,l,e[r+7],14,1735328473),o,a,e[r+12],20,-1926607734),i=p(i,o=p(o,a=p(a,l,i,o,e[r+5],4,-378558),l,i,e[r+8],11,-2022574463),a,l,e[r+11],16,1839030562),o,a,e[r+14],23,-35309556),i=p(i,o=p(o,a=p(a,l,i,o,e[r+1],4,-1530992060),l,i,e[r+4],11,1272893353),a,l,e[r+7],16,-155497632),o,a,e[r+10],23,-1094730640),i=p(i,o=p(o,a=p(a,l,i,o,e[r+13],4,681279174),l,i,e[r+0],11,-358537222),a,l,e[r+3],16,-722521979),o,a,e[r+6],23,76029189),i=p(i,o=p(o,a=p(a,l,i,o,e[r+9],4,-640364487),l,i,e[r+12],11,-421815835),a,l,e[r+15],16,530742520),o,a,e[r+2],23,-995338651),i=h(i,o=h(o,a=h(a,l,i,o,e[r+0],6,-198630844),l,i,e[r+7],10,1126891415),a,l,e[r+14],15,-1416354905),o,a,e[r+5],21,-57434055),i=h(i,o=h(o,a=h(a,l,i,o,e[r+12],6,1700485571),l,i,e[r+3],10,-1894986606),a,l,e[r+10],15,-1051523),o,a,e[r+1],21,-2054922799),i=h(i,o=h(o,a=h(a,l,i,o,e[r+8],6,1873313359),l,i,e[r+15],10,-30611744),a,l,e[r+6],15,-1560198380),o,a,e[r+13],21,1309151649),i=h(i,o=h(o,a=h(a,l,i,o,e[r+4],6,-145523070),l,i,e[r+11],10,-1120210379),a,l,e[r+2],15,718787259),o,a,e[r+9],21,-343485551),a=g(a,n),l=g(l,s),i=g(i,c),o=g(o,u)}return Array(a,l,i,o)}function d(e,t,a,l,i,o){return g(function(e,t){return e<<t|e>>>32-t}(g(g(t,e),g(l,o)),i),a)}function m(e,t,a,l,i,o,r){return d(t&a|~t&l,e,t,i,o,r)}function f(e,t,a,l,i,o,r){return d(t&l|a&~l,e,t,i,o,r)}function p(e,t,a,l,i,o,r){return d(t^a^l,e,t,i,o,r)}function h(e,t,a,l,i,o,r){return d(a^(t|~l),e,t,i,o,r)}function g(e,t){var a=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(a>>16)<<16|65535&a}function b(e){return null!=e&&e==e.window}function v(e){return null==e?String(e):W[B.call(e)]||"object"}function _(e){if(!e||"object"!==v(e)||b(e))return!1;try{if(e.constructor&&!E.call(e,"constructor")&&!E.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var t;for(t in e);return void 0===t||E.call(e,t)}function y(e){throw new Error(e)}function F(e,t,a){if("lower"===a)for(var l in e)M.isPlainObject(e[l])||M.isArray(e[l])?t[l.toLowerCase()]=D(e[l],a):t[l.toLowerCase()]=e[l];else if("upper"===a)for(var l in e)M.isPlainObject(e[l])||M.isArray(e[l])?t[l.toUpperCase()]=D(e[l],a):t[l.toUpperCase()]=e[l];return t}function D(e,t){var a,l;return l=t||"lower",_(e)?(a={},F(e,a,l)):M.isArray(e)?(a=[],F(e,a,l)):e}Object.defineProperty(t,"__esModule",{value:!0});var w=a("XwMK"),x={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("transition",{attrs:{name:"slide-fade"}},[t("router-view")],1)],1)},staticRenderFns:[]},S=a("/Xao")({name:"app"},x,!1,function(e){a("rlv6")},null,null).exports,k=a("zO6J"),C=a("aA9S"),$=a.n(C),I=a("2sCs"),L=a.n(I),T=a("hRKE"),V=a.n(T),P=a("HzJ8"),R=a.n(P),z=0,N="=",q={md5:function(e){return l(e).toUpperCase()},base64:function(e){return r(n(e))}},B=Object.prototype.toString,E=Object.prototype.hasOwnProperty,A=(Array.prototype.push,Array.prototype.slice,String.prototype.trim),W=(Array.prototype.indexOf,{}),O=["\\","$","(",")","*","+",".","[","]","?","^","{","}","|"],M={escapeExprSpecialWord:function(e){if(!e||""===e)return"";var t=!0,a=!1,l=void 0;try{for(var i,o=R()(O);!(t=(i=o.next()).done);t=!0){var r=i.value;e.includes(r)&&(e=e.replace(r,"\\"+r))}}catch(e){a=!0,l=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw l}}return e},getWebRootPath:function(){var e=window.document.location.pathname;return e.substring(0,e.substr(1).indexOf("/")+1)},isFunction:function(e){return"function"===v(e)},renderDate:function(e){if(0==e||"undefined"==e||null==e||""==e)return"";try{var t=new Date(parseInt(e,10)),a=(t.getMonth()+1).toString(),l=t.getFullYear().toString(),i=t.getDate().toString();return[l,a.length<2?"-0":"-",a,i.length<2?"-0":"-",i].join("")}catch(t){return e}},renderDateTime:function(e){if(0==e||"undefined"==e||null==e||""==e)return"";try{var t=new Date(parseInt(e,10)),a=(t.getMonth()+1).toString(),l=t.getFullYear().toString(),i=t.getDate().toString(),o=t.getHours().toString(),r=t.getMinutes().toString(),n=t.getSeconds().toString();return[l,a.length<2?"-0":"-",a,i.length<2?"-0":"-",i,o.length<2?" 0":" ",o,r.length<2?":0":":",r,n.length<2?":0":":",n].join("")}catch(t){return e}},isArray:Array.isArray||function(e){return"array"===v(e)},isWindow:b,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isNumber:function(e,t,a){var l="^";return t?"-"==t&&(l+="-"):l+="-?",l+=a?"0"==a?"(0|([1-9]+\\d*))$":"\\d+(\\.\\d{1,"+a+"})?$":"\\d+(\\.\\d+)?$",new RegExp(l,"g").test(e)},type:v,isPlainObject:_,isEmptyObject:function(e){for(var t in e)return!1;return!0},error:y,parseJSON:function(e){return"string"==typeof e&&e?(e=M.trim(e),window.JSON&&window.JSON.parse?window.JSON.parse(e):rvalidchars.test(e.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))?new Function("return "+e)():void y("Invalid JSON: "+e)):null},noop:function(){},trim:A?function(e){return null==e?"":A.call(e)}:function(e){return null==e?"":e.toString().replace(trimLeft,"").replace(trimRight,"")},toggleObjKey:D,formatMoney:function(e,t,a){if(IsNumber(e)){t=t>0&&t<=20?t:2,a=void 0===a?"":a,e=parseFloat((e+"").replace(/[^\d\.-]/g,""));for(var l=new Number(e+1).toFixed(t),i=(e=new Number(l-1).toFixed(t)+"").split(".")[0].split("").reverse(),o=e.split(".")[1],r="",n=0;n<i.length;n++)r+=i[n]+((n+1)%3==0&&n+1!=i.length?a:"");return r.split("").reverse().join("")+"."+o.substring(0,t)}return""},isEmpty:function(e){return""===e||null===e||void 0===e},extend:function(){var e,t,a,l,i,o,r=arguments[0]||{},n=1,s=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[1]||{},n=2),"object"===(void 0===r?"undefined":V()(r))||M.isFunction(r)||(r={}),s===n&&(r=this,--n);n<s;n++)if(null!=(e=arguments[n]))for(t in e)a=r[t],r!==(l=e[t])&&(c&&l&&(M.isPlainObject(l)||(i=M.isArray(l)))?(i?(i=!1,o=a&&M.isArray(a)?a:[]):o=a&&M.isPlainObject(a)?a:{},r[t]=M.extend(c,o,l)):void 0!==l&&(r[t]=l));return r},serializeObj:function(e){var t="";if(M.isPlainObject(e))for(var a in e)t+="&"+a+"="+e[a];return t},crypt:q,formatTreeData:function(e,t){function a(e,t){var l=[];for(var i in e){var o=e[i];o.fid===t&&(o.children=a(e,o.id),l.push(o))}return l}var l=[];if(void 0===t||0===t.length){t=[];for(var i in e)void 0!==e[i].fid&&null!==e[i].fid&&""!==e[i].fid||void 0!==e[i].id&&null!==e[i].id&&""!==e[i].id&&t.push(e[i])}0===t.length&&(console.error("根节点不存在，请确认树结构是否正确"),console.info("树结构的根节点是fid不存在（或为空）的节点，否则需手动添加指定得根节点（参数）"));for(var o in t){var r=t[o];r.children=a(e,r.id),l.push(r)}return l},expendNodesByLevel:function(e,t){var a=[];if(t>0){t--;for(var l=0;l<e.length;l++)a.push(e[l].id),t>0&&e[l].children&&e[l].children.length>0&&(a=a.concat(M.expendNodesByLevel(e[l].children,t)))}return a},checkKeys:function(e,t,a){for(var l=[],i=0;i<e.length;i++){var o=e[i];o[t]===a&&l.push(o.id),o.children&&(l=l.concat(M.checkKeys(o.children,t,a)))}return l}},j=M,U={suffix:"?format=json",prefix:j.getWebRootPath()},K={manager:"/manager",timer:"/timer",plus:"/plus"},X={url:"",param:{},model:K.manager,success:function(e){},error:function(e){alert(e.error)},fail:function(e){alert(e)}},G={post:function(e){var t={};$()(t,X,e);var a=U.prefix+t.model+t.url+U.suffix;L.a.post(a,t.param).then(function(e){if(200===e.status)if(e.data&&!0===e.data.success){var a=j.toggleObjKey(e.data);t.success(a)}else t.error(e.data)}).catch(function(e){t.fail(e)})},get:function(e){var t={};$()(t,X,e);var a=U.prefix+t.model+t.url+U.suffix;L.a.get(a).then(function(e){if(200===e.status)if(e.data&&!0===e.data.success){var a=j.toggleObjKey(e.data);t.success(a)}else t.error(e.data)}).catch(function(e){t.fail(e)})},model:K},H={data:function(){return{loginForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{onSubmit:function(){var e={username:this.loginForm.username,password:j.crypt.md5(this.loginForm.password)};G.post({url:"/cmc/login",param:e,success:function(e){sessionStorage.setItem("userToken","1111"),sessionStorage.setItem("loginUser","bbb"),this.$router.push({name:"/"})}})},resetForm:function(e){this.$refs[e].resetFields()}}},Z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("el-form",{ref:"loginForm",attrs:{model:e.loginForm,"label-width":"80px",rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("登录")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("loginForm")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]},Q=a("/Xao")(H,Z,!1,function(e){a("qnw5")},null,null).exports,J={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",{staticClass:"wrapper",staticStyle:{height:"100%",border:"1px solid #eee"}},[t("el-header",{staticStyle:{"text-align":"right","font-size":"12px"}},[t("el-dropdown",[t("span",{staticClass:"el-dropdown-link"},[this._v("\n        admin"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),this._v(" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[t("i",{staticClass:"el-icon-setting",staticStyle:{"margin-right":"5px"}}),this._v("修改密码")]),this._v(" "),t("el-dropdown-item",[t("i",{staticClass:"el-icon-circle-close",staticStyle:{"margin-right":"5px"}}),this._v("退出")])],1)],1)],1),this._v(" "),t("el-container",[t("el-aside",{attrs:{width:"220px"}},[t("el-menu",{attrs:{"default-openeds":["1","3","4"]}},[t("el-submenu",{attrs:{index:"1"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-message"}),this._v("运行管理")]),this._v(" "),t("router-link",{attrs:{to:{name:"txn"},tag:"li",replace:""}},[t("el-menu-item",{attrs:{index:"1-1"}},[this._v("交易模型")])],1),this._v(" "),t("router-link",{attrs:{to:{name:"list"},tag:"li",replace:""}},[t("el-menu-item",{attrs:{index:"1-2"}},[this._v("名单管理")])],1),this._v(" "),t("router-link",{attrs:{to:{name:"namelist"},tag:"li",replace:""}},[t("el-menu-item",{attrs:{index:"1-3"}},[this._v("名单查看")])],1)],2),this._v(" "),t("el-submenu",{attrs:{index:"3"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-setting"}),this._v("权限管理")]),this._v(" "),t("router-link",{attrs:{to:{name:"user"},tag:"li",replace:""}},[t("el-menu-item",{attrs:{index:"3-1"}},[this._v("操作员管理")])],1),this._v(" "),t("router-link",{attrs:{to:{name:"role"},tag:"li",replace:""}},[t("el-menu-item",{attrs:{index:"3-2"}},[this._v("角色管理")])],1),this._v(" "),t("router-link",{attrs:{to:{name:"func"},tag:"li",replace:""}},[t("el-menu-item",{attrs:{index:"3-3"}},[this._v("功能管理")])],1)],2),this._v(" "),t("el-submenu",{attrs:{index:"4"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-setting"}),this._v("系统管理")]),this._v(" "),t("router-link",{attrs:{to:{name:"codedict"},tag:"li",replace:""}},[t("el-menu-item",{attrs:{index:"4-1"}},[this._v("数据字典管理")])],1),this._v(" "),t("router-link",{attrs:{to:{name:"ipaddr"},tag:"li",replace:""}},[t("el-menu-item",{attrs:{index:"4-3"}},[this._v("IP地址维护")])],1),this._v(" "),t("router-link",{attrs:{to:{name:"authCenter"},tag:"li",replace:""}},[t("el-menu-item",{attrs:{index:"4-4"}},[this._v("授权中心")])],1),this._v(" "),t("router-link",{attrs:{to:{name:"log"},tag:"li",replace:""}},[t("el-menu-item",{attrs:{index:"4-4"}},[this._v("操作日志管理")])],1)],2),this._v(" "),t("el-submenu",{attrs:{index:"5"}},[t("template",{slot:"title"},[t("i",{staticClass:"el-icon-setting"}),this._v("综合查询")]),this._v(" "),t("router-link",{attrs:{to:{name:"txnEventQuery"},tag:"li",replace:""}},[t("el-menu-item",{attrs:{index:"5-1"}},[this._v("交易事件查询")])],1),this._v(" "),t("router-link",{attrs:{to:{name:"alarmEventQuery"},tag:"li",replace:""}},[t("el-menu-item",{attrs:{index:"5-2"}},[this._v("报警事件查询")])],1)],2)],1)],1),this._v(" "),t("el-main",[t("router-view")],1)],1)],1)},staticRenderFns:[]},Y=a("/Xao")({data:function(){return{defaultProps:{children:"children",label:"label"}}},methods:{}},J,!1,function(e){a("1RBY")},null,null).exports,ee={checkSpecialCode:function(e){if(j.isEmpty(e))return!0;for(var t="~`#$￥%^&*{}=][【】《》><?？/\\'",a=0;a<t.length;a++)if(-1!=e.indexOf(t.charAt(a)))return!1;return!0},checkFormSpecialCode:function(e,t,a){if(!ee.checkSpecialCode(t))return a(new Error("请不要输入特殊字符！如($,%)"));a()},checkFormEnSpecialCharacter:function(e,t,a){if(!ee.checkSpecialCharacter(t,1))return a(new Error("请以字母开头，包括字母、数字和下划线"));a()},checkFormZhSpecialCharacter:function(e,t,a){if(!ee.checkSpecialCharacter(t,2))return a(new Error("只能包含汉字,字母,数字和下划线"));a()},checkSpecialCharacter:function(e,t){return"1"==t?/^[a-zA-Z][\w]*$/.test(e):/^[\w\u4e00-\u9fa5]*$/.test(e)},checkSpecialCharacterInTxn:function(e,t,a){var l=ee.checkSpecialCharacter(t,a);return l||alert(e+"只能包含汉字,字母,数字和下划线"),l}},te=ee,ae={created:function(){this.selUser(),this.selRole()},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e)},handleSelectionChange:function(e){this.multipleSelection=e},resetForm:function(e){this.$refs[e].resetFields()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message("请正确填写用户信息"),!1;"add"===t.flag?t.addUser():"edit"===t.flag&&t.updateUser()})},bindGridData:function(e){this.roleData=e.page.list,this.currentPage=e.page.index,this.pagesize=e.page.size,this.total=e.page.total},selRole:function(){var e=this,t={url:"/role/listNormalRole",success:function(t){e.roles=t.row}};G.post(t)},selUser:function(){var e=this,t={url:"/operator/list",param:{login_name:this.userForm.login_name,real_name:this.userForm.real_name,flag:this.userForm.flag,role:this.userForm.role,pageindex:1,pagesize:10},success:function(t){t.page&&e.bindGridData(t)}};G.post(t)},openDialog:function(e){var t=this;if(this.flag=e,"edit"===e){this.dialogTitle="编辑用户";if(1!==this.multipleSelection.length)return void this.$message("请选择一行用户信息。");var a={url:"/operator/get",param:{operatorId:this.multipleSelection[0].operator_id},success:function(e){var a=e.row;t.userDialogForm={operator_id:a.operator_id,login_name:a.login_name,flag:a.flag,real_name:a.real_name,role:a.role,credentialtype:a.credentialtype,credentialnum:a.credentialnum,phone:a.phone,mobile:a.mobile,email:a.email,address:a.address,memo:a.memo,repwd:a.password,password:a.password}}};G.post(a)}else"add"===e&&(this.dialogTitle="新建用户",this.userDialogForm={operator_id:"",login_name:"",flag:"1",real_name:"",role:"",credentialtype:"",credentialnum:"",phone:"",mobile:"",email:"",address:"",memo:"",repwd:q.md5("123456"),password:q.md5("123456")});this.roleDialogVisible=!0,this.$refs.userDialogForm&&this.$refs.userDialogForm.clearValidate()},addUser:function(){var e=this,t={url:"/operator/add",param:this.userDialogForm,success:function(t){e.$message("创建成功。"),e.roleDialogVisible=!1,e.selUser()}};G.post(t)},updateUser:function(){var e=this,t={url:"/operator/mod",param:this.userDialogForm,success:function(t){e.$message("更新成功。"),e.roleDialogVisible=!1,e.selUser()}};G.post(t)},delUser:function(){var e=this,t=this;if(1===this.multipleSelection.length){var a=this.multipleSelection[0];this.$confirm("确定删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={url:"/operator/del",param:{operatorId:a.operator_id},success:function(e){t.$message("删除成功。"),t.selUser()}};G.post(e)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})}else this.$message("请选择一行用户信息。")},resetPwd:function(){var e=this,t=this;if(1===this.multipleSelection.length){var a=q.md5("123456"),l=this.multipleSelection[0];this.$confirm("确定重置密码吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={url:"/operator/reset",param:{operatorId:l.operator_id,loginName:l.login_name,passWord:a},success:function(e){t.$message("密码重置成功。"),t.selUser()}};G.post(e)}).catch(function(){e.$message({type:"info",message:"已取消密码重置"})})}else this.$message("请选择一行用户信息。")},resetFlag:function(){var e=this,t=this;if(1===this.multipleSelection.length){var a=this.multipleSelection[0];this.$confirm("确定要解锁吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={url:"/operator/resetLoginFailedAttempts",param:{operatorId:a.operator_id},success:function(e){t.$message("用户解锁成功。"),t.selUser()}};G.post(e)}).catch(function(){e.$message({type:"info",message:"已取消用户解锁"})})}else this.$message("请选择一行用户信息。")}},data:function(){var e=this;return{inline:!0,roles:[],userForm:{login_name:"",real_name:"",flag:"",role:""},roleData:[{operator_id:"123123123123123123",login_name:"测试假用户",real_name:"王某某",role_name:"tms系统管理员",flag:"1",failed_login_attempts:"0",lockout:"0",lockout_date:(new Date).toLocaleDateString(),email:"123@qwe.com",mobile:"13366666666"}],currentPage:4,pagesize:10,total:100,roleDialogVisible:!1,userDialogForm:{operator_id:"",login_name:"",flag:"1",real_name:"",role:"",credentialtype:"",credentialnum:"",phone:"",mobile:"",email:"",address:"",memo:"",repwd:"123456",password:"123456"},dialogTitle:"",formLabelWidth:"100px",rules:{login_name:[{required:!0,message:"请输入用户名",trigger:"blur"},{len:6,message:"用户名只能由6位数字或字母组成",trigger:"blur"},{validator:function(e,t,a){if(!/^[0-9a-zA-Z]*$/.test(t)||6!==t.length)return a(new Error("用户名只能由6位数字或字母组成"));a()},trigger:"blur"},{validator:function(t,a,l){if("edit"===e.flag&&e.multipleSelection[0].login_name===a)l();else{var i={url:"/operator/check/username",param:{username:a},success:function(e){if("false"===e.checke_result)return l(new Error("用户名已被占用"));l()}};G.post(i)}},trigger:"blur"}],real_name:[{required:!0,message:"请输入姓名",trigger:"blur"},{max:50,message:"长度在50个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}],role:[{required:!0,message:"请选择角色",trigger:"blur"}],credentialtype:[{validator:function(t,a,l){var i=e;if(""===a.trim()&&""!==i.userDialogForm.credentialnum)return l(new Error("请选择证件类型"));""!==a.trim()&&""!==i.userDialogForm.credentialnum?(i.$refs.userDialogForm.validateField("credentialnum"),l()):l()},trigger:"blur"}],credentialnum:[{max:50,message:"证件号码不能超过32个字符",trigger:"blur"},{validator:function(e,t,a){if(!/^[0-9a-zA-Z]*$/.test(t))return a(new Error("证件号码只能有数字和字母组成"));a()},trigger:"blur"},{validator:function(t,a,l){var i=e;if(""===a.trim()&&""!==i.userDialogForm.credentialtype)return l(new Error("证件号码不能为空"));if(""!==a.trim()){var o=i.userDialogForm.credentialtype.toString();if("0"===o&&!/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[A-Z])$/.test(o))return l(new Error("身份证号码格式错误"));i.$refs.userDialogForm.validateField("credentialtype"),l()}else l()},trigger:"blur"}],phone:[{validator:function(e,t,a){if(""!==t.trim()&&!/^(([0+]\d{2,3}-)?(0\d{2,3})-)?(\d{7,8})(-(\d{3,}))?$/.test(t))return a(new Error("固定电话号码不正确"));a()},trigger:"blur"}],mobile:[{required:!0,message:"请输入移动电话",trigger:"blur"},{validator:function(e,t,a){if(!/(^13\d{9}$)|(^15\d{9}$)|(^18\d{9}$)/.test(t))return a(new Error("移动电话号码不正确"));a()},trigger:"blur"}],email:[{required:!0,message:"请输入电子邮件",trigger:"blur"},{type:"email",message:"请输入正确的电子邮件",trigger:"blur"},{max:50,message:"长度在50个字符以内",trigger:"blur"}],address:[{max:200,message:"长度在200个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}],memo:[{max:300,message:"长度在300个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}]},multipleSelection:[],flag:""}}},le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticStyle:{"text-align":"left"},attrs:{"label-position":"right","label-width":"80px",model:e.userForm,inline:e.inline}},[a("el-form-item",{attrs:{label:"用户名",prop:"login_name"}},[a("el-input",{model:{value:e.userForm.login_name,callback:function(t){e.$set(e.userForm,"login_name",t)},expression:"userForm.login_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"real_name"}},[a("el-input",{model:{value:e.userForm.real_name,callback:function(t){e.$set(e.userForm,"real_name",t)},expression:"userForm.real_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"状态"},model:{value:e.userForm.flag,callback:function(t){e.$set(e.userForm,"flag",t)},expression:"userForm.flag"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"停用",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"角色"}},[a("el-select",{attrs:{placeholder:"角色"},model:{value:e.userForm.role,callback:function(t){e.$set(e.userForm,"role",t)},expression:"userForm.role"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.roles,function(e){return a("el-option",{key:e.role_id,attrs:{label:e.role_name,value:e.role_id}})})],2)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-bottom":"10px","text-align":"left"}},[a("el-button",{staticClass:"el-icon-plus",attrs:{plain:""},on:{click:function(t){e.openDialog("add")}}},[e._v("新建")]),e._v(" "),a("el-button",{staticClass:"el-icon-edit",attrs:{plain:""},on:{click:function(t){e.openDialog("edit")}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{plain:""},on:{click:e.delUser}},[e._v("删除")]),e._v(" "),a("el-button",{staticClass:"el-icon-refresh",attrs:{plain:""},on:{click:e.resetPwd}},[e._v("密码重置")]),e._v(" "),a("el-button",{staticClass:"el-icon-setting",attrs:{plain:""},on:{click:e.resetFlag}},[e._v("用户解锁")]),e._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary"},on:{click:e.selUser}},[e._v("查询")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleData,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"35",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"login_name",label:"用户名",align:"left",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"real_name",label:"姓名",align:"left",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"role_name",label:"角色",align:"left",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"flag",label:"状态",align:"left",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"failed_login_attempts",label:"登录失败次数",align:"left",width:"95"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lockout",label:"锁定次数",align:"left",width:"75"}}),e._v(" "),a("el-table-column",{attrs:{prop:"lockout_date",label:"锁定时间",align:"left",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"电子邮件",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"移动电话",align:"left",width:"160"}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{"current-page":e.currentPage,"page-sizes":[10,25,50,100],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.roleDialogVisible},on:{"update:visible":function(t){e.roleDialogVisible=t}}},[a("el-form",{ref:"userDialogForm",staticStyle:{"max-height":"55vh","overflow-y":"auto"},attrs:{model:e.userDialogForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth,prop:"login_name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.userDialogForm.login_name,callback:function(t){e.$set(e.userDialogForm,"login_name",t)},expression:"userDialogForm.login_name"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"状态","label-width":e.formLabelWidth}},[a("el-radio",{attrs:{label:"1"},model:{value:e.userDialogForm.flag,callback:function(t){e.$set(e.userDialogForm,"flag",t)},expression:"userDialogForm.flag"}},[e._v("正常")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.userDialogForm.flag,callback:function(t){e.$set(e.userDialogForm,"flag",t)},expression:"userDialogForm.flag"}},[e._v("停用")])],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth,prop:"real_name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.userDialogForm.real_name,callback:function(t){e.$set(e.userDialogForm,"real_name",t)},expression:"userDialogForm.real_name"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"角色","label-width":e.formLabelWidth,prop:"role"}},[a("el-select",{attrs:{placeholder:"角色"},model:{value:e.userDialogForm.role,callback:function(t){e.$set(e.userDialogForm,"role",t)},expression:"userDialogForm.role"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),e._v(" "),e._l(e.roles,function(e){return a("el-option",{key:e.role_id,attrs:{label:e.role_name,value:e.role_id}})})],2)],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"证件类型","label-width":e.formLabelWidth,prop:"credentialtype"}},[a("el-select",{attrs:{placeholder:"证件类型"},model:{value:e.userDialogForm.credentialtype,callback:function(t){e.$set(e.userDialogForm,"credentialtype",t)},expression:"userDialogForm.credentialtype"}},[a("el-option",{attrs:{label:"",value:""}}),e._v(" "),a("el-option",{attrs:{label:"身份证",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"临时居民身份证",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"军人身份证",value:"4"}}),e._v(" "),a("el-option",{attrs:{label:"武装警察身份证",value:"5"}}),e._v(" "),a("el-option",{attrs:{label:"港澳居民通行证",value:"6"}}),e._v(" "),a("el-option",{attrs:{label:"台湾居民通行证",value:"7"}}),e._v(" "),a("el-option",{attrs:{label:"护照",value:"8"}}),e._v(" "),a("el-option",{attrs:{label:"其他证件",value:"9"}}),e._v(" "),a("el-option",{attrs:{label:"港澳台居民往来内地通行证",value:"10"}}),e._v(" "),a("el-option",{attrs:{label:"外交人员身份证",value:"11"}}),e._v(" "),a("el-option",{attrs:{label:"外国人居留许可证",value:"12"}}),e._v(" "),a("el-option",{attrs:{label:"边民出入境通行证",value:"13"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"证件号码","label-width":e.formLabelWidth,prop:"credentialnum"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.userDialogForm.credentialnum,callback:function(t){e.$set(e.userDialogForm,"credentialnum",t)},expression:"userDialogForm.credentialnum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"固定电话","label-width":e.formLabelWidth,prop:"phone"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.userDialogForm.phone,callback:function(t){e.$set(e.userDialogForm,"phone",t)},expression:"userDialogForm.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"移动电话","label-width":e.formLabelWidth,prop:"mobile"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.userDialogForm.mobile,callback:function(t){e.$set(e.userDialogForm,"mobile",t)},expression:"userDialogForm.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电子邮件","label-width":e.formLabelWidth,prop:"email"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.userDialogForm.email,callback:function(t){e.$set(e.userDialogForm,"email",t)},expression:"userDialogForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"通讯地址","label-width":e.formLabelWidth,prop:"address"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.userDialogForm.address,callback:function(t){e.$set(e.userDialogForm,"address",t)},expression:"userDialogForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注信息","label-width":e.formLabelWidth,prop:"memo"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.userDialogForm.memo,callback:function(t){e.$set(e.userDialogForm,"memo",t)},expression:"userDialogForm.memo"}})],1),e._v(" "),a("el-form-item",{staticStyle:{display:"none"},attrs:{label:"密码1","label-width":e.formLabelWidth,prop:"repwd"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.userDialogForm.repwd,callback:function(t){e.$set(e.userDialogForm,"repwd",t)},expression:"userDialogForm.repwd"}})],1),e._v(" "),a("el-form-item",{staticStyle:{display:"none"},attrs:{label:"密码2","label-width":e.formLabelWidth,prop:"password"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.userDialogForm.password,callback:function(t){e.$set(e.userDialogForm,"password",t)},expression:"userDialogForm.password"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.roleDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("userDialogForm")}}},[e._v("保 存")])],1)],1)],1)},staticRenderFns:[]},ie=a("/Xao")(ae,le,!1,function(e){a("mU65")},null,null).exports,oe=a("NUMX"),re=a.n(oe),ne={};Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e};var se={getCodeData:function(){j.isEmptyObject(ne)&&G.get({url:"/common/dict",success:function(e){ne=e.codes?e.codes:{}}})},rendCode:function(e,t){var a=ne[e]?ne[e].items:[];t+="";for(var l=0;l<a.length;l++)if(a[l].value===t)return a[l].label;return t},getCodeItems:function(e){var t=ne[e]?ne[e].items:[];return re()(t).slice(0)},getCode:function(e){return ne[e]},rendDatetime:function(e){return e=parseInt(e),new Date(e).format("yyyy-MM-dd hh:mm:ss")}},ce={created:function(){this.sel()},methods:{handleSizeChange:function(e){this.sel({pageindex:this.pageindex,pagesize:e})},handleCurrentChange:function(e){this.sel({pageindex:e,pagesize:this.pagesize})},openDialog:function(e){if(this.savebtnStatus=!1,this.flag=e,"edit"===e){this.dialogTitle="编辑角色";if(1!==this.multipleSelection.length)return void this.$message("请选择一行角色信息。");this.roleDialogform=j.extend({},this.multipleSelection[0])}else"add"===e&&(this.dialogTitle="新建角色",this.$refs.roleDialogform?this.$refs.roleDialogform.resetFields():this.roleDialogform={role_name:"",flag:"1",info:""});this.roleDialogVisible=!0,this.$refs.roleDialogform&&this.$refs.roleDialogform.clearValidate()},handleSelectionChange:function(e){this.multipleSelection=e,1===e.length?this.btnStatus=!1:(e.length,this.btnStatus=!0)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;"add"===t.flag?t.add():"edit"===t.flag&&t.update()})},bindGridData:function(e){this.roleData=e.page.list,this.currentPage=e.page.index,this.pagesize=e.page.size,this.total=e.page.total},add:function(){var e=this;this.savebtnStatus=!0,G.post({url:"/role/add",param:this.roleDialogform,success:function(t){e.$message("创建成功。"),this.savebtnStatus=!1,e.roleDialogVisible=!1,e.sel()}})},del:function(){var e=this,t=this,a=this.multipleSelection[0];this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){G.post({url:"/role/del",param:{roleid:a.role_id},success:function(e){t.$message({type:"success",message:"删除成功!"}),t.sel()}})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},sel:function(e){var t,a=this;t=e&&(e.pageindex||e.pagesize)?j.extend({pageindex:this.pageindex,pagesize:this.pagesize},this.roleForm,e):j.extend({pageindex:this.pageindex,pagesize:this.pagesize},this.roleForm),G.post({url:"/role/list",param:t,success:function(e){e.page&&a.bindGridData(e)}})},update:function(){var e=this;this.savebtnStatus=!0,G.post({url:"/role/mod",param:this.roleDialogform,success:function(t){e.$message("更新成功。"),this.savebtnStatus=!1,e.roleDialogVisible=!1,e.sel()}})},grant:function(){var e=this,t=this.multipleSelection[0];G.post({url:"/role/grant/list",param:{roleid:t.role_id},success:function(t){if(t.list){var a=[{id:"-1",fid:"",func_type:"-1",flag:"1",ftype_name:"",text:"功能树",icon:"ticon-root",onum:0}];a=a.concat(t.list),e.treeList=a,e.grantData=j.formatTreeData(a),e.expendKey=j.expendNodesByLevel(e.grantData,2),e.checkedKeys=j.checkKeys(e.grantData,"grant","1"),e.grantDialogVisible=!0}}})},saveGrant:function(){var e=this;this.savebtnStatus=!0,G.post({url:"/role/grant/mod",param:{roleid:this.multipleSelection[0].role_id,funcs:this.$refs.grantTree.getCheckedNodes()},success:function(t){e.$message("更新成功。"),e.savebtnStatus=!1,e.grantDialogVisible=!1,e.sel()}})},selectFocus:function(){this.flagOptions=se.getCodeItems("cmc.cmc_role.flag")},formatter:function(e,t,a){switch(t.property){case"flag":return se.rendCode("cmc.cmc_role.flag",a);default:return a}}},data:function(){var e=this;return{inline:!0,roleForm:{role_name:""},roleData:[],pageindex:1,pagesize:10,total:100,roleDialogVisible:!1,grantDialogVisible:!1,roleDialogform:{role_name:"",flag:"1",info:""},dialogTitle:"",formLabelWidth:"100px",btnStatus:!0,savebtnStatus:!1,rules:{role_name:[{required:!0,message:"请输入角色名称",trigger:"blur"},{max:50,message:"长度在50个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"},{validator:function(t,a,l){if(a===e.multipleSelection[0].role_name)return l();G.post({url:"/role/checkUserName",param:{role_name:e.roleDialogform.role_name},success:function(e){"false"===e.checke_result?l(new Error("角色名称已被占用")):l()}})},trigger:"blur"}],info:[{max:200,message:"长度在200个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}]},multipleSelection:[],flag:"",flagOptions:[],clearable:!0,grantData:[],expendKey:["-1"],checkedKeys:[],defaultProps:{children:"children",label:"text"}}}},ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticStyle:{"text-align":"left"},attrs:{"label-position":"right","label-width":"80px",model:e.roleForm,inline:e.inline}},[a("el-form-item",{attrs:{label:"角色名称"}},[a("el-input",{model:{value:e.roleForm.role_name,callback:function(t){e.$set(e.roleForm,"role_name",t)},expression:"roleForm.role_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:e.clearable},on:{focus:function(t){e.selectFocus()}},model:{value:e.roleForm.flag,callback:function(t){e.$set(e.roleForm,"flag",t)},expression:"roleForm.flag"}},e._l(e.flagOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("div",{staticStyle:{"margin-bottom":"10px","text-align":"left"}},[a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary"},on:{click:e.sel}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"el-icon-plus",attrs:{plain:""},on:{click:function(t){e.openDialog("add")}}},[e._v("新建")]),e._v(" "),a("el-button",{staticClass:"el-icon-edit",attrs:{plain:"",disabled:e.btnStatus},on:{click:function(t){e.openDialog("edit")}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{plain:"",disabled:e.btnStatus},on:{click:e.del}},[e._v("删除")]),e._v(" "),a("el-button",{staticClass:"el-icon-setting",attrs:{plain:"",disabled:e.btnStatus},on:{click:e.grant}},[e._v("功能授权")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleData,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"role_name",label:"角色名称",align:"left",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"flag",label:"状态",align:"left",width:"180",formatter:e.formatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"info",label:"描述信息",align:"left"}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{"current-page":e.pageindex,"page-sizes":[10,25,50,100],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.roleDialogVisible},on:{"update:visible":function(t){e.roleDialogVisible=t}}},[a("el-form",{ref:"roleDialogform",attrs:{model:e.roleDialogform,rules:e.rules}},[a("el-form-item",{attrs:{label:"角色名称","label-width":e.formLabelWidth,prop:"role_name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.roleDialogform.role_name,callback:function(t){e.$set(e.roleDialogform,"role_name",t)},expression:"roleDialogform.role_name"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"状态","label-width":e.formLabelWidth}},[a("el-radio",{attrs:{label:"1"},model:{value:e.roleDialogform.flag,callback:function(t){e.$set(e.roleDialogform,"flag",t)},expression:"roleDialogform.flag"}},[e._v("正常")]),e._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:e.roleDialogform.flag,callback:function(t){e.$set(e.roleDialogform,"flag",t)},expression:"roleDialogform.flag"}},[e._v("停用")])],1),e._v(" "),a("el-form-item",{attrs:{label:"描述信息","label-width":e.formLabelWidth,prop:"info"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.roleDialogform.info,callback:function(t){e.$set(e.roleDialogform,"info",t)},expression:"roleDialogform.info"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.roleDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.savebtnStatus},on:{click:function(t){e.submitForm("roleDialogform")}}},[e._v("保 存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"功能授权",visible:e.grantDialogVisible},on:{"update:visible":function(t){e.grantDialogVisible=t}}},[a("el-tree",{ref:"grantTree",attrs:{data:e.grantData,"default-expanded-keys":e.expendKey,"default-checked-keys":e.checkedKeys,"show-checkbox":"","node-key":"id","highlight-current":"",props:e.defaultProps}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.roleDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.savebtnStatus},on:{click:e.saveGrant}},[e._v("保 存")])],1)],1)],1)},staticRenderFns:[]},de=a("/Xao")(ce,ue,!1,null,null,null).exports,me={created:function(){this.selTree()},data:function(){var e=this;return{toolBtn:{addBtn:!0,editBtn:!0,delBtn:!0},treeList:[],treeData:[{id:"-1",func_type:"-1",flag:"1",ftype_name:"",text:"功能树",icon:"ticon-root",onum:0}],nodeTypes:["子系统","模块","功能","子功能"],defaultProps:{children:"children",label:"text"},expendKey:["-1"],formLabelWidth:"120px",funcFormReadonly:!0,funcFormVisible:{form:!0,func_id:!0,parent_id:!0,func_type:!0,func_name:!0,conf:!0,ftype_name:!0,isgrant:!0,menu:!0,flag:!0,onum:!0,info:!0,islog:!0,logconf:!0},funcForm:{func_id:"",parent_id:"",func_type:"",func_name:"",conf:"",ftype_name:"",isgrant:"",menu:"1",flag:"1",onum:"",info:"",islog:"",logconf:"",logurlMethod:"",loguri:""},breadcrumbData:[],rules:{func_name:[{required:!0,message:"请输入节点名称",trigger:"blur"},{max:32,message:"长度在32个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"},{validator:function(t,a,l){var i=e.funcForm,o=e.treeList;for(var r in o){var n=o[r];if(n.text===a&&n.id!==i.func_id)return l(new Error("[节点名称]不能重复"))}return l()},trigger:"blur"}],conf:[{max:500,message:"长度在500个字符以内",trigger:"blur"}],onum:[{required:!0,message:"请输入节点名称",trigger:"blur"},{type:"number",max:100,min:0,message:"年龄必须为小于100的正整数",trigger:"blur"},{validator:function(t,a,l){var i=e,o=i.$refs.tree.currentNode.node,r=i.funcForm;if(""===r.func_id){var n=o.childNodes;for(var s in n)if(n[s].data.onum===a)return l(new Error("[顺序]不能重复"))}else{var c=o.parent.childNodes;for(var u in c)if(c[u].data.onum===a&&c[u].data.id!==r.func_id)return l(new Error("[顺序]不能重复"))}return l()},trigger:"blur"}],info:[{max:300,message:"长度在300个字符以内",trigger:"blur"}],logconf:[{validator:function(t,a,l){var i=e;if(0===a.indexOf("GET:"))i.funcForm.logurlMethod="0",i.funcForm.loguri=a.substring(4);else{if(0!==a.indexOf("POST:"))return l(new Error("[日志记录配置]只支持GET: 或POST:开头"));i.funcForm.logurlMethod="1",i.funcForm.loguri=a.substring(5)}return l()},trigger:"blur"}]}}},methods:{renderContent:function(e,t){var a=t.node;t.data,t.store;return"0"===a.data.flag?e("span",{class:"el-tree-node__label disabledFlag"},[a.label]):e("span",{class:"el-tree-node__label"},[a.label])},selTree:function(){var e=this,t={url:"/func/tree",success:function(t){if(t.list){var a=[{id:"-1",fid:"",func_type:"-1",flag:"1",ftype_name:"",text:"功能树",icon:"ticon-root",onum:0}];a=a.concat(t.list),e.treeList=a,e.treeData=e.formatTreeData(a),e.expendNodesByLevel(2)}}};G.post(t)},formatTreeData:function(e,t){function a(e,t){var l=[];for(var i in e){var o=e[i];o.fid===t&&(o.children=a(e,o.id),l.push(o))}return l}var l=[];if(void 0===t||0===t.length){t=[];for(var i in e)void 0!==e[i].fid&&null!==e[i].fid&&""!==e[i].fid||void 0!==e[i].id&&null!==e[i].id&&""!==e[i].id&&t.push(e[i])}0===t.length&&(console.error("根节点不存在，请确认树结构是否正确"),console.info("树结构的根节点是fid不存在（或为空）的节点，否则需手动添加指定得根节点（参数）"));for(var o in t){var r=t[o];r.children=a(e,r.id),l.push(r)}return l},expendNodesByLevel:function(e){for(var t=[],a=this.treeData[0],l=1;l<=e;)t.push(a.id),a=a.children[0],l++;this.expendKey=t},handleNodeClick:function(e,t){if(this.funcForm.func_id!==e.id){this.$refs.funcForm.clearValidate();var a=e.func_type;a<"3"&&"1"===e.flag?this.toolBtn.addBtn=!1:this.toolBtn.addBtn=!0,"-1"===a?(this.toolBtn.editBtn=!0,this.toolBtn.delBtn=!0):(this.toolBtn.editBtn=!1,this.toolBtn.delBtn=!1),this.syncBreadcrumb(t),this.funcFormReadonly=!0,this.showNodeAttr(t.data.func_type),this.showNodeValue(e)}},syncBreadcrumb:function(e){for(var t=[];null!==e.parent;)t.unshift({text:e.data.text}),e=e.parent;this.breadcrumbData=t},showNodeAttr:function(e){var t={form:!1,func_id:!0,parent_id:!0,func_type:!0,func_name:!1,conf:!1,ftype_name:!1,isgrant:!1,menu:!1,flag:!1,onum:!1,info:!1,islog:!1,logconf:!1};"-1"===e?(t.ftype_name=!0,t.isgrant=!0,t.menu=!0,t.flag=!0,t.onum=!0,t.islog=!0,t.logconf=!0,this.funcFormVisible=t):"0"===e||"1"===e?(t.isgrant=!0,t.islog=!0,t.logconf=!0,this.funcFormVisible=t):"2"===e?this.funcFormVisible=t:"3"===e?(t.isgrant=!0,t.menu=!0,this.funcFormVisible=t):this.funcFormVisible=t},showNodeValue:function(e){var t={func_id:e.id,parent_id:e.fid,func_type:e.func_type,func_name:e.text,conf:e.conf,ftype_name:this.nodeTypes[e.func_type],isgrant:"1"===e.isgrant,menu:e.menu?e.menu:"1",flag:e.flag?e.flag:"1",onum:e.onum,info:e.info,islog:"1"===e.islog,logconf:"",logurlMethod:e.logurlmethod,loguri:e.loguri};switch(e.logurlmethod){case"0":t.logconf="GET:"+e.loguri;break;case"1":t.logconf="POST:"+e.loguri}this.funcForm=t},resetPage:function(){this.funcFormVisible.form=!0,this.breadcrumbData=[],this.toolBtn={addBtn:!0,editBtn:!0,delBtn:!0}},addFunc:function(){this.$refs.funcForm.resetFields();var e=this.$refs.tree.getCurrentNode();console.info(e),this.funcForm.ftype_name=this.nodeTypes[Number(e.func_type)+1],this.funcFormReadonly=!1,this.showNodeAttr(Number(e.func_type)+1+"")},editFunc:function(){this.funcFormReadonly=!1},delFunc:function(){var e=this,t=this,a=t.$refs.tree.currentNode.node;this.$confirm("确定要删除功能节点吗？其下级节点将都会被删除！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={url:"/func/del",param:{funcId:a.id,rf:"json"},success:function(e){a.visible=!1,t.resetPage(),t.$message("删除功能成功")}};G.post(e)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},closeFuncForm:function(){""===this.funcForm.func_id?this.resetPage():this.funcFormReadonly=!0},submitFunc:function(){var e=this,t={url:""===e.funcForm.func_id?"/func/add":"/func/mod",param:e.funcForm,success:function(t){e.$message("操作成功。"),e.selTree(),e.resetPage()}};G.post(t)}}},fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticStyle:{height:"100%",border:"1px solid #eee"}},[a("el-col",{staticStyle:{"border-right":"1px solid #eee"},attrs:{span:6}},[a("div",{staticStyle:{height:"38px","margin-top":"5px","text-align":"left","border-bottom":"1px solid #eee"}},[a("el-button",{staticClass:"el-icon-plus",staticStyle:{"margin-left":"5px"},attrs:{plain:"",disabled:e.toolBtn.addBtn},on:{click:e.addFunc}},[e._v("新建\n        ")]),e._v(" "),a("el-button",{staticClass:"el-icon-edit",staticStyle:{"margin-left":"0px"},attrs:{plain:"",disabled:e.toolBtn.editBtn},on:{click:e.editFunc}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{staticClass:"el-icon-delete",staticStyle:{"margin-left":"0px"},attrs:{plain:"",disabled:e.toolBtn.delBtn},on:{click:e.delFunc}},[e._v("删除\n        ")])],1),e._v(" "),a("el-tree",{ref:"tree",staticStyle:{height:"76vh","overflow-y":"auto"},attrs:{data:e.treeData,"node-key":"id","default-expanded-keys":e.expendKey,props:e.defaultProps,"highlight-current":!0,"expand-on-click-node":!1,"render-content":e.renderContent},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),a("el-col",{attrs:{span:18}},[a("div",{staticStyle:{height:"38px",width:"100%","margin-top":"5px","text-align":"left","border-bottom":"1px solid #eee"}},[a("el-breadcrumb",{staticStyle:{padding:"10px 15px"},attrs:{id:"funcPath",separator:">"}},e._l(e.breadcrumbData,function(t){return a("el-breadcrumb-item",{key:t.text},[e._v(e._s(t.text))])}))],1),e._v(" "),a("el-main",{staticStyle:{"max-height":"76vh","overflow-y":"auto"}},[a("el-form",{ref:"funcForm",class:{hidden:e.funcFormVisible.form},staticStyle:{"text-align":"left"},attrs:{model:e.funcForm,rules:e.rules,"label-suffix":"：","label-width":e.formLabelWidth}},[a("el-form-item",{class:{hidden:e.funcFormVisible.func_id},attrs:{label:"功能编号",prop:"func_id"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.funcForm.func_id,callback:function(t){e.$set(e.funcForm,"func_id",t)},expression:"funcForm.func_id"}})],1),e._v(" "),a("el-form-item",{class:{hidden:e.funcFormVisible.parent_id},attrs:{label:"父节点编号",prop:"parent_id"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.funcForm.parent_id,callback:function(t){e.$set(e.funcForm,"parent_id",t)},expression:"funcForm.parent_id"}})],1),e._v(" "),a("el-form-item",{class:{hidden:e.funcFormVisible.func_type},attrs:{label:"功能类型",prop:"func_type"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.funcForm.func_type,callback:function(t){e.$set(e.funcForm,"func_type",t)},expression:"funcForm.func_type"}})],1),e._v(" "),a("el-form-item",{class:{hidden:e.funcFormVisible.func_name},attrs:{label:"节点名称",prop:"func_name"}},[a("el-input",{attrs:{"auto-complete":"off",readonly:e.funcFormReadonly},model:{value:e.funcForm.func_name,callback:function(t){e.$set(e.funcForm,"func_name",t)},expression:"funcForm.func_name"}})],1),e._v(" "),a("el-form-item",{class:{hidden:e.funcFormVisible.conf},attrs:{label:"节点配置",prop:"conf"}},[a("el-input",{attrs:{type:"textarea",readonly:e.funcFormReadonly},model:{value:e.funcForm.conf,callback:function(t){e.$set(e.funcForm,"conf",t)},expression:"funcForm.conf"}})],1),e._v(" "),a("el-form-item",{class:{hidden:e.funcFormVisible.ftype_name},attrs:{label:"节点类型",prop:"ftype_name"}},[a("el-input",{attrs:{"auto-complete":"off",readonly:e.funcFormReadonly},model:{value:e.funcForm.ftype_name,callback:function(t){e.$set(e.funcForm,"ftype_name",t)},expression:"funcForm.ftype_name"}})],1),e._v(" "),a("el-form-item",{class:{hidden:e.funcFormVisible.isgrant},attrs:{label:"访问授权",prop:"isgrant"}},[a("el-checkbox",{attrs:{label:"需要授权",name:"type",disabled:e.funcFormReadonly},model:{value:e.funcForm.isgrant,callback:function(t){e.$set(e.funcForm,"isgrant",t)},expression:"funcForm.isgrant"}})],1),e._v(" "),a("el-form-item",{class:{hidden:e.funcFormVisible.menu},attrs:{label:"是否菜单"}},[a("el-radio",{attrs:{label:"1",disabled:e.funcFormReadonly},model:{value:e.funcForm.menu,callback:function(t){e.$set(e.funcForm,"menu",t)},expression:"funcForm.menu"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0",disabled:e.funcFormReadonly},model:{value:e.funcForm.menu,callback:function(t){e.$set(e.funcForm,"menu",t)},expression:"funcForm.menu"}},[e._v("否")])],1),e._v(" "),a("el-form-item",{class:{hidden:e.funcFormVisible.flag},attrs:{label:"状态"}},[a("el-radio",{attrs:{label:"1",disabled:e.funcFormReadonly},model:{value:e.funcForm.flag,callback:function(t){e.$set(e.funcForm,"flag",t)},expression:"funcForm.flag"}},[e._v("正常")]),e._v(" "),a("el-radio",{attrs:{label:"0",disabled:e.funcFormReadonly},model:{value:e.funcForm.flag,callback:function(t){e.$set(e.funcForm,"flag",t)},expression:"funcForm.flag"}},[e._v("停用")])],1),e._v(" "),a("el-form-item",{class:{hidden:e.funcFormVisible.onum},attrs:{label:"顺序",prop:"onum"}},[a("el-input",{attrs:{"auto-complete":"off",readonly:e.funcFormReadonly},model:{value:e.funcForm.onum,callback:function(t){e.$set(e.funcForm,"onum",e._n(t))},expression:"funcForm.onum"}})],1),e._v(" "),a("el-form-item",{class:{hidden:e.funcFormVisible.info},attrs:{label:"描述信息",prop:"info"}},[a("el-input",{attrs:{type:"textarea",readonly:e.funcFormReadonly},model:{value:e.funcForm.info,callback:function(t){e.$set(e.funcForm,"info",t)},expression:"funcForm.info"}})],1),e._v(" "),a("el-form-item",{class:{hidden:e.funcFormVisible.islog},attrs:{label:"记录日志",prop:"islog"}},[a("el-checkbox",{attrs:{label:"记录",name:"type",disabled:e.funcFormReadonly},model:{value:e.funcForm.islog,callback:function(t){e.$set(e.funcForm,"islog",t)},expression:"funcForm.islog"}})],1),e._v(" "),a("el-form-item",{class:{hidden:e.funcFormVisible.logconf},attrs:{label:"日志记录配置",prop:"logconf"}},[a("el-input",{attrs:{"auto-complete":"off",readonly:e.funcFormReadonly},model:{value:e.funcForm.logconf,callback:function(t){e.$set(e.funcForm,"logconf",t)},expression:"funcForm.logconf"}})],1),e._v(" "),a("el-form-item",{class:{hidden:e.funcFormReadonly},staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitFunc}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:e.closeFuncForm}},[e._v("取 消")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},pe=a("/Xao")(me,fe,!1,function(e){a("AaCG")},null,null).exports,he={created:function(){this.sel()},methods:{handleSizeChange:function(e){this.sel({pageindex:this.pageindex,pagesize:e})},handleCurrentChange:function(e){this.sel({pageindex:e,pagesize:this.pagesize})},openDialog:function(e){if(this.flag=e,"edit"===e){this.dialogTitle="编辑名单",this.status=!0;if(1!==this.multipleSelection.length)return void this.$message("请选择一行名单信息。");this.listDialogform=j.extend({},this.multipleSelection[0])}else"add"===e&&(this.dialogTitle="新建名单",this.status=!1,this.$refs.listDialogform?this.$refs.listDialogform.resetFields():this.listDialogform={rostername:"",rosterdesc:"",datatype:"",rostertype:"",iscache:"1",remark:""});this.listDialogVisible=!0,this.$refs.listDialogform&&this.$refs.listDialogform.clearValidate()},handleSelectionChange:function(e){this.multipleSelection=e,1===e.length?(this.btnStatus=!1,this.delBtnStatus=!1):e.length>1?(this.btnStatus=!0,this.delBtnStatus=!1):(this.btnStatus=!0,this.delBtnStatus=!0)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;"add"===t.flag?t.add():"edit"===t.flag&&t.update()})},bindGridData:function(e){this.gridData=e.page.list,this.pageindex=e.page.index,this.pagesize=e.page.size,this.total=e.page.total},add:function(){var e=this;G.post({url:"/mgr/add",param:this.listDialogform,success:function(t){e.$message("创建成功。"),e.listDialogVisible=!1,e.sel()}})},del:function(){var e=this,t=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){G.post({url:"/mgr/del",param:{del:e.multipleSelection},success:function(e){t.$message({type:"success",message:"删除成功!"}),t.sel()}})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},sel:function(e){var t,a=this;t=e&&(e.pageindex||e.pagesize)?j.extend({pageindex:this.pageindex,pagesize:this.pagesize},this.listForm,e):j.extend({pageindex:this.pageindex,pagesize:this.pagesize},this.listForm),G.post({url:"/mgr/list",param:t,success:function(e){e.page&&a.bindGridData(e)}})},update:function(){var e=this;G.post({url:"/mgr/mod",param:this.listDialogform,success:function(t){e.$message("更新成功。"),e.listDialogVisible=!1,e.sel()}})},showValueList:function(){var e=this.multipleSelection[0].rosterid,t=this.multipleSelection[0].datatype;this.$router.push({name:"valuelist",params:{rosterid:e,datatype:t}})},importList:function(){this.importDialogVisible=!0},exportList:function(){0!==this.multipleSelection[0].valuecount?this.exportDialogVisible=!0:this.$message("名单中没有名单值。")},selectFocus:function(e){"datatype"===e&&0===this.datatypeOptions.length&&(this.datatypeOptions=se.getCodeItems("tms.model.datatype.roster")),"rostertype"===e&&0===this.rostertypeOptions.length&&(this.rostertypeOptions=se.getCodeItems("tms.mgr.rostertype"))},formatter:function(e,t,a){switch(t.property){case"datatype":return se.rendCode("tms.model.datatype.roster",a);case"rostertype":return se.rendCode("tms.mgr.rostertype",a);case"createtime":return se.rendDatetime(a);case"iscache":return se.rendCode("tms.mgr.iscache",a);default:return a}},submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},exportAction:function(e){var t=this.multipleSelection[0],a="&rosterid="+t.rosterid+"&rosterdesc="+t.rosterdesc,l="/context/manager/mgr/export?"+(j.serializeObj(this.listForm)+a+"&flag="+e);window.open(l),this.exportDialogVisible=!1}},data:function(){return{inline:!0,clearable:!0,listForm:{rosterdesc:"",datatype:"",rostertype:""},gridData:[],pageindex:1,pagesize:10,total:100,listDialogVisible:!1,listDialogform:{rostername:"",rosterdesc:"",datatype:"",rostertype:"",iscache:"1",remark:""},status:!0,btnStatus:!0,delBtnStatus:!0,dialogTitle:"",formLabelWidth:"150px",datatypeOptions:[],rostertypeOptions:[],rules:{rostername:[{required:!0,message:"请输入名单英文名",trigger:"blur"},{max:32,message:"长度在32个字符以内",trigger:"blur"},{validator:te.checkFormEnSpecialCharacter,trigger:"blur"}],listFormFosterdesc:[{max:64,message:"长度在64个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}],rosterdesc:[{required:!0,message:"请输入名单名称",trigger:"blur"},{max:64,message:"长度在64个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}],datatype:[{required:!0,message:"请输入名单数据类型",trigger:"blur"}],rostertype:[{required:!0,message:"请输入名单类型",trigger:"blur"}],remark:[{max:512,message:"长度在512个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}]},multipleSelection:[],flag:"",importDialogVisible:!1,exportDialogVisible:!1}}},ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticStyle:{"text-align":"left"},attrs:{"label-position":"right","label-width":"100px",model:e.listForm,inline:e.inline}},[a("el-form-item",{attrs:{label:"名单名称",prop:"listFormFosterdesc"}},[a("el-input",{model:{value:e.listForm.rosterdesc,callback:function(t){e.$set(e.listForm,"rosterdesc",t)},expression:"listForm.rosterdesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名单数据类型"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:e.clearable},on:{focus:function(t){e.selectFocus("datatype")}},model:{value:e.listForm.datatype,callback:function(t){e.$set(e.listForm,"datatype",t)},expression:"listForm.datatype"}},e._l(e.datatypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"名单类型"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:e.clearable},on:{focus:function(t){e.selectFocus("rostertype")}},model:{value:e.listForm.rostertype,callback:function(t){e.$set(e.listForm,"rostertype",t)},expression:"listForm.rostertype"}},e._l(e.rostertypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("div",{staticStyle:{"margin-bottom":"10px","text-align":"left"}},[a("el-button",{ref:"selBtn",staticClass:"el-icon-search",attrs:{type:"primary",id:"selBtn"},on:{click:e.sel}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"el-icon-plus",attrs:{plain:"",id:"addBtn"},on:{click:function(t){e.openDialog("add")}}},[e._v("新建")]),e._v(" "),a("el-button",{staticClass:"el-icon-edit",attrs:{plain:"",disabled:e.btnStatus},on:{click:function(t){e.openDialog("edit")}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{plain:"",disabled:e.delBtnStatus},on:{click:e.del}},[e._v("删除")]),e._v(" "),a("el-button",{staticClass:"el-icon-edit",attrs:{plain:"",disabled:e.btnStatus},on:{click:e.showValueList}},[e._v("名单值")]),e._v(" "),a("el-button",{staticClass:"el-icon-upload",attrs:{plain:"",disabled:e.btnStatus},on:{click:e.importList}},[e._v("导入")]),e._v(" "),a("el-button",{staticClass:"el-icon-download",attrs:{plain:"",disabled:e.btnStatus},on:{click:e.exportList}},[e._v("导出")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.gridData,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rostername",label:"名单英文名",align:"left",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rosterdesc",label:"名单名称",align:"left",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"datatype",label:"名单数据类型",align:"left",width:"120",formatter:e.formatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"rostertype",label:"名单类型",align:"left",width:"120",formatter:e.formatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"valuecount",label:"值数量",align:"left",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间",align:"left",width:"150",formatter:e.formatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"iscache",label:"是否缓存",align:"left",width:"120",formatter:e.formatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"left",width:"120"}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{"current-page":e.pageindex,"page-sizes":[10,25,50,100],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.listDialogVisible},on:{"update:visible":function(t){e.listDialogVisible=t}}},[a("el-form",{ref:"listDialogform",staticStyle:{"text-align":"left"},attrs:{model:e.listDialogform,rules:e.rules,"label-width":e.formLabelWidth}},[a("el-form-item",{attrs:{label:"名单英文名",prop:"rostername",data:"rostername"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:e.status},model:{value:e.listDialogform.rostername,callback:function(t){e.$set(e.listDialogform,"rostername",t)},expression:"listDialogform.rostername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名单名称",prop:"rosterdesc",data:"rosterdesc"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:e.status},model:{value:e.listDialogform.rosterdesc,callback:function(t){e.$set(e.listDialogform,"rosterdesc",t)},expression:"listDialogform.rosterdesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名单数据类型",prop:"datatype",data:"datatype"}},[a("el-select",{attrs:{disabled:e.status,clearable:e.clearable},model:{value:e.listDialogform.datatype,callback:function(t){e.$set(e.listDialogform,"datatype",t)},expression:"listDialogform.datatype"}},e._l(e.datatypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"名单类型",prop:"rostertype",data:"rostertype"}},[a("el-select",{attrs:{disabled:e.status,clearable:e.clearable},model:{value:e.listDialogform.rostertype,callback:function(t){e.$set(e.listDialogform,"rostertype",t)},expression:"listDialogform.rostertype"}},e._l(e.rostertypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"是否缓存",prop:"iscache",data:"iscache"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.listDialogform.iscache,callback:function(t){e.$set(e.listDialogform,"iscache",t)},expression:"listDialogform.iscache"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:e.listDialogform.iscache,callback:function(t){e.$set(e.listDialogform,"iscache",t)},expression:"listDialogform.iscache"}},[e._v("否")])],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark",data:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.listDialogform.remark,callback:function(t){e.$set(e.listDialogform,"remark",t)},expression:"listDialogform.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{data:"cancelBtn"},on:{click:function(t){e.listDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",data:"saveBtn"},on:{click:function(t){e.submitForm("listDialogform")}}},[e._v("保 存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"名单管理导入",visible:e.importDialogVisible},on:{"update:visible":function(t){e.importDialogVisible=t}}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/context/manager/mgr/import","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("上传到服务器")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("请上传XLS、XLSX、TXT或CSV格式的文件")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"选择导出名单格式",visible:e.exportDialogVisible},on:{"update:visible":function(t){e.exportDialogVisible=t}}},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.exportAction("txt")}}},[e._v("TXT")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(t){e.exportAction("csv")}}},[e._v("CSV")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(t){e.exportAction("xls")}}},[e._v("Excel2003及以下版本")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(t){e.exportAction("xlsx")}}},[e._v("Excel2007及以上版本")]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{data:"cancelBtn"},on:{click:function(t){e.listDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",data:"saveBtn"},on:{click:function(t){e.submitForm("listDialogform")}}},[e._v("保 存")])],1)],1)],1)},staticRenderFns:[]},be=a("/Xao")(he,ge,!1,null,null,null).exports,ve={created:function(){this.sel()},methods:{handleSizeChange:function(e){this.sel({pageindex:this.pageindex,pagesize:e})},handleCurrentChange:function(e){this.sel({pageindex:e,pagesize:this.pagesize})},openDialog:function(e,t){this.dialogTitle="查看名单",this.listDialogVisible=!0,$()(this.listDialogform,this.selectRowNum2Str(t)),setTimeout(function(){self.listDialogform.rostertype=t.rostertype},300)},selectRowNum2Str:function(e){var t={};$()(t,e);for(var a in t)"number"==typeof t[a]&&(t[a]=t[a].toString());return t},handleSelectionChange:function(e){this.multipleSelection=e},bindGridData:function(e){this.gridData=e.page.list,this.pageindex=e.page.index,this.pagesize=e.page.size,this.total=e.page.total},sel:function(e){var t,a=this;t=e&&(e.pageindex||e.pagesize)?j.extend({pageindex:this.pageindex,pagesize:this.pagesize},this.listForm,e):j.extend({pageindex:this.pageindex,pagesize:this.pagesize},this.listForm),G.post({url:"/mgrView/list",param:t,success:function(e){e.page&&a.bindGridData(e)}})},showValueList:function(e,t){var a=t.rosterid.toString();this.$router.push({name:"valuelist",params:{rosterid:a,datatype:"view"}})},selectFocus:function(e){"datatype"===e&&0===this.datatypeOptions.length&&(this.datatypeOptions=se.getCodeItems("tms.model.datatype.roster")),"rostertype"===e&&0===this.rostertypeOptions.length&&(this.rostertypeOptions=se.getCodeItems("tms.mgr.rostertype"))},formatter:function(e,t,a){switch(t.property){case"datatype":return se.rendCode("tms.model.datatype.roster",a);case"rostertype":return se.rendCode("tms.mgr.rostertype",a);case"createtime":return se.rendDatetime(a);case"iscache":return se.rendCode("tms.mgr.iscache",a);default:return a}}},data:function(){return{inline:!0,clearable:!0,listForm:{rosterdesc:"",datatype:"",rostertype:""},gridData:[],pageindex:1,pagesize:10,total:100,listDialogVisible:!1,listDialogform:{rostername:"",rosterdesc:"",datatype:"",rostertype:"",iscache:"1",remark:""},dialogTitle:"",formLabelWidth:"150px",datatypeOptions:[],rostertypeOptions:[],multipleSelection:[]}},props:["rosterid"]},_e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"text-align":"left"},attrs:{"label-position":"right","label-width":"100px",model:e.listForm,label:"left",inline:e.inline}},[a("el-form-item",{attrs:{label:"名单名称:",prop:"listFormFosterdesc"}},[a("el-input",{model:{value:e.listForm.rosterdesc,callback:function(t){e.$set(e.listForm,"rosterdesc",t)},expression:"listForm.rosterdesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名单数据类型:"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:e.clearable},on:{focus:function(t){e.selectFocus("datatype")}},model:{value:e.listForm.datatype,callback:function(t){e.$set(e.listForm,"datatype",t)},expression:"listForm.datatype"}},e._l(e.datatypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"名单类型:"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:e.clearable},on:{focus:function(t){e.selectFocus("rostertype")}},model:{value:e.listForm.rostertype,callback:function(t){e.$set(e.listForm,"rostertype",t)},expression:"listForm.rostertype"}},e._l(e.rostertypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{ref:"selBtn",staticClass:"el-icon-search",attrs:{type:"primary",id:"selBtn"},on:{click:e.sel}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.gridData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{fixed:"left",label:"操 作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"number"==typeof t.row.rosterid,expression:"typeof(scope.row.rosterid)=='number'"}],attrs:{type:"text",size:"mini",icon:"el-icon-view"},on:{click:function(a){e.openDialog(t.$index,t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"number"==typeof t.row.rosterid,expression:"typeof(scope.row.rosterid)=='number'"}],attrs:{type:"text",size:"mini",icon:"el-icon-document"},on:{click:function(a){e.showValueList(t.$index,t.row)}}},[e._v("名单值")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"rostername",label:"名单英文名",align:"left",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rosterdesc",label:"名单名称",align:"left",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"datatype",label:"名单数据类型",align:"left",width:"160",formatter:e.formatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"rostertype",label:"名单类型",align:"left",width:"160",formatter:e.formatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"valuecount",label:"值数量",align:"left",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间",align:"left",width:"160",formatter:e.formatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"iscache",label:"是否缓存",align:"left",width:"120",formatter:e.formatter}})],1),e._v(" "),a("el-pagination",{staticClass:"block",attrs:{background:"",label:"left","label-width":"100px","current-page":e.pageindex,"page-sizes":[10,25,50,100],"page-size":e.pagesize,layout:"total, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.listDialogVisible},on:{"update:visible":function(t){e.listDialogVisible=t}}},[a("el-form",{ref:"listDialogform",staticStyle:{"text-align":"left"},attrs:{model:e.listDialogform,rules:e.rules,"label-width":e.formLabelWidth}},[a("el-form-item",{attrs:{label:"名单英文名:",prop:"rostername",data:"rostername"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0},model:{value:e.listDialogform.rostername,callback:function(t){e.$set(e.listDialogform,"rostername",t)},expression:"listDialogform.rostername"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名单名称:",prop:"rosterdesc",data:"rosterdesc"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0},model:{value:e.listDialogform.rosterdesc,callback:function(t){e.$set(e.listDialogform,"rosterdesc",t)},expression:"listDialogform.rosterdesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名单数据类型:",prop:"datatype",data:"datatype"}},[a("el-select",{attrs:{disabled:"",clearable:e.clearable},model:{value:e.listDialogform.datatype,callback:function(t){e.$set(e.listDialogform,"datatype",t)},expression:"listDialogform.datatype"}},e._l(e.datatypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"名单类型:",prop:"rostertype",data:"rostertype"}},[a("el-select",{attrs:{disabled:"",clearable:e.clearable},model:{value:e.listDialogform.rostertype,callback:function(t){e.$set(e.listDialogform,"rostertype",t)},expression:"listDialogform.rostertype"}},e._l(e.rostertypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"是否缓存:",prop:"iscache",data:"iscache",disabled:""}},[a("el-radio",{attrs:{label:"1",disabled:""},model:{value:e.listDialogform.iscache,callback:function(t){e.$set(e.listDialogform,"iscache",t)},expression:"listDialogform.iscache"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0",disabled:""},model:{value:e.listDialogform.iscache,callback:function(t){e.$set(e.listDialogform,"iscache",t)},expression:"listDialogform.iscache"}},[e._v("否")])],1),e._v(" "),a("el-form-item",{attrs:{label:"备注:",prop:"remark",data:"remark"}},[a("el-input",{attrs:{type:"textarea",disabled:!0},model:{value:e.listDialogform.remark,callback:function(t){e.$set(e.listDialogform,"remark",t)},expression:"listDialogform.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{data:"cancelBtn",icon:"el-icon-arrow-left",type:"primary"},on:{click:function(t){e.listDialogVisible=!1}}},[e._v("返 回")])],1)],1)],1)},staticRenderFns:[]},ye=a("/Xao")(ve,_e,!1,null,null,null).exports,Fe={created:function(){this.getList(this.sel)},methods:{handleSizeChange:function(e){this.sel({pageindex:this.pageindex,pagesize:e})},handleCurrentChange:function(e){this.sel({pageindex:e,pagesize:this.pagesize})},openDialog:function(e){if(this.flag=e,this.dialogTitle="名单值管理->"+this.title,"edit"===e){if(1!==this.multipleSelection.length)return void this.$message("请选择一行名单值信息。");this.valueListDialogform=j.extend({},this.multipleSelection[0])}else"add"===e&&(this.$refs.valueListDialogform?this.$refs.valueListDialogform.resetFields():this.valueListDialogform={rostervalue:"",enabletime:(new Date).format("yyyy-MM-dd hh:mm:ss"),disabletime:"",remark:""});this.valueListDialogVisible=!0,this.$refs.valueListDialogform&&this.$refs.valueListDialogform.clearValidate()},handleSelectionChange:function(e){this.multipleSelection=e,1===e.length?(this.btnStatus=!1,this.delBtnStatus=!1):e.length>1?(this.btnStatus=!0,this.delBtnStatus=!1):(this.btnStatus=!0,this.delBtnStatus=!0)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;"add"===t.flag?t.add():"edit"===t.flag&&t.update()})},bindGridData:function(e){this.gridData=e.page.list,this.pageindex=e.page.index,this.pagesize=e.page.size,this.total=e.page.total},bindValueGridData:function(e){this.changeValueTableData=e.row},getList:function(e){self=this;var t={rosterid:this.$router.history.current.params.rosterid};G.post({url:"/mgr/get",param:t,success:function(t){self.listData=t.row,self.title=t.row.rosterdesc,e&&e()}})},add:function(){var e=this,t=j.extend({rosterid:this.listData.rosterid,datatype:this.listData.datatype,rosterdesc:this.listData.rosterdesc},this.valueListDialogform);G.post({url:"/mgr/valueadd",param:t,success:function(t){e.$message("创建成功。"),e.valueListDialogVisible=!1,e.sel()}})},del:function(){var e=this,t=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){G.post({url:"/mgr/valuedel",param:{postData:{del:e.multipleSelection}},success:function(e){t.$message({type:"success",message:"删除成功!"}),t.sel()}})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},sel:function(e){var t,a=this,l={pageindex:this.pageindex,pagesize:this.pagesize,rosterid:this.listData.rosterid,datatype:this.listData.datatype};t=e&&(e.pageindex||e.pagesize)?j.extend(l,this.valueListForm,e):j.extend(l,this.valueListForm),G.post({url:"/mgr/valuelist",param:t,success:function(e){e.page&&a.bindGridData(e)}})},update:function(){var e=this,t=j.extend({rosterid:this.listData.rosterid,datatype:this.listData.datatype,rosterdesc:this.listData.rosterdesc},this.valueListDialogform);G.post({url:"/mgr/valuemod",param:t,success:function(t){e.$message("更新成功。"),e.valueListDialogVisible=!1,e.sel()}})},changeValue:function(){var e=this;G.post({url:"/mgr/changevalueget",param:{rosterid:this.listData.rosterid,datatype:this.listData.datatype,rostertype:this.listData.rostertype},success:function(t){e.bindValueGridData(t),e.changeValueDialogVisible=!0}})},constrast:function(){var e=this.multipleSelection[0];G.post({url:"/mgr/changevalue",param:{rostervalueid:e.rostervalueid,rostervalue:e.rostervalue,rosterid:this.valuecurrentRow.rosterid+"||||"+this.valuecurrentRow.rosterdesc,rosteridold:this.listData.rosterid,rosterdescout:this.listData.rosterdesc},success:function(e){self.$message("值转换成功。"),self.changeValueDialogVisible=!1,self.sel()}})},handleCurrentChangeValueTable:function(e){this.valuecurrentRow=e},backList:function(){this.$router.push({name:"list"})}},data:function(){return{inline:!0,valueListForm:{rostervalue:""},listData:{rosterdesc:""},gridData:[],pageindex:1,pagesize:10,total:100,valueListDialogVisible:!1,valueListDialogform:{rostervalue:"",enabletime:(new Date).format("yyyy-MM-dd hh:mm:ss"),disabletime:"",remark:""},dialogTitle:"",title:"testdddd",formLabelWidth:"150px",rules:{rostervalue:[{required:!0,message:"请输入名单英文名",trigger:"blur"}],enabletime:[],disabletime:[],remark:[{max:512,message:"长度在512个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}]},multipleSelection:[],flag:"",changeValueDialogVisible:!1,changeValueTableData:[],valuecurrentRow:{},btnStatus:!0,delBtnStatus:!0}}},De={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("名单值管理 -> "+e._s(e.title))]),e._v(" "),a("el-form",{staticStyle:{"text-align":"left"},attrs:{"label-position":"right","label-width":"100px",model:e.valueListForm,inline:e.inline}},[a("el-form-item",{attrs:{label:"名单值"}},[a("el-input",{model:{value:e.valueListForm.rostervalue,callback:function(t){e.$set(e.valueListForm,"rostervalue",t)},expression:"valueListForm.rostervalue"}})],1)],1),e._v(" "),a("div",{staticStyle:{"margin-bottom":"10px","text-align":"left"}},[a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary"},on:{click:e.sel}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"el-icon-plus",attrs:{plain:""},on:{click:function(t){e.openDialog("add")}}},[e._v("新建")]),e._v(" "),a("el-button",{staticClass:"el-icon-edit",attrs:{plain:"",disabled:e.btnStatus},on:{click:function(t){e.openDialog("edit")}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{plain:"",disabled:e.delBtnStatus},on:{click:e.del}},[e._v("删除")]),e._v(" "),a("el-button",{staticClass:"el-icon-edit",attrs:{plain:"",disabled:e.btnStatus},on:{click:e.changeValue}},[e._v("值转换")]),e._v(" "),a("el-button",{staticClass:"el-icon-back",attrs:{plain:""},on:{click:e.backList}},[e._v("返回")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.gridData,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rostervalue",label:"名单值",align:"left",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"enabletime",label:"开始时间",align:"left",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"disabletime",label:"结束时间",align:"left",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"创建时间",align:"left",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"left",width:"300"}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{"current-page":e.pageindex,"page-sizes":[10,25,50,100],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.valueListDialogVisible},on:{"update:visible":function(t){e.valueListDialogVisible=t}}},[a("el-form",{ref:"valueListDialogform",staticStyle:{"text-align":"left"},attrs:{model:e.valueListDialogform,rules:e.rules,"label-width":e.formLabelWidth}},[a("el-form-item",{attrs:{label:"名单值",prop:"rostervalue"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.valueListDialogform.rostervalue,callback:function(t){e.$set(e.valueListDialogform,"rostervalue",t)},expression:"valueListDialogform.rostervalue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开始时间",prop:"enabletime"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.valueListDialogform.enabletime,callback:function(t){e.$set(e.valueListDialogform,"enabletime",t)},expression:"valueListDialogform.enabletime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"disabletime"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.valueListDialogform.disabletime,callback:function(t){e.$set(e.valueListDialogform,"disabletime",t)},expression:"valueListDialogform.disabletime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.valueListDialogform.remark,callback:function(t){e.$set(e.valueListDialogform,"remark",t)},expression:"valueListDialogform.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.valueListDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("valueListDialogform")}}},[e._v("保 存")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"值转换",visible:e.changeValueDialogVisible},on:{"update:visible":function(t){e.changeValueDialogVisible=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.changeValueTableData,"highlight-current-row":""},on:{"current-change":e.handleCurrentChangeValueTable}},[a("el-table-column",{attrs:{prop:"rosterdesc",label:"名单名称",align:"left",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"datatype",label:"名单数据类型",align:"left",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rostertype",label:"名单类型",align:"left",width:"200"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.changeValueDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.constrast}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},we=a("/Xao")(Fe,De,!1,null,null,null).exports,xe=a("kfHR"),Se=a.n(xe),ke=a("zsLt"),Ce=a.n(ke),$e={computed:{allPick:function(){var e=this.allDataList.map(function(e){return e.code_key}),t=new Ce.a(this.selectedRows);return 0===new Ce.a(e.filter(function(e){return!t.has(e)})).size},selectDisabled:function(){return this.disabled},selectCollapseTags:function(){return this.collapseTags}},data:function(){return{allDataList:[],selectedCached:[],selectedRows:[]}},props:{dataList:{type:Array,default:function(){return[]}},selectedList:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},collapseTags:{type:Boolean,default:!0}},mounted:function(){this.$nextTick(function(){this.allDataList=this.dataList,this.selectedRows=this.selectedList})},watch:{selectedRows:function(){this.value=this.selectedRows;var e=this.selectedRows.filter(function(e){return"&ALLPICK&"!==e});this.$emit("dataChange",e)},selectedList:function(){this.selectedRows=this.selectedList},dataList:function(){this.allDataList=this.dataList}},methods:{setRows:function(e){this.selectedRows=e},selectChange:function(e){var t=new Ce.a(this.selectedCached),a=new Ce.a(this.selectedRows),l=new Ce.a(this.selectedCached.filter(function(e){return!a.has(e)}));l.size>0&&(l.has("&ALLPICK&")?this.selectedRows=[]:this.selectedRows=this.selectedRows.filter(function(e){return"&ALLPICK&"!==e})),(l=new Ce.a(this.selectedRows.filter(function(e){return!t.has(e)}))).size>0&&(l.has("&ALLPICK&")?(this.selectedRows=[],this.selectedRows=this.allDataList.map(function(e){return e.code_key}),this.selectedRows.push("&ALLPICK&")):this.allPick&&this.selectedRows.push("&ALLPICK&")),this.selectedCached=[];var i=new Ce.a(this.selectedRows),o=[];i.has("&ALLPICK&")&&(o.push("&ALLPICK&"),i.delete("&ALLPICK&"),o=o.concat(Se()(i)),this.selectedRows=o),$()(this.selectedCached,this.selectedRows)}}},Ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{staticClass:"query-form-item",attrs:{placeholder:"请选择",multiple:"","collapse-tags":e.selectCollapseTags,disabled:e.selectDisabled},on:{change:e.selectChange},model:{value:e.selectedRows,callback:function(t){e.selectedRows=t},expression:"selectedRows"}},[a("el-option",{key:"&ALLPICK&",attrs:{label:"全选",value:"&ALLPICK&"}}),e._v(" "),e._l(e.allDataList,function(e){return a("el-option",{key:e.code_key,attrs:{label:e.code_value,value:e.code_key}})})],2)},staticRenderFns:[]},Le=a("/Xao")($e,Ie,!1,function(e){a("k2ED")},null,null).exports,Te={create:function(){},computed:{selectedList:function(){var e=this.tranDefForm.tab_disposal;return e&&""!==e.trim()?e.split(","):[]},txnIdVisible:function(){return"1"!==this.tranDefForm.txn_type},channVisible:function(){var e=this.tranDefForm.par_chann;return!(null===e||""===e||void 0===e)},modelusedVisible:function(){return"add"===this.tranDefForm.op},formReadonly:function(){return"T"===this.tranDefForm.tab_name||""===this.tranDefForm.tab_name&&""===this.tranDefForm.op}},data:function(){var e=this;return{tabDisposalList:[],tabDisposalSelectedCached:[],modelUsedList:[{label:"不使用模型",value:"0"},{label:"模型学习期",value:"1"}],channelList:[{channelname:"全渠道",channelid:"0"}],tranDefForm:{parent_tab:"",tab_name:"",modelused_o:"",traindate:"",op:"",tab_desc:"",show_order:"",txn_type:"0",txnid:"",tab_disposal:"",chann:"",par_chann:"",txnffname:"",modelused:"",is_enable:"1"},formLabelWidth:"120px",rules:{txnid:[{max:20,message:"交易识别标识不能超过20个字符",trigger:"blur"},{validator:te.checkFormEnSpecialCharacter,trigger:"blur"},{validator:function(t,a,l){var i=e;if(""===a.trim()&&"1"===i.tranDefForm.txn_type)return l(new Error("当交易类型为交易时,交易识别标识不能为空"));l()},trigger:"blur"}],chann:[{validator:function(t,a,l){var i=e;if(""===a.trim()&&"1"===i.tranDefForm.txn_type)return l(new Error("当交易类型为交易时,渠道不能为空"));l()},trigger:"blur"}],disposal:[{required:!0,message:"请选择处置策略",trigger:"blur"}],tab_desc:[{required:!0,message:"请输入名称",trigger:"blur"},{max:32,message:"交易识别标识不能超过32个字符",trigger:"blur"},{validator:te.checkFormZhSpecialCharacter,trigger:"blur"}],show_order:[{required:!0,message:"请输入顺序",trigger:"blur"},{type:"number",max:9999,min:0,message:"顺序必须为小于5位数的正整数",trigger:"blur"}]}}},watch:{tranDefForm:{handler:function(e){"0"===e.txn_type&&(e.txnid="")},deep:!0}},methods:{addStatParamDataChange:function(e){this.tranDefForm.tab_disposal=e.join(",")}},components:{AllPickSelect:Le}},Ve={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"tranDefForm",staticStyle:{"text-align":"left","padding-right":"5em"},attrs:{model:e.tranDefForm,rules:e.rules,"label-suffix":"：","label-width":e.formLabelWidth}},[a("el-form-item",{staticClass:"hidden",attrs:{label:"",prop:"parent_tab"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.tranDefForm.parent_tab,callback:function(t){e.$set(e.tranDefForm,"parent_tab",t)},expression:"tranDefForm.parent_tab"}})],1),e._v(" "),a("el-form-item",{staticClass:"hidden",attrs:{label:"",prop:"tab_name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.tranDefForm.tab_name,callback:function(t){e.$set(e.tranDefForm,"tab_name",t)},expression:"tranDefForm.tab_name"}})],1),e._v(" "),a("el-form-item",{staticClass:"hidden",attrs:{label:"",prop:"modelused_o"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.tranDefForm.modelused_o,callback:function(t){e.$set(e.tranDefForm,"modelused_o",t)},expression:"tranDefForm.modelused_o"}})],1),e._v(" "),a("el-form-item",{staticClass:"hidden",attrs:{label:"",prop:"traindate"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.tranDefForm.traindate,callback:function(t){e.$set(e.tranDefForm,"traindate",t)},expression:"tranDefForm.traindate"}})],1),e._v(" "),a("el-form-item",{staticClass:"hidden",attrs:{label:"",prop:"op"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.tranDefForm.op,callback:function(t){e.$set(e.tranDefForm,"op",t)},expression:"tranDefForm.op"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称",prop:"tab_desc"}},[a("el-input",{attrs:{"auto-complete":"off",readonly:e.formReadonly},model:{value:e.tranDefForm.tab_desc,callback:function(t){e.$set(e.tranDefForm,"tab_desc",t)},expression:"tranDefForm.tab_desc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"顺序",prop:"show_order"}},[a("el-input",{attrs:{"auto-complete":"off",readonly:e.formReadonly},model:{value:e.tranDefForm.show_order,callback:function(t){e.$set(e.tranDefForm,"show_order",e._n(t))},expression:"tranDefForm.show_order"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"交易类型"}},[a("el-radio",{attrs:{label:"0",disabled:e.formReadonly},model:{value:e.tranDefForm.txn_type,callback:function(t){e.$set(e.tranDefForm,"txn_type",t)},expression:"tranDefForm.txn_type"}},[e._v("交易组")]),e._v(" "),a("el-radio",{attrs:{label:"1",disabled:e.formReadonly},model:{value:e.tranDefForm.txn_type,callback:function(t){e.$set(e.tranDefForm,"txn_type",t)},expression:"tranDefForm.txn_type"}},[e._v("交易")])],1),e._v(" "),a("el-form-item",{class:{hidden:e.txnIdVisible},attrs:{label:"交易识别标识",prop:"txnid"}},[a("el-input",{attrs:{"auto-complete":"off",readonly:e.formReadonly},model:{value:e.tranDefForm.txnid,callback:function(t){e.$set(e.tranDefForm,"txnid",t)},expression:"tranDefForm.txnid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"处置策略:","label-width":e.formLabelWidth,prop:"tab_disposal"}},[a("AllPickSelect",{attrs:{dataList:e.tabDisposalList,selectedList:e.selectedList,disabled:e.formReadonly},on:{dataChange:e.addStatParamDataChange}})],1),e._v(" "),a("el-form-item",{attrs:{label:"渠道名称",prop:"chann"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:e.formReadonly||e.channVisible},model:{value:e.tranDefForm.chann,callback:function(t){e.$set(e.tranDefForm,"chann",t)},expression:"tranDefForm.chann"}},e._l(e.channelList,function(e){return a("el-option",{key:e.channelid,attrs:{label:e.channelname,value:e.channelid}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"上级交易",prop:"txnffname"}},[a("el-input",{attrs:{"auto-complete":"off",readonly:"readonly"},model:{value:e.tranDefForm.txnffname,callback:function(t){e.$set(e.tranDefForm,"txnffname",t)},expression:"tranDefForm.txnffname"}})],1),e._v(" "),a("el-form-item",{class:{hidden:e.modelusedVisible},attrs:{label:"模型状态",prop:"modelused"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:e.formReadonly},model:{value:e.tranDefForm.modelused,callback:function(t){e.$set(e.tranDefForm,"modelused",t)},expression:"tranDefForm.modelused"}},e._l(e.modelUsedList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"有效性"}},[a("el-radio",{attrs:{label:"1",disabled:e.formReadonly},model:{value:e.tranDefForm.is_enable,callback:function(t){e.$set(e.tranDefForm,"is_enable",t)},expression:"tranDefForm.is_enable"}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:"0",disabled:e.formReadonly},model:{value:e.tranDefForm.is_enable,callback:function(t){e.$set(e.tranDefForm,"is_enable",t)},expression:"tranDefForm.is_enable"}},[e._v("停用")])],1)],1)],1)},staticRenderFns:[]},Pe=null,Re={create:function(){},computed:{txnIdParent:function(){return this.txnId},isVisibilityParent:function(){return this.isVisibility}},data:function(){return{formLabelWidth:"120px",editVisible:!0,addFormVisible:!1,rules:{a:""}}},props:["txnId","isVisibility"],mounted:function(){this.$nextTick(function(){Pe=this})},watch:{txnId:{handler:function(e,t){!0===Pe.isVisibilityParent&&Pe.initForm()}},isVisibility:{handler:function(e,t){!0===Pe.isVisibilityParent&&Pe.initForm()}}},methods:{initForm:function(){var e=this;if(e.$refs.infoForm.$refs.tranDefForm.clearValidate(),""!==e.txnId){var t={url:"/trandef/edit_prepare",param:{tab_name:e.txnId},success:function(t){var a=t.infos;a.tab_name&&""!==a.tab_name&&"T"!==a.tab_name?e.editVisible=!1:e.editVisible=!0;var l="0";""!==a.txnid&&void 0!==a.txnid&&(l="1"),e.$refs.infoForm.tranDefForm={parent_tab:a.parent_tab,tab_name:a.tab_name,modelused_o:a.modelused,traindate:a.traindate,op:"mod",tab_desc:a.tab_desc,show_order:a.show_order,txn_type:l,txnid:a.txnid,tab_disposal:a.tab_disposal,chann:a.chann,par_chann:a.par_chann,txnffname:a.par_tab_desc,modelused:a.modelused,is_enable:a.is_enable+""},e.$refs.infoForm.channelList=t.channs,e.getDisposal(t.infos.parent_tab,"infoForm")}};G.post(t)}},resetValidate:function(){this.$refs.addForm.$refs.tranDefForm.clearValidate()},resetForm:function(){var e=this,t=e.$refs.infoForm.tranDefForm,a=window.setInterval(function(){if(e.$refs.addForm){window.clearInterval(a);var l=t.chann?t.chann:"";e.$refs.addForm.channelList=e.$refs.infoForm.channelList,e.getDisposal(t.tab_name,"addForm"),e.$refs.addForm.tranDefForm={parent_tab:t.tab_name,tab_name:"",modelused_o:"",traindate:"",op:"add",tab_desc:"",show_order:"0",txn_type:"0",txnid:"",tab_disposal:"",chann:l,par_chann:l,txnffname:t.tab_desc,modelused:"0",is_enable:"0"}}},100)},getDisposal:function(e,t){var a=this,l={url:"/rule/disposal",param:{txn_id:e},success:function(e){var l=[],i=e.row;for(var o in i){var r={code_key:i[o].dp_code,code_value:i[o].dp_name};l.push(r)}a.$refs[t].tabDisposalList=l}};G.post(l)},submitForm:function(e){var t=this,a={url:"/trandef/save",param:"add"===e?t.$refs.addForm.tranDefForm:t.$refs.infoForm.tranDefForm,success:function(a){a.success&&("add"===e?(t.$message("添加成功"),t.addFormVisible=!1):t.$message("修改成功"),t.reloadPage())}};G.post(a)},delInfo:function(e){var t=this,a=this;this.$confirm("确定要删除交易吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={url:"/trandef/save",param:e,success:function(e){e.success&&(a.$message("删除交易成功"),a.reloadPage())}};G.post(t)}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},reloadPage:function(){window.location.reload()}},components:{TrandefForm:a("/Xao")(Te,Ve,!1,function(e){a("rSw5")},null,null).exports}},ze={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("trandefForm",{ref:"infoForm"}),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary",disabled:e.editVisible},on:{click:function(t){e.submitForm("edit")}}},[e._v("保存")])],1),e._v(" "),a("el-dialog",{attrs:{title:"新建交易",visible:e.addFormVisible},on:{"update:visible":function(t){e.addFormVisible=t},open:e.resetForm,close:e.resetValidate}},[a("trandefForm",{ref:"addForm"}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("add")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},Ne=a("/Xao")(Re,ze,!1,function(e){a("kirL")},null,null).exports,qe=null,Be={create:function(){},computed:{txnIdParent:function(){return this.txnId},isVisibilityParent:function(){return this.isVisibility},tmTableData:function(){var e=this.expendNodeKey,t=this.tranModelList,a=[];for(var l in t)for(var i in t[l])if(t[l][i].length>0){var o=i.split("____");if(o&&2===o.length){if(a.push({tab_name:o[0],name:o[1],group_type:"group"}),-1===e.indexOf(i))break;for(var r in t[l][i]){var n=t[l][i][r];n.group_type="item",a.push(n)}}}return a},tmFdNameList:function(){var e=this.tmForm.type,t=this.enableStoreFd,a=this.dataTypeClassify,l=[];if(e&&t)for(var i in t){var o=t[i];for(var r in a){var n=a[r];-1!==n.type.indexOf(e)&&("long"===n.recap||"decimal"===n.recap?("double"!==e&&"long"!==e&&o.type===e&&l.push(o),"double"!==o.type&&"long"!==o.type||l.push(o)):"string"===n.recap&&"string"!==e&&o.type===e&&l.push(o),"string"===o.type&&l.push(o))}}return l}},props:["txnId","isVisibility"],data:function(){return{toggleIcon:["el-icon-arrow-up","el-icon-arrow-down"],tranModelList:[],expendNodeKey:[],tmTitle:"",tmDialogVisible:!1,tmForm:{},tmTypeList:[],allStoreFd:[],enableStoreFd:[],tmCodeList:[],refTab:[],refFd:[],canRefTab:[],canRefTabFd:[],func:[],funcParam:[],tmGenesisRulList:[],refTableData:[],dataTypeClassify:[{recap:"long",type:["long","time","datetime"]},{recap:"decimal",type:["double","money"]},{recap:"string",type:["string","devid","ip","userid","acc","code"]}],formLabelWidth:"120px"}},mounted:function(){this.$nextTick(function(){qe=this})},watch:{txnId:{handler:function(e,t){!0===qe.isVisibilityParent&&qe.initForm()}},isVisibility:{handler:function(e,t){!0===qe.isVisibilityParent&&qe.initForm()}}},methods:{initForm:function(){var e=this;G.post({url:"/tranmdl/query",param:{tab_name:e.txnId},success:function(t){var a=t.txnfds;if(a){e.tranModelList=a;var l=[];for(var i in a)for(var o in a[i])l.push(o);e.expendNodeKey=l,e.refTab=t.txn_ref_tab,e.refFd=t.txn_ref_fds,e.enableStoreFd=t.enablestorefd,e.allStoreFd=t.allstorefd}G.post({url:"/tranmdl/queryOf",param:{tab_name:e.txnId},success:function(t){e.tmCodeList=t.sourcetype,e.canRefTab=t.canreftable,e.canRefTabFd=t.reftblfd,e.func=t.func,e.funcParam=t.funcparam}})}})},groupHandle:function(e){var t=e.row,a=(e.column,e.rowIndex,e.columnIndex);if("group"===t.group_type)switch(a){case 1:return[1,9];default:return[0,0]}},groupClassName:function(e){var t=e.row;e.rowIndex;return"group"===t.group_type?"groupStyle":""},groupIcon:function(e){if("group"!==e.group_type)return"";var t=this.expendNodeKey,a=e.tab_name+"____"+e.name;return t.indexOf(a)>-1?this.toggleIcon[0]:this.toggleIcon[1]},toggleListHandle:function(e,t){if("group"===e.group_type){var a=t.path,l=null;for(var i in a)"cell"===a[i].className&&(l=a[i]);var o=e.tab_name+"____"+e.name,r=this.expendNodeKey,n=l.getElementsByTagName("i");"el-icon-arrow-up"===n[0].getAttribute("class")?r.indexOf(o)>-1&&r.splice(r.indexOf(o),1):"el-icon-arrow-down"===n[0].getAttribute("class")&&r.push(o),this.expendNodeKey=r}},formatterCode:function(e,t){if(void 0===e.code||null===e.code||""===e.code)return"";var a=this.enableStoreFd;for(var l in a)if(a[l].category_id===e.code)return a[l].category_name;return e.code},openTmDialog:function(){this.tmTypeList=se.getCodeItems("tms.model.datatype")},getTmFdNameList:function(e){var t=this;G.post({url:"/tranmdl/queryAvailableStoreFd",param:{tab_name:e||t.txnId},success:function(e){t.enableStoreFd=e.enableStoreFd}})},tmAddFunc:function(){this.tmTitle="新建交易模型",this.tmDialogVisible=!0,this.tmFormReadOnly=!1},tmEditFunc:function(){this.tmTitle="编辑交易模型",this.tmDialogVisible=!0,this.tmFormReadOnly=!1},tmDelFunc:function(){console.info("删除交易模型")},tmInfoFunc:function(){this.tmTitle="交易模型信息",this.tmDialogVisible=!0,this.tmFormReadOnly=!0}}},Ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",{staticStyle:{border:"1px solid #eee"}},[a("el-header",{staticClass:"table-header",attrs:{height:"30px"}},[a("div",[e._v("交易模型")])]),e._v(" "),a("el-main",{staticStyle:{padding:"0px"}},[a("div",{staticStyle:{"padding-left":"10px","text-align":"left","border-bottom":"1px solid #eee"}},[a("el-button",{staticClass:"el-icon-plus",attrs:{type:"text"},on:{click:e.tmAddFunc}},[e._v("新建")]),e._v(" "),a("el-button",{staticClass:"el-icon-edit",attrs:{type:"text"},on:{click:e.tmEditFunc}},[e._v("编辑")]),e._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{type:"text"},on:{click:e.tmDelFunc}},[e._v("删除")]),e._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"text"},on:{click:e.tmInfoFunc}},[e._v("查看")])],1),e._v(" "),a("el-table",{ref:"tmTable",staticStyle:{width:"100%"},attrs:{data:e.tmTableData,"span-method":e.groupHandle,"row-class-name":e.groupClassName,"max-height":"430"},on:{"row-dblclick":e.toggleListHandle}},[a("el-table-column",{attrs:{type:"selection",width:"35",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:"属性名称",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return["group"===t.row.group_type?a("i",{class:e.groupIcon(t.row)}):e._e(),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"属性代码",prop:"ref_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"数据来源",prop:"src_id"}}),e._v(" "),a("el-table-column",{attrs:{label:"类型",prop:"type"}}),e._v(" "),a("el-table-column",{attrs:{label:"存储字段",prop:"fd_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"关联代码集",prop:"code",formatter:e.formatterCode}}),e._v(" "),a("el-table-column",{attrs:{label:"默认值",prop:"src_default"}}),e._v(" "),a("el-table-column",{attrs:{label:"处理函数",prop:"genesisrul"}})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.tmTitle,visible:e.tmDialogVisible},on:{"update:visible":function(t){e.tmDialogVisible=t},open:e.openTmDialog}},[a("el-form",{staticStyle:{"text-align":"left"},attrs:{model:e.tmForm}},[a("el-form-item",{attrs:{label:"交易名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.tmForm.tab_name,callback:function(t){e.$set(e.tmForm,"tab_name",t)},expression:"tmForm.tab_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"属性名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.tmForm.name,callback:function(t){e.$set(e.tmForm,"name",t)},expression:"tmForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"属性代码","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.tmForm.ref_name,callback:function(t){e.$set(e.tmForm,"ref_name",t)},expression:"tmForm.ref_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据来源","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.tmForm.src_id,callback:function(t){e.$set(e.tmForm,"src_id",t)},expression:"tmForm.src_id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.tmForm.type,callback:function(t){e.$set(e.tmForm,"type",t)},expression:"tmForm.type"}},e._l(e.tmTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"存储字段","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.tmForm.fd_name,callback:function(t){e.$set(e.tmForm,"fd_name",t)},expression:"tmForm.fd_name"}},e._l(e.tmFdNameList,function(e){return a("el-option",{key:e.fd_name,attrs:{label:e.fd_name,value:e.fd_name}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"关联代码集","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.tmForm.code,callback:function(t){e.$set(e.tmForm,"code",t)},expression:"tmForm.code"}},e._l(e.tmCodeList,function(e){return a("el-option",{key:e.category_id,attrs:{label:e.category_name,value:e.category_id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"默认值","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.tmForm.src_default,callback:function(t){e.$set(e.tmForm,"src_default",t)},expression:"tmForm.src_default"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"处理函数","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.tmForm.genesisrul,callback:function(t){e.$set(e.tmForm,"genesisrul",t)},expression:"tmForm.genesisrul"}},e._l(e.tmGenesisRulList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.tmDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.tmDialogVisible=!1}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-container",{staticStyle:{border:"1px solid #eee"}},[a("el-header",{staticClass:"table-header",attrs:{height:"30px"}},[a("div",[e._v("交易模型引用")])]),e._v(" "),a("el-main",{staticStyle:{padding:"0px"}},[a("div",{staticStyle:{"padding-left":"10px","text-align":"left","border-bottom":"1px solid #eee"}},[a("el-button",{staticClass:"el-icon-plus",attrs:{type:"text"},on:{click:function(e){}}},[e._v("新建引用表")]),e._v(" "),a("el-button",{staticClass:"el-icon-edit",attrs:{type:"text"},on:{click:function(e){}}},[e._v("编辑引用表")]),e._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{type:"text"},on:{click:function(e){}}},[e._v("删除引用表")]),e._v(" "),a("el-button",{staticClass:"el-icon-plus",attrs:{type:"text"},on:{click:function(e){}}},[e._v("新建行字段")]),e._v(" "),a("el-button",{staticClass:"el-icon-edit",attrs:{type:"text"},on:{click:function(e){}}},[e._v("编辑行字段")]),e._v(" "),a("el-button",{staticClass:"el-icon-delete",attrs:{type:"text"},on:{click:function(e){}}},[e._v("删除行字段")]),e._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"text"},on:{click:function(e){}}},[e._v("查询引用表")])],1),e._v(" "),a("el-table",{ref:"refTable",staticStyle:{width:"100%"},attrs:{data:e.refTableData,"span-method":e.groupHandle,"row-class-name":e.groupClassName,"max-height":"430"},on:{"row-dblclick":e.toggleListHandle}},[a("el-table-column",{attrs:{type:"selection",width:"35",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:"属性名称",prop:"ref_desc"},scopedSlots:e._u([{key:"default",fn:function(t){return["group"===t.row.group_type?a("i",{class:e.groupIcon(t.row)}):e._e(),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.ref_desc))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"属性代码",prop:"ref_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"数据来源",prop:"ref_fd_name"}}),e._v(" "),a("el-table-column",{attrs:{label:"条件",prop:"src_cond_in"}}),e._v(" "),a("el-table-column",{attrs:{label:"表达式",prop:"src_expr_in"}}),e._v(" "),a("el-table-column",{attrs:{label:"存储字段",prop:"storecolumn"}}),e._v(" "),a("el-table-column",{attrs:{label:"所属节点",prop:"tab_desc"}})],1)],1)],1)],1)},staticRenderFns:[]},Ae=a("/Xao")(Be,Ee,!1,function(e){a("K2ri")},null,null).exports,We={computed:{txnIdParent:function(){return this.txnId}},data:function(){return{firstOpen:!0,statCondInDialogVisible:!1,formItemStyle:{width:"330px"},formItemContentStyle:{width:"200px"},textareaContentStyle:{width:"540px"},formLabelWidth:"120px",statFnDialogVisible:!1,selectArea:[0,0],statCondInDictDialogForm:this.initStatCondInDictDialogForm(),treeData:[],defaultProps:{children:"children",label:"text"},itemShow:{stat_datafd:!0,stat_fn:!0,date_func:!0,str_func:!0,oper_func:!0,roster_func:!0,diy_func:!0,rule_func:!0,ac_func:!0},expendKey:["T"],statDatafdList:[],dateFuncList:[],strFuncList:[],operFuncList:[],rosterFuncList:[],diyFuncList:[],ruleFuncList:[],acFuncList:[],allSelectData:new Ce.a}},props:{statCond:{type:String,default:""},statCondIn:{type:String,default:""},txnId:{type:String,default:""},hideItems:{type:Array,default:function(){return[]}}},watch:{"statCondInDictDialogForm.stat_cond_value":function(e){this.searchCondName(e,1)},"statCondInDictDialogForm.stat_cond_in":function(e){this.searchCondName(e,2)}},mounted:function(){this.$nextTick(function(){this.statCondInDictDialogForm.stat_cond_value=this.statCond,this.statCondInDictDialogForm.stat_cond_in=this.statCondIn;var e=this.hideItems,t=!0,a=!1,l=void 0;try{for(var i,o=R()(e);!(t=(i=o.next()).done);t=!0){var r=i.value;this.itemShow[r]=!1}}catch(e){a=!0,l=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw l}}})},methods:{getSelectedPostion:function(e){var t=[0,0],a=e;if("number"==typeof a.selectionStart)t=[a.selectionStart,a.selectionEnd];else if(document.selection){var l=0,i=0,o=document.selection.createRange();if(o.parentElement()==a){for((n=document.body.createTextRange()).moveToElementText(a),l=0;n.compareEndPoints("StartToStart",o)<0;l++)n.moveStart("character",1);for(var r=0;r<=l;r++)"\n"==a.value.charAt(r)&&l++;var n;for((n=document.body.createTextRange()).moveToElementText(a),i=0;n.compareEndPoints("StartToEnd",o)<0;i++)n.moveStart("character",1);for(var s=0;s<=i;s++)"\n"==a.value.charAt(s)&&i++}t=[l,i]}this.selectArea=t},selectChange:function(e){this.selectChangeCommon(e)},selectChangeAddBracket:function(e){this.selectChangeCommon(e+"()")},selectChangeCommon:function(e){var t=this,a=this.statCondInDictDialogForm.stat_cond_value,l=this.selectArea,i=[a.substr(0,l[0]),e,a.substr(l[1])];this.statCondInDictDialogForm=this.initStatCondInDictDialogForm(),this.statCondInDictDialogForm.stat_cond_value=i.join(""),setTimeout(function(){var e=t.$refs.statCondValue.$refs.textarea;e.focus(),t.getSelectedPostion(e)},300)},initStatCondInDictDialogForm:function(){return{stat_datafd:"",stat_fn:"",date_func:"",str_func:"",oper_func:"",roster_func:"",diy_func:"",rule_func:"",ac_func:"",stat_cond_value:"",stat_cond_in:""}},initData:function(){this.selTree(),this.getStatDataFdSelectData(),this.getRuleFuncList(),this.getCodeData("operFuncList","tms.pub.func","3",!0),this.getCodeData("diyFuncList","tms.pub.func","1"),this.getCodeData("acFuncList","tms.pub.func","7"),this.getCodeData("dateFuncList","tms.pub.func","4"),this.getCodeData("strFuncList","tms.pub.func","5"),this.getCodeData("rosterFuncList","tms.pub.roster");var e=this;setTimeout(function(){e.searchCondName(e.statCondInDictDialogForm.stat_cond_value,1)},500)},reloadData:function(){this.getStatDataFdSelectData(),this.getRuleFuncList()},getStatDataFdSelectData:function(){var e=this;G.post({url:"/stat/txnFeature",param:{txn_id:this.txnIdParent},success:function(t){if(t.row){e.statDatafdList=[];var a=!0,l=!1,i=void 0;try{for(var o,r=R()(t.row);!(a=(o=r.next()).done);a=!0){var n=o.value;e.allSelectData.add({code_key:n.code_key,code_value:n.code_value}),n.code_value=n.code_value+"("+n.code_key+")",e.statDatafdList.push(n)}}catch(e){l=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(l)throw i}}}}})},getRuleFuncList:function(){var e=this;G.post({url:"/stat/txnrulelist",param:{txn_id:this.txnIdParent},success:function(t){if(t.row){e.ruleFuncList=[];var a=!0,l=!1,i=void 0;try{for(var o,r=R()(t.row);!(a=(o=r.next()).done);a=!0){var n=o.value;e.allSelectData.add({code_key:n.code_key,code_value:n.code_value}),n.code_value=n.code_value+"("+n.code_key+")",e.ruleFuncList.push(n)}}catch(e){l=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(l)throw i}}}}})},getCodeData:function(e,t,a,l){var i=this,o={};o.category_id=t,a&&(o.args=a),G.post({url:"/stat/code",param:o,success:function(t){if(t.row){i[e]=[];var a=!0,o=!1,r=void 0;try{for(var n,s=R()(t.row);!(a=(n=s.next()).done);a=!0){var c=n.value;l||i.allSelectData.add({code_key:c.code_key,code_value:c.code_value}),c.code_value=c.code_value+"("+c.code_key+")",i[e].push(c)}}catch(e){o=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(o)throw r}}}}})},renderContent:function(e,t){var a=t.node;t.data,t.store;return 0===a.data.enable?e("span",{class:"el-tree-node__label disabledFlag"},[a.label]):e("span",{class:"el-tree-node__label"},[a.label])},selTree:function(){var e=this,t={url:"/stat/statfunc",success:function(t){if(t.row){e.treeList=t.row,e.treeData=e.formatTreeData(t.row);var a=!0,l=!1,i=void 0;try{for(var o,r=R()(t.row);!(a=(o=r.next()).done);a=!0){var n=o.value;2==n.ftype&&e.allSelectData.add({code_key:n.code_key,code_value:n.code_value})}}catch(e){l=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(l)throw i}}}}};G.post(t)},formatTreeData:function(e,t){function a(e,t){var l=[];for(var i in e){var o=e[i];o.fid===t&&(o.children=a(e,o.id),l.push(o))}return l}var l=[];if(void 0===t||0===t.length){t=[];for(var i in e)e[i].text=e[i].code_value+"("+e[i].code_key+")",void 0!==e[i].fid&&null!==e[i].fid&&""!==e[i].fid||t.push(e[i])}0===t.length&&(console.error("根节点不存在，请确认树结构是否正确"),console.info("树结构的根节点是fid不存在（或为空）的节点，否则需手动添加指定得根节点（参数）"));for(var o in t){var r=t[o];r.children=a(e,r.id),l.push(r)}return l},searchCondName:function(e,t){if(""===e||null==e)return this.statCondInDictDialogForm.stat_cond_value="",void(this.statCondInDictDialogForm.stat_cond_in="");var a="code_key",l="code_value";2===t&&(l="code_key",a="code_value");var i=e,o=!0,r=!1,n=void 0;try{for(var s,c=R()(this.allSelectData);!(o=(s=c.next()).done);o=!0){var u=s.value;u[a]&&(i=i.replace(new RegExp(j.escapeExprSpecialWord(u[a]),"g"),u[l]))}}catch(e){r=!0,n=e}finally{try{!o&&c.return&&c.return()}finally{if(r)throw n}}2===t?this.statCondInDictDialogForm.stat_cond_value=i:this.statCondInDictDialogForm.stat_cond_in=i},handleNodeClick:function(e,t){t.isLeaf&&this.selectChangeCommon(e.code_key)},closeDialog:function(){this.statCondInDialogVisible=!1},callback:function(){var e={stat_cond_value:this.statCondInDictDialogForm.stat_cond_value,stat_cond_in:this.statCondInDictDialogForm.stat_cond_in};this.$emit("valueCallback",e),this.statCondInDialogVisible=!1},reset:function(){this.statCondInDictDialogForm.stat_cond_value="",this.statCondInDictDialogForm.stat_cond_in=""},setValue:function(e){this.statCondInDictDialogForm.stat_cond_value=e.stat_cond_value,this.statCondInDictDialogForm.stat_cond_in=e.stat_cond_in},open:function(){if(this.firstOpen){var e=this;this.initData(),setTimeout(function(){var t=e.$refs.statCondValue.$refs.textarea;t.addEventListener("keydown",function(){e.getSelectedPostion(t)}),t.addEventListener("keyup",function(){e.getSelectedPostion(t)}),t.addEventListener("mousedown",function(){e.getSelectedPostion(t)}),t.addEventListener("mouseup",function(){e.getSelectedPostion(t)}),t.addEventListener("focus",function(){e.getSelectedPostion(t)})},300)}this.firstOpen=!1,this.statCondInDialogVisible=!0}}},Oe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{ref:"StatCondDialog",attrs:{title:"条件",visible:e.statCondInDialogVisible,width:"770px",modal:!1},on:{"update:visible":function(t){e.statCondInDialogVisible=t}}},[a("el-form",{ref:"statCondInDictDialogForm",staticStyle:{"text-align":"left"},attrs:{model:e.statCondInDictDialogForm,inline:!0}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.itemShow.stat_datafd,expression:"itemShow.stat_datafd"}],style:e.formItemStyle,attrs:{label:"交易属性:","label-width":e.formLabelWidth,prop:"stat_datafd"}},[a("el-select",{style:e.formItemContentStyle,attrs:{placeholder:"请选择",clearable:""},on:{change:e.selectChange},model:{value:e.statCondInDictDialogForm.stat_datafd,callback:function(t){e.$set(e.statCondInDictDialogForm,"stat_datafd",t)},expression:"statCondInDictDialogForm.stat_datafd"}},e._l(e.statDatafdList,function(e){return a("el-option",{key:e.code_key,attrs:{label:e.code_value,value:e.code_key}})}))],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.itemShow.stat_fn,expression:"itemShow.stat_fn"}],style:e.formItemStyle,attrs:{label:"交易统计:","label-width":e.formLabelWidth,prop:"stat_fn"}},[a("div",{on:{dblclick:function(t){e.statFnDialogVisible=!0}}},[a("el-input",{style:e.formItemContentStyle,attrs:{"auto-complete":"off",readonly:""},model:{value:e.statCondInDictDialogForm.stat_fn,callback:function(t){e.$set(e.statCondInDictDialogForm,"stat_fn",t)},expression:"statCondInDictDialogForm.stat_fn"}})],1)]),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.itemShow.date_func,expression:"itemShow.date_func"}],style:e.formItemStyle,attrs:{label:"日期函数:","label-width":e.formLabelWidth,prop:"date_func"}},[a("el-select",{style:e.formItemContentStyle,attrs:{placeholder:"请选择",clearable:""},on:{change:e.selectChangeAddBracket},model:{value:e.statCondInDictDialogForm.date_func,callback:function(t){e.$set(e.statCondInDictDialogForm,"date_func",t)},expression:"statCondInDictDialogForm.date_func"}},e._l(e.dateFuncList,function(e){return a("el-option",{key:e.code_key,attrs:{label:e.code_value,value:e.code_key}})}))],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.itemShow.str_func,expression:"itemShow.str_func"}],style:e.formItemStyle,attrs:{label:"字符函数:","label-width":e.formLabelWidth,prop:"str_func"}},[a("el-select",{style:e.formItemContentStyle,attrs:{placeholder:"请选择",clearable:""},on:{change:e.selectChangeAddBracket},model:{value:e.statCondInDictDialogForm.str_func,callback:function(t){e.$set(e.statCondInDictDialogForm,"str_func",t)},expression:"statCondInDictDialogForm.str_func"}},e._l(e.strFuncList,function(e){return a("el-option",{key:e.code_key,attrs:{label:e.code_value,value:e.code_key}})}))],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.itemShow.oper_func,expression:"itemShow.oper_func"}],style:e.formItemStyle,attrs:{label:"字符函数:","label-width":e.formLabelWidth,prop:"oper_func"}},[a("el-select",{style:e.formItemContentStyle,attrs:{placeholder:"请选择",clearable:""},on:{change:e.selectChange},model:{value:e.statCondInDictDialogForm.oper_func,callback:function(t){e.$set(e.statCondInDictDialogForm,"oper_func",t)},expression:"statCondInDictDialogForm.oper_func"}},e._l(e.operFuncList,function(e){return a("el-option",{key:e.code_key,attrs:{label:e.code_value,value:e.code_key}})}))],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.itemShow.roster_func,expression:"itemShow.roster_func"}],style:e.formItemStyle,attrs:{label:"名单:","label-width":e.formLabelWidth,prop:"roster_func"}},[a("el-select",{style:e.formItemContentStyle,attrs:{placeholder:"请选择",clearable:""},on:{change:e.selectChange},model:{value:e.statCondInDictDialogForm.roster_func,callback:function(t){e.$set(e.statCondInDictDialogForm,"roster_func",t)},expression:"statCondInDictDialogForm.roster_func"}},e._l(e.rosterFuncList,function(e){return a("el-option",{key:e.code_key,attrs:{label:e.code_value,value:e.code_key}})}))],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.itemShow.diy_func,expression:"itemShow.diy_func"}],style:e.formItemStyle,attrs:{label:"自定义函数:","label-width":e.formLabelWidth,prop:"diy_func"}},[a("el-select",{style:e.formItemContentStyle,attrs:{placeholder:"请选择",clearable:""},on:{change:e.selectChangeAddBracket},model:{value:e.statCondInDictDialogForm.diy_func,callback:function(t){e.$set(e.statCondInDictDialogForm,"diy_func",t)},expression:"statCondInDictDialogForm.diy_func"}},e._l(e.diyFuncList,function(e){return a("el-option",{key:e.code_key,attrs:{label:e.code_value,value:e.code_key}})}))],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.itemShow.rule_func,expression:"itemShow.rule_func"}],style:e.formItemStyle,attrs:{label:"交易规则:","label-width":e.formLabelWidth,prop:"rule_func"}},[a("el-select",{style:e.formItemContentStyle,attrs:{placeholder:"请选择",clearable:""},on:{change:e.selectChange},model:{value:e.statCondInDictDialogForm.rule_func,callback:function(t){e.$set(e.statCondInDictDialogForm,"rule_func",t)},expression:"statCondInDictDialogForm.rule_func"}},e._l(e.ruleFuncList,function(e){return a("el-option",{key:e.code_key,attrs:{label:e.code_value,value:e.code_key}})}))],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.itemShow.ac_func,expression:"itemShow.ac_func"}],style:e.formItemStyle,attrs:{label:"动作函数:","label-width":e.formLabelWidth,prop:"ac_func"}},[a("el-select",{style:e.formItemContentStyle,attrs:{placeholder:"请选择",clearable:""},on:{change:e.selectChangeAddBracket},model:{value:e.statCondInDictDialogForm.ac_func,callback:function(t){e.$set(e.statCondInDictDialogForm,"ac_func",t)},expression:"statCondInDictDialogForm.ac_func"}},e._l(e.acFuncList,function(e){return a("el-option",{key:e.code_key,attrs:{label:e.code_value,value:e.code_key}})}))],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"条件表达式:","label-width":e.formLabelWidth,prop:"stat_cond_value"}},[a("el-input",{ref:"statCondValue",style:e.textareaContentStyle,attrs:{type:"textarea"},model:{value:e.statCondInDictDialogForm.stat_cond_value,callback:function(t){e.$set(e.statCondInDictDialogForm,"stat_cond_value",t)},expression:"statCondInDictDialogForm.stat_cond_value"}})],1)],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"解释:","label-width":e.formLabelWidth,prop:"stat_cond_in"}},[a("el-input",{ref:"statCondIn",style:e.textareaContentStyle,attrs:{type:"textarea"},model:{value:e.statCondInDictDialogForm.stat_cond_in,callback:function(t){e.$set(e.statCondInDictDialogForm,"stat_cond_in",t)},expression:"statCondInDictDialogForm.stat_cond_in"}})],1)],1),e._v(" "),a("el-form-item",{style:e.formItemStyle,attrs:{label:" ","label-width":e.formLabelWidth}},[a("el-button",{attrs:{type:"primary"},on:{click:e.callback}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.reset}},[e._v("重 置")]),e._v(" "),a("el-button",{on:{click:e.closeDialog}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"交易统计",visible:e.statFnDialogVisible,width:"400px",modal:!1},on:{"update:visible":function(t){e.statFnDialogVisible=t}}},[a("el-tree",{ref:"tree",staticStyle:{"overflow-y":"auto"},attrs:{data:e.treeData,"node-key":"id",props:e.defaultProps,"highlight-current":!0,"default-expanded-keys":e.expendKey,"expand-on-click-node":!1,"render-content":e.renderContent},on:{"node-click":e.handleNodeClick}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.statFnDialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)},staticRenderFns:[]},Me=a("/Xao")(We,Oe,!1,function(e){a("pECu")},null,null).exports,je={computed:{defalutTimeValue:function(){var e=new Date;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),[e,e]}},data:function(){return{formItemContentStyle:{width:"180px"},dialogVisible:!1,paramsType:"",paramTypeReal:"",dateDataList:[],numDataList:[]}},props:{},mounted:function(){this.$nextTick(function(){})},watch:{},methods:{open:function(e,t){if(this.dialogVisible=!0,this.paramTypeReal=t,void 0===t||"datetime"!==t&&"time"!==t)if(this.paramsType="number",this.numDataList=[],e&&""!==e){var a=e.split("|"),l=!0,i=!1,o=void 0;try{for(var r,n=R()(a);!(l=(r=n.next()).done);l=!0){var s=r.value.split(",");this.numDataList.push(this.genNumberObj(s[0],s[1]))}}catch(e){i=!0,o=e}finally{try{!l&&n.return&&n.return()}finally{if(i)throw o}}}else this.numDataList.push(this.genNumberObj(null,null));else if(this.paramsType="date",this.dateDataList=[],e&&""!==e){var c=e.split("|"),u=!0,d=!1,m=void 0;try{for(var f,p=R()(c);!(u=(f=p.next()).done);u=!0){var h=f.value.split(","),g=this.str2Date(h[0]),b=this.str2Date(h[1]);this.dateDataList.push(this.genDateObj(g,b))}}catch(e){d=!0,m=e}finally{try{!u&&p.return&&p.return()}finally{if(d)throw m}}}else this.dateDataList.push(this.genDateObj(null,null))},callback:function(){if("date"===this.paramsType){for(var e=0;e<this.dateDataList.length;e++){var t=this.dateDataList[e];if(null!=t.dateArray){var a=t.dateArray[0],l=t.dateArray[1];if(a>=l)return void this.$message("第"+(e+1)+"行，开始时间必须小于结束时间");for(var i=0;i<e;i++){var o=this.dateDataList[i];if(null!=o.dateArray){var r=o.dateArray[0],n=o.dateArray[1];if(console.log(r.toLocaleString(),n.toLocaleString(),a.toLocaleString(),l.toLocaleString()),!(r<=a&&n<=a||r>=l&&n>=l))return void this.$message("第"+(e+1)+"行，时间区间与第"+(i+1)+"重复")}}}}for(var s=[],c=0;c<this.dateDataList.length;c++){var u=this.dateDataList[c];if(null!=u.dateArray){var d=this.formatDate(u.dateArray[0]),m=this.formatDate(u.dateArray[1]);s.push(d+","+m)}}this.$emit("valueCallback",s.join("|")),this.dialogVisible=!1}else{for(var f=0;f<this.numDataList.length;f++){var p=this.numDataList[f];if(null!=p.numberArray){var h=p.numberArray[0],g=p.numberArray[1],b=this.checkNum(h,f,!0);if(""!==b)return void this.$message(b);var v=this.checkNum(g,f,!1);if(""!==v)return void this.$message(v);var _=""===h?0:parseFloat(h);if(_>=(""===g?0:parseFloat(g)))return void this.$message("第("+(parseInt(f)+1)+")行：结束值必须大于开始值");if(f>0){var y=this.numDataList[f-1];if(null!=y.numberArray){var F=y.numberArray[1];if(_<(""===F?0:parseFloat(F)))return void this.$message("第("+(parseInt(f)+1)+")行：开始值不能小于上一行的结束值")}}}}for(var D=[],w=0;w<this.numDataList.length;w++){var x=this.numDataList[w];if(null!=x.numberArray){var S=x.numberArray[0],k=x.numberArray[1];D.push(S+","+k)}}this.$emit("valueCallback",D.join("|")),this.dialogVisible=!1}},str2Date:function(e){var t=e.split(":"),a=new Date;return a.setHours(t[0]),a.setMinutes(t[1]),a.setSeconds(t[2]),a},genDateObj:function(e,t){var a=Math.round(1e8*Math.random());return null!=e&&null!=t?{dateArray:[e,t],id:a}:{dateArray:null,id:a}},genNumberObj:function(e,t){var a=Math.round(1e8*Math.random());return null!=e&&null!=t?{numberArray:[e,t],id:a}:{numberArray:["",""],id:a}},delRow:function(e){"date"===this.paramsType?this.dateDataList.splice(this.dateDataList.findIndex(function(t){return t.id===e.id}),1):this.numDataList.splice(this.numDataList.findIndex(function(t){return t.id===e.id}),1)},addRow:function(){"date"===this.paramsType?this.dateDataList.push(this.genDateObj(null,null)):this.numDataList.push(this.genNumberObj(null,null))},formatDate:function(e){return e.getHours().toString()+":"+e.getMinutes().toString()+":"+e.getSeconds().toString()},checkNum:function(e,t,a){if(""===e&&(e="0"),"double"===this.paramTypeReal||"money"===this.paramTypeReal){if(""!==e&&!j.isNumber(e,"+",2))return"第("+(parseInt(t)+1)+")行："+(a?"开始值":"结束值")+"请输入非负小数（保留两位小数）或非负整数";if(e.length>15)return"第("+(parseInt(t)+1)+")行："+(a?"开始值":"结束值")+"不能超过15个字符"}else if("long"===this.paramTypeReal){if(""!==e&&!j.isNumber(e,"+","0"))return"第("+(parseInt(t)+1)+")行："+(a?"开始值":"结束值")+"请输入非负整数";if(e.length>15)return"第("+(parseInt(t)+1)+")行："+(a?"开始值":"结束值")+"不能超过15个字符"}return""}}},Ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{ref:"StatCondDialog",attrs:{title:"参数配置",visible:e.dialogVisible,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},["date"===e.paramsType?a("div",e._l(e.dateDataList,function(t,l){return a("div",{staticClass:"fn-param-item"},[a("el-time-picker",{attrs:{"is-range":"","default-value":e.defalutTimeValue,"range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:t.dateArray,callback:function(a){e.$set(t,"dateArray",a)},expression:"item.dateArray"}}),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){e.delRow(t)}}},[e._v("删 除")])],1)})):e._e(),e._v(" "),"number"===e.paramsType?a("div",["number"===e.paramsType?a("div",{staticClass:"fn-param-item"},[a("el-form",{staticStyle:{"text-align":"left"},attrs:{inline:!0}},e._l(e.numDataList,function(t,l){return a("div",{staticClass:"fn-param-item"},[a("el-input",{style:e.formItemContentStyle,attrs:{"auto-complete":"off"},model:{value:t.numberArray[0],callback:function(a){e.$set(t.numberArray,0,a)},expression:"item.numberArray[0]"}}),e._v("\n          -\n          "),a("el-input",{style:e.formItemContentStyle,attrs:{"auto-complete":"off"},model:{value:t.numberArray[1],callback:function(a){e.$set(t.numberArray,1,a)},expression:"item.numberArray[1]"}}),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){e.delRow(t)}}},[e._v("删 除")])],1)}))],1):e._e()]):e._e(),e._v(" "),a("div",{staticStyle:{"margin-top":"15px","text-align":"left"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.callback}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:e.addRow}},[e._v("增 加")])],1)])],1)},staticRenderFns:[]},Ke=null,Xe=[{recap:"long",type:["long","time","datetime"]},{recap:"double",type:["double","money"]},{recap:"string",type:["string","devid","ip","userid","acc","code","object"]}],Ge={computed:{txnIdParent:function(){return this.txnId},isVisibilityParent:function(){return this.isVisibility},notSelectOne:function(){return 1!==this.selectedRows.length},formStatCondInName:function(){return"calculat_expressions"===this.dialogForm.stat_fn?"表达式:":"统计条件:"},StatCondInRequired:function(){return"calculat_expressions"===this.dialogForm.stat_fn},tableDataShow:function(){var e=this.queryShowForm.stat_name,t=this.queryShowForm.stat_desc,a=this.queryShowForm.stat_param,l=this.queryShowForm.stat_datafd,i=this.queryShowForm.stat_fn,o=this.queryShowForm.stat_valid;return this.tableData.filter(function(r){if(""!==e&&!r.stat_name.includes(e))return!1;if(""!==t&&!r.stat_desc.includes(t))return!1;if(null!=a&&a.length>0){for(var n=!1,s=0;s<a.length;s++)if(r.stat_param===a[s]){n=!0;break}if(!n)return!1}return(null==l||""===l||r.stat_datafd===l)&&((null==i||""===i||r.stat_fn===i)&&(null==o||""===o||r.stat_valid==o))})}},data:function(){return{modelName:"",isExpand:!1,tableData:[],allStoreFd:[],enableStoreFd:[],dialogTitle:"",refsDialogTitle:"引用点查看",dialogType:"",refsDialogVisible:!1,dialogVisible:!1,refsTreeData:[],defaultRefsTreeProps:{children:"children",label:"text"},formLabelWidth:"120px",formItemStyle:{width:"400px"},formItemContentStyle:{width:"250px"},queryFormShow:!1,queryShowForm:{stat_name:"",stat_desc:"",stat_param:"",stat_datafd:"",stat_fn:"",stat_valid:""},statParamInitList:[],dialogForm:this.initDialogForm(),dialogFormSureBtnDisabled:!1,statValidBtnDisabled:!1,allPickCollapse:!1,statCondInDictDialogForm:{},statParamList:[],statDataFdList:[],statFnList:[],coununitList:[],statValidList:[],resultCondList:[],datatypeCodeList:[],storecolumnCodeList:[],formStatDescShow:!0,formStatParamShow:!0,formStatFnShow:!0,formStatCondInShow:!0,formStatDatafdShow:!0,formFnParamShow:!0,formCoununitShow:!0,formCountroundShow:!0,formResultCondShow:!0,formDatatypeShow:!0,formStoreColumnShow:!0,formContinuesShow:!0,formStatUnresultShow:!0,formStatValidShow:!0,modDisabled:!1,viewDisabled:!1,dialogFormRules:{stat_desc:[{required:!0,message:"统计描述不能为空",trigger:"blur"},{max:200,message:"长度在200个字符以内",trigger:"blur"},{validator:te.checkFormZhSpecialCharacter,trigger:"blur"}],stat_cond:[{validator:this.checkStatCond,trigger:"blur"}],stat_fn:[{required:!0,message:"统计函数不能为空",trigger:"change"}],stat_param:[{validator:this.checkStatParam,trigger:"blur"}],stat_datafd:[{validator:this.checkStatDataFd,trigger:"change"}],fn_param:[{validator:this.checkFnParam,trigger:"change"}],coununit:[{validator:this.checkCoununit,trigger:"change"}],countround:[{validator:this.checkCountround,trigger:"blur"}],result_cond:[{validator:this.checkResultCond,trigger:"change"}],datatype:[{validator:this.checkDatatype,trigger:"change"}],stat_valid:[{validator:this.checkStatValid,trigger:"change"}]},currentPage:1,pageSize:10,total:0,selectedRows:[]}},props:["txnId","isVisibility"],mounted:function(){this.$nextTick(function(){Ke=this})},watch:{txnId:{handler:function(e,t){!0===Ke.isVisibilityParent&&Ke.reloadData()}},isVisibility:{handler:function(e,t){!0===Ke.isVisibilityParent&&Ke.reloadData()}},"dialogForm.stat_fn":{handler:function(e,t){Ke.fnChangeEvent(),Ke.countroundChangeEvent()}},"dialogForm.coununit":{handler:function(e,t){Ke.countroundChangeEvent()}},"dialogForm.stat_datafd":{handler:function(e,t){Ke.datafdChangeEvent()}}},filters:{renderDateTime:function(e){return j.renderDateTime(e)},renderStatValidFilter:function(e){return se.rendCode("tms.mgr.rulestatus",e)},statParamFilter:function(e){if(null===e||""===e)return"";var t=[],a=e.split(","),l=!0,i=!1,o=void 0;try{for(var r,n=R()(a);!(l=(r=n.next()).done);l=!0)for(var s=r.value,c=0;c<Ke.statParamList.length;c++){var u=Ke.statParamList[c];if(""!==s&&s===u.code_key){t.push(u.code_value);break}}}catch(e){i=!0,o=e}finally{try{!l&&n.return&&n.return()}finally{if(i)throw o}}return t.join(",")},statDataFdFilter:function(e){if(null===e||""===e)return"";var t=[],a=e.split(","),l=!0,i=!1,o=void 0;try{for(var r,n=R()(a);!(l=(r=n.next()).done);l=!0)for(var s=r.value,c=0;c<Ke.statDataFdList.length;c++){var u=Ke.statDataFdList[c];if(""!==s&&s===u.code_key){t.push(u.code_value);break}}}catch(e){i=!0,o=e}finally{try{!l&&n.return&&n.return()}finally{if(i)throw o}}return t.join(",")},statFnFilter:function(e){if(null===e||""===e)return"";var t=[],a=e.split(","),l=!0,i=!1,o=void 0;try{for(var r,n=R()(a);!(l=(r=n.next()).done);l=!0)for(var s=r.value,c=0;c<Ke.statFnList.length;c++){var u=Ke.statFnList[c];if(""!==s&&s===u.code_key){t.push(u.code_value);break}}}catch(e){i=!0,o=e}finally{try{!l&&n.return&&n.return()}finally{if(i)throw o}}return t.join(",")}},methods:{initDialogForm:function(){return{stat_desc:"",stat_param:"",stat_param_list:"",stat_fn:"",stat_cond:"",stat_cond_in:"",fn_param:"",stat_datafd:"",coununit:"",countround:"",result_cond:"",datatype:"",storecolumn:"",continues:0,stat_unresult:0,stat_valid:0}},handleSelectionChange:function(e){this.selectedRows=e},reloadData:function(){this.getStatParamSelectData(),this.statValidList=se.getCodeItems("tms.mgr.rulestatus"),this.resultCondList=se.getCodeItems("tms.stat.txnstatus"),this.datatypeCodeList=se.getCodeItems("tms.stat.datatype"),this.coununitList=se.getCodeItems("tms.stat.condunit")},getData:function(){var e=this,t={txnId:this.txnIdParent};G.post({url:"/stat/list",param:t,success:function(t){t.row&&(e.tableData=t.row,e.allStoreFd=t.allstorefd,e.enableStoreFd=t.enablestorefd)}})},getStatParamSelectData:function(){var e=this;G.post({url:"/stat/txnFeature",param:{txn_id:this.txnIdParent},success:function(t){if(t.row){e.statParamList=[],e.statDataFdList=[];var a=!0,l=!1,i=void 0;try{for(var o,r=R()(t.row);!(a=(o=r.next()).done);a=!0){var n=o.value;e.statParamList.push(n),e.statDataFdList.push(n)}}catch(e){l=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(l)throw i}}G.post({url:"/stat/code",model:G.model.manager,param:{category_id:"tms.pub.func",args:2},success:function(t){if(t.row){e.statFnList=[];var a=!0,l=!1,i=void 0;try{for(var o,r=R()(t.row);!(a=(o=r.next()).done);a=!0){var n=o.value;e.statFnList.push(n)}}catch(e){l=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(l)throw i}}e.getData()}}})}}})},dialogOpenHandle:function(){this.formDatatypeShow=!1,this.fnChangeEventCommon(),this.countroundChangeEvent()},delData:function(e){var t=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={};a.del=[e];var l={};l.postData=a,l.txnId=t.txnIdParent;var i=t;G.post({url:"/stat/save",param:l,success:function(e){i.getData(),i.$message.success("删除成功")}})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},statValidChange:function(e){var t={};this.statValidBtnDisabled=!0,t["valid-y"]=[e];var a={};a.postData=t,a.txnId=this.txnIdParent;var l=this,i="编辑成功";i=1===e.stat_valid?"已启用":"已停用",G.post({url:"/stat/save",param:a,success:function(e){l.statValidBtnDisabled=!1,l.$message.success(i)},error:function(e){e&&e.error&&"object"===V()(e.error)&&e.error.length>0?l.$message.error(e.error.join("|")):l.$message.error(e.error),l.statValidBtnDisabled=!1},fail:function(){l.statValidBtnDisabled=!1}})},openDialog:function(e,t){this.dialogType=e;var a=this;if("edit"===e)this.allPickCollapse=!0,this.dialogTitle="编辑交易统计",this.modDisabled=!0,this.viewDisabled=!1,$()(this.dialogForm,this.selectRowNum2Str(t)),setTimeout(function(){""!==a.dialogForm.stat_param&&(a.statParamInitList=t.stat_param.split(",")),a.dialogForm.fn_param=t.fn_param},300);else if("add"===e)this.allPickCollapse=!0,this.dialogTitle="新建交易统计",this.modDisabled=!1,this.viewDisabled=!1,this.dialogForm=this.initDialogForm(),this.statParamInitList=[];else if("view"===e){this.allPickCollapse=!1,this.dialogTitle="查看交易统计";if(1!==this.selectedRows.length)return void this.$message("请选择一行交易统计信息。");this.viewDisabled=!0,this.modDisabled=!1,setTimeout(function(){""!==a.dialogForm.stat_param&&(a.statParamInitList=a.selectedRows[0].stat_param.split(",")),a.dialogForm.fn_param=a.selectedRows[0].fn_param},300),$()(this.dialogForm,this.selectRowNum2Str(this.selectedRows[0]))}this.dialogVisible=!0,this.dialogOpenHandle(),setTimeout(function(){a.$refs.dialogForm&&a.$refs.dialogForm.clearValidate()},100)},openRefsDialog:function(e){this.selTree(e),this.refsDialogVisible=!0},selectRowNum2Str:function(e){var t={};$()(t,e);for(var a in t)"number"==typeof t[a]&&(t[a]=t[a].toString());return t},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){t.dialogFormSureBtnDisabled=!0;var a=t,l={};$()(l,t.dialogForm),l.stat_txn=t.txnIdParent,l.continues="1"==l.continues?"1":"0",l.stat_unresult="1"==l.stat_unresult?"1":"0",null!==l.stat_param&&l.stat_param.length>0&&(l.stat_param=l.stat_param.join(","));var i={},o="提交成功";"add"===t.dialogType?(i.add=[l],o="新建成功"):(i.mod=[l],o="编辑成功");var r={};r.postData=i,r.txnId=t.txnIdParent,G.post({url:"/stat/save",param:r,success:function(e){a.getData(),a.$message.success(o),a.dialogVisible=!1,a.dialogFormSureBtnDisabled=!1},error:function(e){e&&e.error&&"object"===V()(e.error)&&e.error.length>0?a.$message.error(e.error.join("|")):a.$message.error(e.error),a.dialogFormSureBtnDisabled=!1},fail:function(){a.dialogFormSureBtnDisabled=!1}})}})},fnParamPopup:function(){if(!this.viewDisabled){var e=this.dialogForm.stat_fn,t=this.dialogForm.stat_datafd;if("rang_bin_dist"===e){var a=this.dialogForm.fn_param,l="",i=this.queryTxnFeature(t);i&&(l=i.type),this.$refs.FuncParamPickerDialog.open(a,l)}}},statCondInPopup:function(){this.viewDisabled||(this.$refs.StatCondDialog.open(),this.$refs.StatCondDialog.setValue({stat_cond_value:this.dialogForm.stat_cond,stat_cond_in:this.dialogForm.stat_cond_in}))},statParamDataChange:function(e){this.queryShowForm.stat_param=e},addStatParamDataChange:function(e){this.dialogForm.stat_param=e,this.$refs.dialogForm.validateField("stat_param",function(e){})},statCondInValueCallBack:function(e){console.log("statCondInValueCallBack"),console.log(e),this.dialogForm.stat_cond=e.stat_cond_value,this.dialogForm.stat_cond_in=e.stat_cond_in},funcParamValueCallBack:function(e){this.dialogForm.fn_param=e},queryTxnFeature:function(e){var t=!0,a=!1,l=void 0;try{for(var i,o=R()(this.statDataFdList);!(t=(i=o.next()).done);t=!0){var r=i.value;if(r.code_key===e)return r}}catch(e){a=!0,l=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw l}}return null},changeFeatureTypeToDataType:function(e){var t=e,a=!0,l=!1,i=void 0;try{for(var o,r=R()(Xe);!(a=(o=r.next()).done);a=!0){var n=o.value;if(n.type.includes(e)){t=n.recap;break}}}catch(e){l=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(l)throw i}}return t},getStorageFdByfdName:function(e,t){var a=null;if(e&&t){var l=!0,i=!1,o=void 0;try{for(var r,n=R()(e);!(l=(r=n.next()).done);l=!0){var s=r.value;if(s.fd_name===t){a=s;break}}}catch(e){i=!0,o=e}finally{try{!l&&n.return&&n.return()}finally{if(i)throw o}}}return a},getCanUseStorageFdByDataType:function(e,t){var a=[],l=this.enableStoreFd;if(!t){var i=this.selectedRows;if(i&&i.length>0){var o=i[0];if(o&&o.storecolumn){var r=this.allStoreFd,n=this.getStorageFdByfdName(r,o.storecolumn);n&&l.splice(0,0,n)}}}return a=a.concat(this.getEnableStorageFdByDataType(e,l))},getEnableStorageFdByDataType:function(e,t){var a=[];if(e&&t){var l=!0,i=!1,o=void 0;try{for(var r,n=R()(t);!(l=(r=n.next()).done);l=!0){var s=r.value,c=!0,u=!1,d=void 0;try{for(var m,f=R()(Xe);!(c=(m=f.next()).done);c=!0){var p=m.value;p.type.includes(e)&&("long"===p.recap||"double"===p.recap?("double"!==e&&s.type===e&&a.push({code_value:s.fd_name,code_key:s.fd_name}),"double"===s.type&&a.push({code_value:s.fd_name,code_key:s.fd_name})):"string"===p.recap&&"string"!==e&&s.type===e&&a.push({code_value:s.fd_name,code_key:s.fd_name}),"string"===s.type&&a.push({code_value:s.fd_name,code_key:s.fd_name}))}}catch(e){u=!0,d=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw d}}}}catch(e){i=!0,o=e}finally{try{!l&&n.return&&n.return()}finally{if(i)throw o}}}return a},changeDialogForm:function(e){switch(e){case"calculat_expressions":this.dialogForm.stat_param="",this.dialogForm.stat_datafd="",this.dialogForm.coununit="",this.dialogForm.countround="",this.dialogForm.fn_param="",this.dialogForm.result_cond="",this.dialogForm.continues="",this.dialogForm.stat_unresult="",this.formStatParamShow=!1,this.formStatDatafdShow=!1,this.formCoununitShow=!1,this.formCountroundShow=!1,this.formFnParamShow=!1,this.formResultCondShow=!1,this.formContinuesShow=!1,this.formStatUnresultShow=!1;break;default:this.formStatParamShow=!0,this.formStatDatafdShow=!0,this.formCoununitShow=!0,this.formCountroundShow=!0,this.formFnParamShow=!0,this.formResultCondShow=!0,this.formContinuesShow=!0,this.formStatUnresultShow=!0}},fnChangeEventCommon:function(){var e=this.dialogForm;if("calculat_expressions"===e.stat_fn)this.changeDialogForm("calculat_expressions"),this.formDatatypeShow=!0;else if(this.changeDialogForm(),"rang_bin_dist"===e.stat_fn){var t=e.stat_datafd,a="";if(void 0!=t&&""!==t){var l=Ke.queryTxnFeature(t);l&&(a=l.type),"datetime"===a||"time"===a||"double"===a||"money"===a||"long"===a?this.formFnParamShow=!0:(this.dialogForm.fn_param="",this.formFnParamShow=!1)}else this.dialogForm.fn_param="",this.formFnParamShow=!1}else"count"===e.stat_fn||"status"===e.stat_fn?(this.dialogForm.stat_datafd="",this.formStatDatafdShow=!1):this.formStatDatafdShow=!0,this.dialogForm.fn_param="",this.formFnParamShow=!1},fnChangeEvent:function(){var e=this.dialogForm;e.storecolumn="",this.fnChangeEventCommon();var t="";if("snapshot"===e.stat_fn){var a=e.stat_datafd,l=this.queryTxnFeature(a);l&&(t=this.changeFeatureTypeToDataType(l.type))}else{var i=!0,o=!1,r=void 0;try{for(var n,s=R()(this.statFnList);!(i=(n=s.next()).done);i=!0){var c=n.value;c.code_key===e.stat_fn&&(t=c.func_type)}}catch(e){o=!0,r=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw r}}}"object"===t&&"calculat_expressions"===e.stat_fn?(e.datatype="",e.storecolumn="",e.datatype="",e.storecolumn="",this.formDatatypeShow=!0,t=""):(e.datatype=t,this.formDatatypeShow=!1,this.storecolumnCodeList=this.getCanUseStorageFdByDataType(t,!0))},countroundChangeEvent:function(){var e=this.dialogForm;"7"===e.coununit||"9"===e.coununit||"calculat_expressions"===e.stat_fn?(this.dialogForm.countround="",this.formCountroundShow=!1):this.formCountroundShow=!0},datafdChangeEvent:function(){var e=this.dialogForm;e.storecolumn="";var t=e.stat_fn,a=e.stat_datafd,l="",i=this.queryTxnFeature(a);if(i&&(l=i.type),"snapshot"===t){var o=this.changeFeatureTypeToDataType(l);e.datatype=o,this.storecolumnCodeList=this.getCanUseStorageFdByDataType(o,!0)}"rang_bin_dist"===t?"datetime"===l||"time"===l||"double"===l||"money"===l||"long"===l?(e.fn_param="",this.formFnParamShow=!0):(""!==a&&(this.$message("非时间类型、日期时间类型和非数值类型的统计目标，不能使用区间分布函数"),e.stat_datafd=""),e.stat_datafd="",e.fn_param="",this.formFnParamShow=!1):(e.fn_param="",this.formFnParamShow=!1)},checkStatCond:function(e,t,a){var l=this.dialogForm.stat_cond,i=this.formStatCondInName.replace(":","");return"calculat_expressions"===this.dialogForm.stat_fn&&""===l?a(new Error(i+"不能为空")):""!==l&&l.length>512?a(new Error(i+"不能超过512个字符")):void a()},checkStatDataFd:function(e,t,a){var l=this.dialogForm.stat_fn;if(!("calculat_expressions"===this.dialogForm.stat_fn)&&"count"!==l&&"status"!==l&&""===this.dialogForm.stat_datafd)return a(new Error("统计目标不能为空"));a()},checkStatParam:function(e,t,a){var l=this.dialogForm.stat_param,i=this.dialogForm.coununit;if(!("calculat_expressions"===this.dialogForm.stat_fn||0!==l.length&&""!==l))return a(new Error("统计引用对象不能为空"));if(l.length>6)return a(new Error("统计引用对象最多选择6个"));if("9"===i){var o=!1,r=!0,n=!1,s=void 0;try{for(var c,u=R()(l);!(r=(c=u.next()).done);r=!0){if("SESSIONID"===c.value.toUpperCase()){o=!0;break}}}catch(e){n=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw s}}if(!o)return a(new Error('单位为会话，必须包含"会话标识"'))}a()},checkFnParam:function(e,t,a){var l=this.dialogForm.stat_fn,i=this.dialogForm.fn_param;if("rang_bin_dist"===l){if(void 0===i||""===i)return a(new Error("函数参数不能为空"));if(i.length>512)return a(new Error("函数参数不能超过512个字符"))}a()},checkCoununit:function(e,t,a){var l=this.dialogForm.coununit;if(!("calculat_expressions"===this.dialogForm.stat_fn)&&""===l)return a(new Error("单位不能为空"));a()},checkCountround:function(e,t,a){var l=this.dialogForm.coununit,i=this.dialogForm.countround;if(!("calculat_expressions"===this.dialogForm.stat_fn)&&("7"!==l||"9"!==l)){if(""===j.trim(i))return a(new Error("周期不能为空"));if(!j.isNumber(i,"+","0")||parseInt(i)<1||parseInt(i)>100)return a(new Error("周期只能输入1-100的正整数"))}a()},checkResultCond:function(e,t,a){var l=this.dialogForm.result_cond;if(!("calculat_expressions"===this.dialogForm.stat_fn)&&""===j.trim(l))return a(new Error("交易结果不能为空"));a()},checkDatatype:function(e,t,a){var l=this.dialogForm.datatype;if("calculat_expressions"===this.dialogForm.stat_fn&&""===j.trim(l))return a(new Error("数据类型不能为空"));a()},checkStatValid:function(e,t,a){var l=this.dialogForm.stat_valid;if(!("calculat_expressions"===this.dialogForm.stat_fn)&&""===j.trim(l))return a(new Error("有效性不能为空"));a()},selTree:function(e){var t=this,a={url:"/stat/refTree",param:{txnId:this.txnIdParent,statName:e.stat_name},success:function(e){e.list&&e.list.length>0&&(e.row=e.list,t.treeList=e.row,t.refsTreeData=t.formatTreeData(e.row))}};G.post(a)},formatTreeData:function(e,t){function a(e,t){var l=[];for(var i in e){var o=e[i];o.fid===t&&(o.children=a(e,o.id),l.push(o))}return l}var l=[];if(void 0===t||0===t.length){t=[];for(var i in e)void 0!==e[i].fid&&null!==e[i].fid&&""!==e[i].fid&&"-1"!==e[i].fid||t.push(e[i])}0===t.length&&(console.error("根节点不存在，请确认树结构是否正确"),console.info("树结构的根节点是fid不存在（或为空）的节点，否则需手动添加指定得根节点（参数）"));for(var o in t){var r=t[o];r.children=a(e,r.id),l.push(r)}return l}},components:{AllPickSelect:Le,StatCondPicker:Me,FuncParamPicker:a("/Xao")(je,Ue,!1,function(e){a("wMv7")},null,null).exports}},He={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("transition",{attrs:{name:"fade"}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.queryFormShow,expression:"queryFormShow"}],ref:"queryShowForm",staticStyle:{"text-align":"left"},attrs:{"label-position":"right","label-width":"120px",model:e.queryShowForm,inline:!0}},[a("el-form-item",{attrs:{label:"统计名称:",prop:"stat_name"}},[a("el-input",{staticClass:"query-form-item",attrs:{"auto-complete":"off"},model:{value:e.queryShowForm.stat_name,callback:function(t){e.$set(e.queryShowForm,"stat_name",t)},expression:"queryShowForm.stat_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"统计描述:",prop:"stat_desc"}},[a("el-input",{staticClass:"query-form-item",attrs:{"auto-complete":"off"},model:{value:e.queryShowForm.stat_desc,callback:function(t){e.$set(e.queryShowForm,"stat_desc",t)},expression:"queryShowForm.stat_desc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"统计引用对象:",prop:"stat_param"}},[a("AllPickSelect",{attrs:{dataList:e.statParamList},on:{dataChange:e.statParamDataChange}})],1),e._v(" "),a("el-form-item",{attrs:{label:"统计目标:",prop:"stat_datafd"}},[a("el-select",{staticClass:"query-form-item",attrs:{placeholder:"请选择",clearable:""},model:{value:e.queryShowForm.stat_datafd,callback:function(t){e.$set(e.queryShowForm,"stat_datafd",t)},expression:"queryShowForm.stat_datafd"}},e._l(e.statDataFdList,function(e){return a("el-option",{key:e.code_key,attrs:{label:e.code_value,value:e.code_key}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"统计函数:",prop:"stat_fn"}},[a("el-select",{staticClass:"query-form-item",attrs:{placeholder:"请选择",clearable:""},model:{value:e.queryShowForm.stat_fn,callback:function(t){e.$set(e.queryShowForm,"stat_fn",t)},expression:"queryShowForm.stat_fn"}},e._l(e.statFnList,function(e){return a("el-option",{key:e.code_key,attrs:{label:e.code_value,value:e.code_key}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"有效性:",prop:"stat_valid"}},[a("el-select",{staticClass:"query-form-item",attrs:{placeholder:"请选择",clearable:""},model:{value:e.queryShowForm.stat_valid,callback:function(t){e.$set(e.queryShowForm,"stat_valid",t)},expression:"queryShowForm.stat_valid"}},e._l(e.statValidList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-bottom":"10px","text-align":"left"}},[a("el-button",{staticClass:"el-icon-view",attrs:{type:"primary"},on:{click:function(t){e.queryFormShow=!e.queryFormShow}}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"el-icon-plus",attrs:{plain:"",disabled:e.isExpand},on:{click:function(t){e.openDialog("add")}}},[e._v("新建")])],1),e._v(" "),a("div",{staticClass:"stat-expand-table-box"},[a("el-table",{ref:"dataTable",staticStyle:{width:"100%"},attrs:{data:e.tableDataShow},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit",title:"编辑"},on:{click:function(a){e.openDialog("edit",t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete",title:"删除"},on:{click:function(a){e.delData(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-location-outline",title:"引用点"},on:{click:function(a){e.openRefsDialog(t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"stat_name",label:"统计名称",align:"left",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"stat_name",label:"统计名称",align:"left",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"stat_desc",label:"统计描述",align:"left",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{label:"统计引用对象",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("statParamFilter")(t.row.stat_param)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"stat_datafd",label:"统计目标",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("statDataFdFilter")(t.row.stat_datafd)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"统计函数",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("statFnFilter")(t.row.stat_fn)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"storecolumn",label:"存储字段",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:"有效性",align:"left",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:e.statValidBtnDisabled},on:{change:function(a){e.statValidChange(t.row)}},model:{value:t.row.stat_valid,callback:function(a){e.$set(t.row,"stat_valid",a)},expression:"scope.row.stat_valid"}})]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"900px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dialogForm",staticStyle:{"text-align":"left"},attrs:{model:e.dialogForm,inline:!0,rules:e.dialogFormRules}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formStatDescShow,expression:"formStatDescShow"}],style:e.formItemStyle,attrs:{label:"统计描述:","label-width":e.formLabelWidth,prop:"stat_desc"}},[a("el-input",{style:e.formItemContentStyle,attrs:{"auto-complete":"off",maxlength:200,disabled:e.viewDisabled},model:{value:e.dialogForm.stat_desc,callback:function(t){e.$set(e.dialogForm,"stat_desc",t)},expression:"dialogForm.stat_desc"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formStatParamShow,expression:"formStatParamShow"}],staticClass:"is-required",style:e.formItemStyle,attrs:{label:"统计引用对象:","label-width":e.formLabelWidth,prop:"stat_param"}},[a("AllPickSelect",{style:e.formItemContentStyle,attrs:{collapseTags:e.allPickCollapse,selectedList:e.statParamInitList,dataList:e.statParamList,disabled:e.modDisabled||e.viewDisabled},on:{dataChange:e.addStatParamDataChange}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formStatFnShow,expression:"formStatFnShow"}],style:e.formItemStyle,attrs:{label:"统计函数:","label-width":e.formLabelWidth,prop:"stat_fn"}},[a("el-select",{style:e.formItemContentStyle,attrs:{placeholder:"请选择",disabled:e.modDisabled||e.viewDisabled,clearable:""},model:{value:e.dialogForm.stat_fn,callback:function(t){e.$set(e.dialogForm,"stat_fn",t)},expression:"dialogForm.stat_fn"}},e._l(e.statFnList,function(e){return a("el-option",{key:e.code_key,attrs:{label:e.code_value,value:e.code_key}})}))],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formStatCondInShow,expression:"formStatCondInShow"}],class:{"is-required":e.StatCondInRequired},style:e.formItemStyle,attrs:{label:e.formStatCondInName,"label-width":e.formLabelWidth,prop:"stat_cond"}},[a("div",{attrs:{disabled:e.viewDisabled},on:{dblclick:e.statCondInPopup}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],style:e.formItemContentStyle,attrs:{"auto-complete":"off",readonly:"",disabled:e.viewDisabled},model:{value:e.dialogForm.stat_cond,callback:function(t){e.$set(e.dialogForm,"stat_cond",t)},expression:"dialogForm.stat_cond"}}),e._v(" "),a("el-input",{style:e.formItemContentStyle,attrs:{"auto-complete":"off",readonly:"",disabled:e.viewDisabled},model:{value:e.dialogForm.stat_cond_in,callback:function(t){e.$set(e.dialogForm,"stat_cond_in",t)},expression:"dialogForm.stat_cond_in"}})],1)]),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formStatDatafdShow,expression:"formStatDatafdShow"}],staticClass:"is-required",style:e.formItemStyle,attrs:{label:"统计目标:","label-width":e.formLabelWidth,prop:"stat_datafd"}},[a("el-select",{style:e.formItemContentStyle,attrs:{placeholder:"请选择",disabled:e.modDisabled||e.viewDisabled,clearable:""},model:{value:e.dialogForm.stat_datafd,callback:function(t){e.$set(e.dialogForm,"stat_datafd",t)},expression:"dialogForm.stat_datafd"}},e._l(e.statDataFdList,function(e){return a("el-option",{key:e.code_key,attrs:{label:e.code_value,value:e.code_key}})}))],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formFnParamShow,expression:"formFnParamShow"}],staticClass:"is-required",style:e.formItemStyle,attrs:{label:"函数参数:","label-width":e.formLabelWidth,prop:"fn_param"}},[a("div",{on:{dblclick:e.fnParamPopup}},[a("el-input",{style:e.formItemContentStyle,attrs:{"auto-complete":"off",readonly:"",disabled:e.viewDisabled},model:{value:e.dialogForm.fn_param,callback:function(t){e.$set(e.dialogForm,"fn_param",t)},expression:"dialogForm.fn_param"}})],1)]),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formCoununitShow,expression:"formCoununitShow"}],staticClass:"is-required",style:e.formItemStyle,attrs:{label:"单位:","label-width":e.formLabelWidth,prop:"coununit"}},[a("el-select",{style:e.formItemContentStyle,attrs:{placeholder:"请选择",disabled:e.modDisabled||e.viewDisabled,clearable:""},model:{value:e.dialogForm.coununit,callback:function(t){e.$set(e.dialogForm,"coununit",t)},expression:"dialogForm.coununit"}},e._l(e.coununitList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formCountroundShow,expression:"formCountroundShow"}],staticClass:"is-required",style:e.formItemStyle,attrs:{label:"周期:","label-width":e.formLabelWidth,prop:"countround"}},[a("el-input",{style:e.formItemContentStyle,attrs:{"auto-complete":"off",disabled:e.viewDisabled},model:{value:e.dialogForm.countround,callback:function(t){e.$set(e.dialogForm,"countround",t)},expression:"dialogForm.countround"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formResultCondShow,expression:"formResultCondShow"}],staticClass:"is-required",style:e.formItemStyle,attrs:{label:"交易结果:","label-width":e.formLabelWidth,prop:"result_cond"}},[a("el-select",{style:e.formItemContentStyle,attrs:{placeholder:"请选择",disabled:e.viewDisabled,clearable:""},model:{value:e.dialogForm.result_cond,callback:function(t){e.$set(e.dialogForm,"result_cond",t)},expression:"dialogForm.result_cond"}},e._l(e.resultCondList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formDatatypeShow,expression:"formDatatypeShow"}],staticClass:"is-required",style:e.formItemStyle,attrs:{label:"数据类型:","label-width":e.formLabelWidth,prop:"datatype"}},[a("el-select",{style:e.formItemContentStyle,attrs:{placeholder:"请选择",disabled:e.viewDisabled,clearable:""},model:{value:e.dialogForm.datatype,callback:function(t){e.$set(e.dialogForm,"datatype",t)},expression:"dialogForm.datatype"}},e._l(e.datatypeCodeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formStoreColumnShow,expression:"formStoreColumnShow"}],style:e.formItemStyle,attrs:{label:"存储字段:","label-width":e.formLabelWidth,prop:"storecolumn"}},[a("el-select",{style:e.formItemContentStyle,attrs:{placeholder:"请选择",disabled:e.viewDisabled,clearable:""},model:{value:e.dialogForm.storecolumn,callback:function(t){e.$set(e.dialogForm,"storecolumn",t)},expression:"dialogForm.storecolumn"}},e._l(e.storecolumnCodeList,function(e){return a("el-option",{key:e.code_key,attrs:{label:e.code_value,value:e.code_key}})}))],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formContinuesShow,expression:"formContinuesShow"}],style:e.formItemStyle,attrs:{label:"连续:","label-width":e.formLabelWidth,prop:"continues"}},[a("el-switch",{attrs:{disabled:e.viewDisabled,"active-value":"1","inactive-value":"0"},model:{value:e.dialogForm.continues,callback:function(t){e.$set(e.dialogForm,"continues",t)},expression:"dialogForm.continues"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formStatUnresultShow,expression:"formStatUnresultShow"}],style:e.formItemStyle,attrs:{label:"事中:","label-width":e.formLabelWidth,prop:"stat_unresult"}},[a("el-switch",{attrs:{disabled:e.viewDisabled,"active-value":"1","inactive-value":"0"},model:{value:e.dialogForm.stat_unresult,callback:function(t){e.$set(e.dialogForm,"stat_unresult",t)},expression:"dialogForm.stat_unresult"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formStatValidShow,expression:"formStatValidShow"}],style:e.formItemStyle,attrs:{label:"有效性:","label-width":e.formLabelWidth,prop:"stat_valid"}},[a("el-switch",{attrs:{disabled:e.viewDisabled,"active-value":"1","inactive-value":"0"},model:{value:e.dialogForm.stat_valid,callback:function(t){e.$set(e.dialogForm,"stat_valid",t)},expression:"dialogForm.stat_valid"}})],1),e._v(" "),a("el-form-item",{style:e.formItemStyle,attrs:{label:" ","label-width":e.formLabelWidth}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.viewDisabled,expression:"!viewDisabled"}],attrs:{type:"primary",disabled:e.dialogFormSureBtnDisabled},on:{click:function(t){e.submitForm("dialogForm")}}},[e._v("保 存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.viewDisabled,expression:"!viewDisabled"}],on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1)],1),e._v(" "),a("StatCondPicker",{ref:"StatCondDialog",attrs:{statCond:e.dialogForm.stat_cond,statCondIn:e.dialogForm.stat_cond_in,txnId:e.txnId,hideItems:["rule_func","ac_func"]},on:{valueCallback:e.statCondInValueCallBack}}),e._v(" "),a("FuncParamPicker",{ref:"FuncParamPickerDialog",on:{valueCallback:e.funcParamValueCallBack}}),e._v(" "),a("el-dialog",{attrs:{title:e.refsDialogTitle,visible:e.refsDialogVisible,width:"500px"},on:{"update:visible":function(t){e.refsDialogVisible=t}}},[a("el-tree",{ref:"refsTree",staticStyle:{"overflow-y":"auto"},attrs:{data:e.refsTreeData,"node-key":"id",props:e.defaultRefsTreeProps,"highlight-current":!0,"expand-on-click-node":!1}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)],1)},staticRenderFns:[]},Ze=null,Qe={data:function(){return{modelName:"",tableData:[],refsTableData:[],allStoreFd:[],enableStoreFd:[],dialogTitle:"",dialogTabActive:"dataMod",refsDialogTitle:"策略列表",dialogType:"",dialogVisible:!1,refsDialogVisible:!1,formLabelWidth:"120px",formItemStyle:{width:"400px"},formItemContentStyle:{width:"250px"},textareaContentStyle:{width:"665px"},queryFormShow:!1,queryShowForm:{rule_shortdesc:"",eval_type:"",disposal:"",rule_enable:""},dialogForm:this.initDialogForm(),actionDialogForm:this.initActionDialogForm(),dialogFormSureBtnDisabled:!1,ruleEnableBtnDisabled:!1,dialogFormRules:{rule_shortdesc:[{required:!0,message:"请输入规则名称",trigger:"blur"},{max:128,message:"长度在128个字符以内",trigger:"blur"},{validator:te.checkFormZhSpecialCharacter,trigger:"blur"}],rule_cond:[{required:!0,message:"请输入规则条件",trigger:"blur"},{max:1024,message:"长度在1024个字符以内",trigger:"blur"}],eval_type:[{required:!0,message:"请输入评估类型",trigger:"change"}],disposal:[{required:!0,message:"请输入处置方式",trigger:"change"}],rule_desc:[{max:1024,message:"长度在1024个字符以内",trigger:"blur"},{validator:te.checkFormZhSpecialCharacter,trigger:"blur"}],rule_score:[{required:!0,message:"请输入规则分值",trigger:"blur"},{validator:this.checkRuleScore,trigger:"blur"}]},selectedRows:[],disposalList:[],evalTypeList:[],ruleEnableList:[],actionTableData:[],acEnableBtnDisabled:!1,selectedRule:{},actionDialogVisible:!1,actionDialogTitle:""}},computed:{txnIdParent:function(){return this.txnId},isVisibilityParent:function(){return this.isVisibility},tableDataShow:function(){var e=this.queryShowForm.rule_shortdesc,t=this.queryShowForm.eval_type,a=this.queryShowForm.disposal,l=this.queryShowForm.rule_enable;return this.tableData.filter(function(i){return!(""!==e&&!i.rule_shortdesc.includes(e))&&((null==t||""===t||i.eval_type===t)&&((null==a||""===a||i.disposal===a)&&(null==l||""===l||i.rule_enable==l)))})},actionTableDataShow:function(){return this.actionTableData}},filters:{renderDateTime:function(e){return j.renderDateTime(e)},evalTypeFilter:function(e){return se.rendCode("tms.rule.evaltype",e)},ruleIsTestFilter:function(e){return se.rendCode("common.is",e)},evalModeFilter:function(e){return se.rendCode("tms.strategy.evalmode",e)},ruleExecModeFilter:function(e){return se.rendCode("tms.strategy.rule_exec_mode",e)},stEnableFilter:function(e){return se.rendCode("tms.mgr.rulestatus",e)},disposalFilter:function(e){var t=e,a=!0,l=!1,i=void 0;try{for(var o,r=R()(Ze.disposalList);!(a=(o=r.next()).done);a=!0){var n=o.value;if(""!==e&&e===n.dp_code){t=n.dp_name;break}}}catch(e){l=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(l)throw i}}return t}},props:["txnId","isVisibility"],mounted:function(){this.$nextTick(function(){Ze=this})},watch:{txnId:{handler:function(e,t){!0===Ze.isVisibilityParent&&Ze.reloadData()}},isVisibility:{handler:function(e,t){!0===Ze.isVisibilityParent&&Ze.reloadData()}},"dialogForm.disposal":{handler:function(e,t){var a=!0,l=!1,i=void 0;try{for(var o,r=R()(Ze.disposalList);!(a=(o=r.next()).done);a=!0){var n=o.value;if(""===e){Ze.dialogForm.rule_score="";break}if(e===n.dp_code){Ze.dialogForm.rule_score=n.default_score;break}}}catch(e){l=!0,i=e}finally{try{!a&&r.return&&r.return()}finally{if(l)throw i}}}}},methods:{initDialogForm:function(){return{rule_shortdesc:"",rule_cond_in:"",rule_cond:"",eval_type:"",disposal:"",rule_score:"",rule_istest:"0",rule_enable:"0",rule_desc:""}},initActionDialogForm:function(){return{ac_desc:"",ac_cond_in:"",ac_cond:"",ac_expr_in:"",ac_expr:""}},getData:function(){var e=this;G.post({url:"/rule/list",param:{RULE_TXN:this.txnIdParent,type:0,st_id:""},success:function(t){e.tableData=t.row}})},reloadData:function(){var e=this;this.evalTypeList=se.getCodeItems("tms.rule.evaltype"),this.ruleEnableList=se.getCodeItems("tms.mgr.rulestatus"),G.post({url:"/rule/disposal",param:{txn_id:this.txnIdParent},success:function(t){e.disposalList=t.row,e.getData()}})},openDialog:function(e,t){this.dialogType=e;var a=this;"edit"===e?(this.dialogTabActive="dataMod",this.selectedRule=t,this.allPickCollapse=!0,this.dialogTitle="编辑交易规则",this.modDisabled=!0,$()(this.dialogForm,this.selectRowNum2Str(t)),this.getActionData()):"add"===e&&(this.dialogTabActive="dataMod",this.dialogTitle="新建交易规则",this.modDisabled=!1,this.dialogForm=this.initDialogForm()),this.dialogVisible=!0,setTimeout(function(){a.$refs.dialogForm&&a.$refs.dialogForm.clearValidate();try{"add"===e?a.$refs.dialogTab.$refs.nav.$el.parentNode.style.display="none":"edit"===e&&(a.$refs.dialogTab.$refs.nav.$el.parentNode.style.display="block")}catch(e){console.error(e)}},100)},copy:function(e){var t=this;this.$confirm("确定复制?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={},l={};$()(l,e),l.rule_shortdesc=e.rule_shortdesc+"_复制",a.copy=[l];var i={};i.postData=a,i.txnId=t.txnIdParent;var o=t;G.post({url:"/rule/save",param:i,success:function(e){o.getData(),o.$message.success("复制成功")},error:function(e){e&&e.error&&"object"===V()(e.error)&&e.error.length>0?o.$message.error(e.error.join("|")):o.$message.error(e.error),o.ruleEnableBtnDisabled=!1},fail:function(){o.ruleEnableBtnDisabled=!1}})}).catch(function(){t.$message({type:"info",message:"已取消复制"})})},delData:function(e){var t=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={};a.del=[e];var l={};l.postData=a,l.txnId=t.txnIdParent;var i=t;G.post({url:"/rule/save",param:l,success:function(e){i.getData(),i.$message.success("删除成功")}})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},openRefsDialog:function(e){var t=this;G.post({url:"/strategy/refList",param:{RULE_ID:e.rule_id},success:function(e){t.refsTableData=e.row,t.refsDialogVisible=!0}})},ruleEnableChange:function(e){var t={};this.ruleEnableBtnDisabled=!0,t["valid-y"]=[e];var a={};a.postData=t,a.txnId=this.txnIdParent;var l=this,i="编辑成功";i=1===e.stat_valid?"已启用":"已停用",G.post({url:"/rule/save",param:a,success:function(e){l.ruleEnableBtnDisabled=!1,l.$message.success(i)},error:function(e){e&&e.error&&"object"===V()(e.error)&&e.error.length>0?l.$message.error(e.error.join("|")):l.$message.error(e.error),l.ruleEnableBtnDisabled=!1},fail:function(){l.ruleEnableBtnDisabled=!1}})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){t.dialogFormSureBtnDisabled=!0;var a=t,l={};$()(l,t.dialogForm),l.rule_txn=t.txnIdParent;var i={},o="提交成功";"add"===t.dialogType?(i.add=[l],o="新建成功"):(i.mod=[l],o="编辑成功");var r={};r.postData=i,r.txnId=t.txnIdParent,G.post({url:"/rule/save",param:r,success:function(e){a.getData(),a.$message.success(o),a.dialogVisible=!1,a.dialogFormSureBtnDisabled=!1},error:function(e){e&&e.error&&"object"===V()(e.error)&&e.error.length>0?a.$message.error(e.error.join("|")):a.$message.error(e.error),a.dialogFormSureBtnDisabled=!1},fail:function(){a.dialogFormSureBtnDisabled=!1}})}})},ruleCondInPopup:function(){this.$refs.RuleCondDialog.open(),this.$refs.RuleCondDialog.setValue({stat_cond_value:this.dialogForm.rule_cond,stat_cond_in:this.dialogForm.rule_cond_in})},acCondInPopup:function(){this.$refs.acCondDialog.open(),this.$refs.acCondDialog.setValue({stat_cond_value:this.actionDialogForm.ac_cond,stat_cond_in:this.actionDialogForm.ac_cond_in})},selectRowNum2Str:function(e){var t={};$()(t,e);for(var a in t)"number"==typeof t[a]&&(t[a]=t[a].toString());return t},ruleCondInValueCallBack:function(e){this.dialogForm.rule_cond=e.stat_cond_value,this.dialogForm.rule_cond_in=e.stat_cond_in},acCondInValueCallBack:function(e){this.actionDialogForm.ac_cond=e.stat_cond_value,this.actionDialogForm.ac_cond_in=e.stat_cond_in},checkRuleScore:function(e,t,a){return!j.isNumber(t,null,"0")||parseInt(t)<-100||parseInt(t)>100?a(new Error("周期只能输入-100-100的整数")):a()},openActionDialog:function(e,t){"edit"===e?(this.actionDialogTitle="编辑动作",$()(this.actionDialogForm,this.selectRowNum2Str(t))):"add"===e&&(this.actionDialogTitle="新建动作",this.actionDialogForm=this.initActionDialogForm()),this.actionDialogVisible=!0},getActionData:function(){console.log("getActionData");var e=this.selectedRule.rule_id,t=this;G.post({url:"/action/list",param:{rule_id:e},success:function(e){e.row&&(t.actionTableData=this.row)},error:function(e){e&&e.error&&"object"===V()(e.error)&&e.error.length>0?t.$message.error(e.error.join("|")):t.$message.error(e.error),t.dialogFormSureBtnDisabled=!1},fail:function(){t.dialogFormSureBtnDisabled=!1}})}},components:{StatCondPicker:Me}},Je={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("transition",{attrs:{name:"fade"}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:e.queryFormShow,expression:"queryFormShow"}],ref:"queryShowForm",staticStyle:{"text-align":"left"},attrs:{"label-position":"right","label-width":"120px",model:e.queryShowForm,inline:!0}},[a("el-form-item",{attrs:{label:"规则名称:",prop:"stat_name"}},[a("el-input",{staticClass:"query-form-item",attrs:{"auto-complete":"off"},model:{value:e.queryShowForm.rule_shortdesc,callback:function(t){e.$set(e.queryShowForm,"rule_shortdesc",t)},expression:"queryShowForm.rule_shortdesc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"评估类型:",prop:"eval_type"}},[a("el-select",{staticClass:"query-form-item",attrs:{placeholder:"请选择",clearable:""},model:{value:e.queryShowForm.eval_type,callback:function(t){e.$set(e.queryShowForm,"eval_type",t)},expression:"queryShowForm.eval_type"}},e._l(e.evalTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"处置方式:",prop:"disposal"}},[a("el-select",{staticClass:"query-form-item",attrs:{placeholder:"请选择",clearable:""},model:{value:e.queryShowForm.disposal,callback:function(t){e.$set(e.queryShowForm,"disposal",t)},expression:"queryShowForm.disposal"}},e._l(e.disposalList,function(e){return a("el-option",{key:e.dp_code,attrs:{label:e.dp_name,value:e.dp_code}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"有效性:",prop:"rule_enable"}},[a("el-select",{staticClass:"query-form-item",attrs:{placeholder:"请选择",clearable:""},model:{value:e.queryShowForm.rule_enable,callback:function(t){e.$set(e.queryShowForm,"rule_enable",t)},expression:"queryShowForm.rule_enable"}},e._l(e.ruleEnableList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-bottom":"10px","text-align":"left"}},[a("el-button",{staticClass:"el-icon-view",attrs:{type:"primary"},on:{click:function(t){e.queryFormShow=!e.queryFormShow}}},[e._v("查询")]),e._v(" "),a("el-button",{staticClass:"el-icon-plus",attrs:{plain:""},on:{click:function(t){e.openDialog("add")}}},[e._v("新建")])],1),e._v(" "),a("el-table",{ref:"dataTable",staticStyle:{width:"100%"},attrs:{data:e.tableDataShow}},[a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit",title:"编辑"},on:{click:function(a){e.openDialog("edit",t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-document",title:"复制"},on:{click:function(a){e.copy(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete",title:"删除"},on:{click:function(a){e.delData(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-location-outline",title:"引用点"},on:{click:function(a){e.openRefsDialog(t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"rule_shortdesc",label:"规则名称",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:"评估类型",align:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("evalTypeFilter")(t.row.eval_type)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"处置方式",align:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("disposalFilter")(t.row.disposal)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"action_count",label:"动作数量",align:"left",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"是否测试",align:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("ruleIsTestFilter")(t.row.rule_istest)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"有效性",align:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:e.ruleEnableBtnDisabled},on:{change:function(a){e.ruleEnableChange(t.row)}},model:{value:t.row.rule_enable,callback:function(a){e.$set(t.row,"rule_enable",a)},expression:"scope.row.rule_enable"}})]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,width:"900px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-tabs",{ref:"dialogTab",attrs:{type:"card"},model:{value:e.dialogTabActive,callback:function(t){e.dialogTabActive=t},expression:"dialogTabActive"}},[a("el-tab-pane",{attrs:{label:"数据编辑",name:"dataMod"}},[a("el-form",{ref:"dialogForm",staticStyle:{"text-align":"left"},attrs:{model:e.dialogForm,inline:!0,rules:e.dialogFormRules}},[a("el-form-item",{style:e.formItemStyle,attrs:{label:"规则名称:","label-width":e.formLabelWidth,prop:"rule_shortdesc"}},[a("el-input",{style:e.formItemContentStyle,attrs:{"auto-complete":"off",maxlength:128},model:{value:e.dialogForm.rule_shortdesc,callback:function(t){e.$set(e.dialogForm,"rule_shortdesc",t)},expression:"dialogForm.rule_shortdesc"}})],1),e._v(" "),a("el-form-item",{staticClass:"is-required",style:e.formItemStyle,attrs:{label:"规则条件:","label-width":e.formLabelWidth,prop:"rule_cond_in"}},[a("div",{on:{dblclick:e.ruleCondInPopup}},[a("el-input",{style:e.formItemContentStyle,attrs:{"auto-complete":"off",readonly:""},model:{value:e.dialogForm.rule_cond_in,callback:function(t){e.$set(e.dialogForm,"rule_cond_in",t)},expression:"dialogForm.rule_cond_in"}}),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],style:e.formItemContentStyle,attrs:{"auto-complete":"off",readonly:""},model:{value:e.dialogForm.rule_cond,callback:function(t){e.$set(e.dialogForm,"rule_cond",t)},expression:"dialogForm.rule_cond"}})],1)]),e._v(" "),a("el-form-item",{style:e.formItemStyle,attrs:{label:"评估类型:","label-width":e.formLabelWidth,prop:"eval_type"}},[a("el-select",{style:e.formItemContentStyle,attrs:{placeholder:"请选择",clearable:""},model:{value:e.dialogForm.eval_type,callback:function(t){e.$set(e.dialogForm,"eval_type",t)},expression:"dialogForm.eval_type"}},e._l(e.evalTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{style:e.formItemStyle,attrs:{label:"处置方式:","label-width":e.formLabelWidth,prop:"disposal"}},[a("el-select",{style:e.formItemContentStyle,attrs:{placeholder:"请选择",clearable:""},model:{value:e.dialogForm.disposal,callback:function(t){e.$set(e.dialogForm,"disposal",t)},expression:"dialogForm.disposal"}},e._l(e.disposalList,function(e){return a("el-option",{key:e.dp_code,attrs:{label:e.dp_name,value:e.dp_code}})}))],1),e._v(" "),a("el-form-item",{style:e.formItemStyle,attrs:{label:"分值:","label-width":e.formLabelWidth,prop:"rule_score"}},[a("el-input",{style:e.formItemContentStyle,attrs:{"auto-complete":"off"},model:{value:e.dialogForm.rule_score,callback:function(t){e.$set(e.dialogForm,"rule_score",t)},expression:"dialogForm.rule_score"}})],1),e._v(" "),a("el-form-item",{staticClass:"is-required",style:e.formItemStyle,attrs:{label:"是否测试:","label-width":e.formLabelWidth,prop:"rule_istest"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.dialogForm.rule_istest,callback:function(t){e.$set(e.dialogForm,"rule_istest",t)},expression:"dialogForm.rule_istest"}})],1),e._v(" "),a("el-form-item",{staticClass:"is-required",style:e.formItemStyle,attrs:{label:"有效性:","label-width":e.formLabelWidth,prop:"rule_enable"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.dialogForm.rule_enable,callback:function(t){e.$set(e.dialogForm,"rule_enable",t)},expression:"dialogForm.rule_enable"}})],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"规则描述:","label-width":e.formLabelWidth,prop:"rule_desc"}},[a("el-input",{style:e.textareaContentStyle,attrs:{type:"textarea",maxlength:1024},model:{value:e.dialogForm.rule_desc,callback:function(t){e.$set(e.dialogForm,"rule_desc",t)},expression:"dialogForm.rule_desc"}})],1)],1),e._v(" "),a("el-form-item",{style:e.formItemStyle,attrs:{label:" ","label-width":e.formLabelWidth}},[a("el-button",{attrs:{type:"primary",disabled:e.dialogFormSureBtnDisabled},on:{click:function(t){e.submitForm("dialogForm")}}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1)],1),e._v(" "),"edit"===e.dialogType?a("el-tab-pane",{attrs:{label:"动作列表",name:"actionList"}},[a("div",{staticStyle:{"margin-bottom":"10px","text-align":"left"}},[a("el-button",{staticClass:"el-icon-plus",attrs:{plain:""},on:{click:function(t){e.openActionDialog("add")}}},[e._v("新建")])],1),e._v(" "),a("el-table",{ref:"actionDataTable",staticStyle:{width:"100%"},attrs:{data:e.actionTableDataShow}},[a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit",title:"编辑"},on:{click:function(a){e.openDialog("edit",t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-document",title:"复制"},on:{click:function(a){e.copy(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete",title:"删除"},on:{click:function(a){e.delData(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-location-outline",title:"引用点"},on:{click:function(a){e.openRefsDialog(t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ac_desc",label:"动作名称",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ac_cond_in",label:"动作条件",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ac_expr_in",label:"处理函数",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:"有效性",align:"left",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,disabled:e.acEnableBtnDisabled},on:{change:function(a){e.ruleEnableChange(t.row)}},model:{value:t.row.ac_enable,callback:function(a){e.$set(t.row,"ac_enable",a)},expression:"scope.row.ac_enable"}})]}}])})],1)],1):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:e.actionDialogTitle,visible:e.actionDialogVisible,width:"450px",modal:!1},on:{"update:visible":function(t){e.actionDialogVisible=t}}},[a("el-form",{ref:"actionDialogForm",staticStyle:{"text-align":"left"},attrs:{model:e.actionDialogForm,inline:!0}},[a("el-form-item",{style:e.formItemStyle,attrs:{label:"动作名称:","label-width":e.formLabelWidth,prop:"ac_desc"}},[a("el-input",{style:e.formItemContentStyle,attrs:{"auto-complete":"off"},model:{value:e.actionDialogForm.ac_desc,callback:function(t){e.$set(e.actionDialogForm,"ac_desc",t)},expression:"actionDialogForm.ac_desc"}})],1),e._v(" "),a("el-form-item",{style:e.formItemStyle,attrs:{label:"动作条件:","label-width":e.formLabelWidth,prop:"ac_cond_in"}},[a("div",{on:{dblclick:e.acCondInPopup}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],style:e.formItemContentStyle,attrs:{"auto-complete":"off",readonly:""},model:{value:e.actionDialogForm.ac_cond,callback:function(t){e.$set(e.actionDialogForm,"ac_cond",t)},expression:"actionDialogForm.ac_cond"}}),e._v(" "),a("el-input",{style:e.formItemContentStyle,attrs:{"auto-complete":"off",readonly:""},model:{value:e.actionDialogForm.ac_cond_in,callback:function(t){e.$set(e.actionDialogForm,"ac_cond_in",t)},expression:"actionDialogForm.ac_cond_in"}})],1)]),e._v(" "),a("el-form-item",{style:e.formItemStyle,attrs:{label:"处理函数:","label-width":e.formLabelWidth,prop:"ac_expr_in"}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],style:e.formItemContentStyle,attrs:{"auto-complete":"off",readonly:""},model:{value:e.actionDialogForm.ac_expr,callback:function(t){e.$set(e.actionDialogForm,"ac_expr",t)},expression:"actionDialogForm.ac_expr"}}),e._v(" "),a("el-input",{style:e.formItemContentStyle,attrs:{"auto-complete":"off",readonly:""},model:{value:e.actionDialogForm.ac_expr_in,callback:function(t){e.$set(e.actionDialogForm,"ac_expr_in",t)},expression:"actionDialogForm.ac_expr_in"}})],1),e._v(" "),a("el-form-item",{style:e.formItemStyle,attrs:{label:"有效性:","label-width":e.formLabelWidth,prop:"ac_enable"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.actionDialogForm.ac_enable,callback:function(t){e.$set(e.actionDialogForm,"ac_enable",t)},expression:"actionDialogForm.ac_enable"}})],1)],1),e._v(" "),a("StatCondPicker",{ref:"acCondDialog",attrs:{statCond:e.actionDialogForm.ac_cond,statCondIn:e.actionDialogForm.ac_cond_in,txnId:e.txnIdParent,hideItems:["rule_func"]},on:{valueCallback:e.acCondInValueCallBack}})],1)],1),e._v(" "),a("StatCondPicker",{ref:"RuleCondDialog",attrs:{statCond:e.dialogForm.rule_cond,statCondIn:e.dialogForm.rule_cond_in,txnId:e.txnIdParent,hideItems:["rule_func"]},on:{valueCallback:e.ruleCondInValueCallBack}}),e._v(" "),a("el-dialog",{attrs:{title:e.refsDialogTitle,visible:e.refsDialogVisible,width:"1000px"},on:{"update:visible":function(t){e.refsDialogVisible=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.refsTableData}},[a("el-table-column",{attrs:{prop:"st_name",label:"策略名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tab_desc",label:"所属交易"}}),e._v(" "),a("el-table-column",{attrs:{label:"评估方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("evalModeFilter")(t.row.eval_mode)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"规则执行方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("ruleExecModeFilter")(t.row.rule_exec_mode)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"rule_count",label:"规则数量"}}),e._v(" "),a("el-table-column",{attrs:{label:"创建时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("renderDateTime")(t.row.createtime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"修改时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("renderDateTime")(t.row.modifytime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"有效性"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("stEnableFilter")(t.row.st_enable)))])]}}])})],1)],1)],1)},staticRenderFns:[]},Ye={created:function(){this.selTree()},data:function(){return{toolBtn:{addBtn:!0,delBtn:!0},txnId:"T",tabVisibility:{trandefVisibility:!0,tranmdlVisibility:!1,statVisibility:!1,ruleVisibility:!1},treeList:[],treeData:[],expendKey:["T"],defaultProps:{children:"children",label:"text"},breadcrumbData:[],activeName:"trandef"}},methods:{renderContent:function(e,t){var a=t.node;t.data,t.store;return 0===a.data.enable?e("span",{class:"el-tree-node__label disabledFlag"},[a.label]):e("span",{class:"el-tree-node__label"},[a.label])},selTree:function(){var e=this,t={url:"/trandef/query",success:function(t){t.list&&(e.treeList=t.list,e.treeData=e.formatTreeData(t.list))}};G.post(t)},formatTreeData:function(e,t){function a(e,t){var l=[];for(var i in e){var o=e[i];o.fid===t&&(o.children=a(e,o.id),l.push(o))}return l}var l=[];if(void 0===t||0===t.length){t=[];for(var i in e)void 0!==e[i].fid&&null!==e[i].fid&&""!==e[i].fid||t.push(e[i])}0===t.length&&(console.error("根节点不存在，请确认树结构是否正确"),console.info("树结构的根节点是fid不存在（或为空）的节点，否则需手动添加指定得根节点（参数）"));for(var o in t){var r=t[o];r.children=a(e,r.id),l.push(r)}return l},expendNodesByLevel:function(e){for(var t=[],a=this.treeData[0],l=1;l<=e;)t.push(a.id),a=a.children[0],l++;this.expendKey=t},handleNodeClick:function(e,t){this.txnId!==e.id&&(this.showToolBtn(),this.txnId=e.id,this.activeName="trandef",this.tabVisibility={trandefVisibility:!0,tranmdlVisibility:!1,statVisibility:!1,ruleVisibility:!1},this.syncBreadcrumb(t))},showToolBtn:function(e){if(e||(e=this.$refs.tab.value),"trandef"===e){var t=this.$refs.tree.getCurrentNode();t&&(this.toolBtn.addBtn=!(void 0===t.txnid||null===t.txnid||""===t.txnid.trim()),this.toolBtn.delBtn="T"===t.id)}else this.toolBtn.addBtn=!0,this.toolBtn.delBtn=!0},syncBreadcrumb:function(e){for(var t=[];null!==e.parent;)t.unshift({text:e.data.text}),e=e.parent;t[0].text="交易模型："+t[0].text,this.breadcrumbData=t},handleClick:function(e,t){switch(this.tabVisibility.trandefVisibility=!1,this.tabVisibility.tranmdlVisibility=!1,this.tabVisibility.statVisibility=!1,this.tabVisibility.ruleVisibility=!1,e.name){case"trandef":this.tabVisibility.trandefVisibility=!0;break;case"tranmdl":this.tabVisibility.tranmdlVisibility=!0;break;case"stat":this.tabVisibility.statVisibility=!0;break;case"rule":this.tabVisibility.ruleVisibility=!0}this.showToolBtn(e.name)},addFunc:function(){this.$refs.trandef.addFormVisible=!0},delFunc:function(){var e=this.$refs.tree.getCurrentNode(),t={tab_name:e.id,op:"del",tab_desc:e.tab_desc};this.$refs.trandef.delInfo(t)}},components:{Trandef:Ne,Tranmdl:Ae,Stat:a("/Xao")(Ge,He,!1,function(e){a("ftD4")},null,null).exports,Rule:a("/Xao")(Qe,Je,!1,function(e){a("jAsF")},null,null).exports}},et={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticStyle:{height:"100%",border:"1px solid #eee"}},[a("el-header",{staticStyle:{"background-color":"white"},attrs:{height:"38px"}},[a("el-breadcrumb",{staticStyle:{padding:"13px 0px"},attrs:{"separator-class":"el-icon-arrow-right"}},e._l(e.breadcrumbData,function(t){return a("el-breadcrumb-item",{key:t.text},[e._v(e._s(t.text))])}))],1),e._v(" "),a("el-container",{staticClass:"wrapper",staticStyle:{height:"100%","border-top":"1px solid #eee"}},[a("el-aside",{staticStyle:{"min-height":"400px",border:"0","border-right":"1px solid #eee"},attrs:{width:"200px"}},[a("div",{staticStyle:{height:"38px","margin-top":"5px","text-align":"left","border-bottom":"1px solid #eee"}},[a("el-button",{staticClass:"el-icon-plus",staticStyle:{"margin-left":"5px"},attrs:{plain:"",disabled:e.toolBtn.addBtn},on:{click:e.addFunc}},[e._v("新建\n        ")]),e._v(" "),a("el-button",{staticClass:"el-icon-delete",staticStyle:{"margin-left":"0px"},attrs:{plain:"",disabled:e.toolBtn.delBtn},on:{click:e.delFunc}},[e._v("删除\n        ")])],1),e._v(" "),a("el-tree",{ref:"tree",staticStyle:{"overflow-y":"auto"},attrs:{data:e.treeData,"node-key":"id",props:e.defaultProps,"highlight-current":!0,"default-expanded-keys":e.expendKey,"expand-on-click-node":!1,"render-content":e.renderContent},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),a("el-main",{staticStyle:{padding:"5px"}},[a("el-tabs",{ref:"tab",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticStyle:{"padding-left":"10px"},attrs:{label:"交易定义",name:"trandef"}},[a("trandef",{ref:"trandef",attrs:{txnId:e.txnId,isVisibility:e.tabVisibility.trandefVisibility}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"交易模型定义",name:"tranmdl"}},[a("tranmdl",{attrs:{txnId:e.txnId,isVisibility:e.tabVisibility.tranmdlVisibility}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"交易统计",name:"stat"}},[a("stat",{attrs:{txnId:e.txnId,isVisibility:e.tabVisibility.statVisibility}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"交易规则",name:"rule"}},[a("rule",{attrs:{txnId:e.txnId,isVisibility:e.tabVisibility.ruleVisibility}})],1)],1)],1)],1)],1)},staticRenderFns:[]},tt=a("/Xao")(Ye,et,!1,function(e){a("9LKP")},null,null).exports,at={computed:{notSelectOne:function(){return 1!==this.selectedRows.length}},mounted:function(){this.$nextTick(function(){this.getData()})},data:function(){return{tableData:[]}},methods:{getData:function(){var e=this;G.post({url:"/auth/modelList",param:{},success:function(t){t.page&&(e.tableData=t.page.list)}})},showData:function(e){this.$router.push({name:"authDataList",query:{modelname:e}})}}},lt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"模块名称",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){e.showData(t.row.modelname)}}},[e._v(e._s(t.row.modelname))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"count",label:"待授权信息数",align:"left"}})],1)],1)},staticRenderFns:[]},it=a("/Xao")(at,lt,!1,function(e){a("ehQg")},null,null).exports,ot={computed:{notSelectOne:function(){return 1!==this.selectedRows.length},txnnameRowShow:function(){return"名单管理"!==this.modelName},subOperateNumShow:function(){return"名单管理"===this.modelName||"交易配置"===this.modelName},datavalueLink:function(){return!("名单管理"===this.modelName||"交易配置"===this.modelName)}},data:function(){return{modelName:"",tableData:[],dialogTitle:"授权意见",dictDialogVisible:!1,dialogForm:this.initDialogForm(),rules:{auth_status:[{required:!0,message:"请选择是否通过授权",trigger:"blur"}],auth_msg:[{required:!0,message:"请输入授权说明",trigger:"blur"},{max:2048,message:"长度在2048个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}]},formLabelWidth:"130px",dialogType:"",currentPage:1,pageSize:10,total:0,selectRow:{},selectedRows:[]}},mounted:function(){this.$nextTick(function(){this.modelName=this.$route.query.modelname,this.getData()})},filters:{renderDateTime:function(e){return j.renderDateTime(e)}},methods:{initDialogForm:function(){return{auth_status:"1",auth_msg:""}},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.getData()},handleCurrentChange:function(e){this.currentPage=e,this.getData()},handleSelectionChange:function(e){this.selectedRows=e},bindGridData:function(e){this.tableData=e.page.list,this.currentPage=e.page.index,this.pageSize=e.page.size,this.total=e.page.total},toCompare:function(e){var t={operate_name:e.orig_operatename,table_name:e.query_table_name,table_pk:e.query_table_pk,table_pkvalue:e.query_pkvalue,auth_id:e.auth_id,modelName:this.modelName,flag:1};this.$router.push({name:"authDataCompare",query:t})},addData:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t,l=void 0,i=void 0,o=void 0,r="",n="",s=t.selectRow;l=s.auth_id,i=s.funcname,o=s.operatedata_value;var c=s.txnname;void 0!==c&&""!==c&&(r=c);var u=s.operatename;void 0!==u&&""!==u&&(n=u);var d={AUTH_IDS:l,FUNCNAME:i,TXNNAME:r,OPERATENAME:n,OPERATEDATA_VALUE:o,AUTH_STATUS:t.dialogForm.auth_status,AUTH_MSG:t.dialogForm.auth_msg};G.post({url:"/auth/modAuth",param:d,success:function(e){a.getData(),a.$message.success("授权成功"),a.dictDialogVisible=!1}})})},getData:function(){var e=this,t={modelName:this.modelName,pageindex:this.currentPage,pagesize:this.pageSize};G.post({url:"/auth/authList",param:t,success:function(t){t.page&&e.bindGridData(t)}})},showSub:function(e){var t={authId:e.auth_id,modelName:this.modelName};this.$router.push({name:"authSubDataList",query:t})},showLog:function(e){var t={authId:e.auth_id,modelName:this.modelName};this.$router.push({name:"authLogList",query:t})},auth:function(e){this.selectRow=e,this.dialogForm=this.initDialogForm(),this.dictDialogVisible=!0},submitForm:function(e){this.addData(e)},back:function(){this.$router.go(-1)}}},rt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px","text-align":"left"}},[a("el-button",{staticClass:"el-icon-back",attrs:{type:"primary"},on:{click:function(t){e.back()}}},[e._v("返回")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{fixed:"left",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.auth(t.row)}}},[e._v("授权")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.showSub(t.row)}}},[e._v("查看子操作")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.showLog(t.row)}}},[e._v("查看日志")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作数据",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.datavalueLink?a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){e.toCompare(t.row)}}},[e._v(e._s(t.row.datavalue))]):a("span",[e._v(e._s(t.row.datavalue))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"auth_id",label:"授权编号",align:"left"}}),e._v(" "),e.txnnameRowShow?a("el-table-column",{attrs:{prop:"txnname",label:"所属交易",align:"left"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"operatename",label:"操作名称",align:"left"}}),e._v(" "),e.subOperateNumShow?a("el-table-column",{attrs:{prop:"sub_operate_num",label:"子操作个数",align:"left"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"real_name",label:"提交授权人",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:"提交授权时间",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("renderDateTime")(t.row.proposer_time)))])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{"current-page":e.currentPage,"page-sizes":[10,25,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dictDialogVisible},on:{"update:visible":function(t){e.dictDialogVisible=t}}},[a("el-form",{ref:"dialogForm",staticStyle:{"text-align":"left"},attrs:{model:e.dialogForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"是否通过授权:","label-width":e.formLabelWidth,prop:"auth_status"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"2"},model:{value:e.dialogForm.auth_status,callback:function(t){e.$set(e.dialogForm,"auth_status",t)},expression:"dialogForm.auth_status"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"授权说明:","label-width":e.formLabelWidth,prop:"auth_msg"}},[a("el-input",{attrs:{type:"textarea",maxlength:2048},model:{value:e.dialogForm.auth_msg,callback:function(t){e.$set(e.dialogForm,"auth_msg",t)},expression:"dialogForm.auth_msg"}})],1),e._v(" "),a("el-form-item",{attrs:{label:" ","label-width":e.formLabelWidth}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("dialogForm")}}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:function(t){e.dictDialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)],1)},staticRenderFns:[]},nt=a("/Xao")(ot,rt,!1,function(e){a("8cYm")},null,null).exports,st={computed:{notSelectOne:function(){return 1!==this.selectedRows.length},txnnameRowShow:function(){return"名单管理"!==this.modelName},subOperateNumShow:function(){return"名单管理"===this.modelName||"交易配置"===this.modelName},datavalueLink:function(){return!("名单管理"===this.modelName||"交易配置"===this.modelName)}},data:function(){return{authId:"",modelName:"",tableData:[],dialogTitle:"",dictDialogVisible:!1,formLabelWidth:"130px",dialogType:"",currentPage:1,pageSize:10,total:0,selectedRows:[]}},mounted:function(){this.$nextTick(function(){this.modelName=this.$route.query.modelName,this.authId=this.$route.query.authId,this.getData()})},filters:{renderDateTime:function(e){return j.renderDateTime(e)}},methods:{handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.getData()},handleCurrentChange:function(e){this.currentPage=e,this.getData()},handleSelectionChange:function(e){this.selectedRows=e},bindGridData:function(e){this.tableData=e.page.list,this.currentPage=e.page.index,this.pageSize=e.page.size,this.total=e.page.total},getData:function(){var e=this,t={authId:this.authId,pageindex:this.currentPage,pagesize:this.pageSize};G.post({url:"/auth/toLog",param:t,success:function(t){t.page&&e.bindGridData(t)}})},back:function(){this.$router.go(-1)}}},ct={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px","text-align":"left"}},[a("el-button",{staticClass:"el-icon-back",attrs:{type:"primary"},on:{click:function(t){e.back()}}},[e._v("返回")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"real_name",label:"操作员",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"login_name",label:"用户名",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作时间",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("renderDateTime")(t.row.operate_time)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"func_name",label:"所属功能",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operate_result",label:"操作结果",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operate_data",label:"操作数据",align:"left"}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{"current-page":e.currentPage,"page-sizes":[10,25,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]},ut=a("/Xao")(st,ct,!1,function(e){a("ZeV0")},null,null).exports,dt={computed:{notSelectOne:function(){return 1!==this.selectedRows.length}},data:function(){return{modelName:"",authId:"",tableData:[],dialogTitle:"",dictDialogVisible:!1,formLabelWidth:"130px",dialogType:"",currentPage:1,pageSize:10,total:0,selectedRows:[]}},mounted:function(){this.$nextTick(function(){this.modelName=this.$route.query.modelName,this.authId=this.$route.query.authId,this.getData()})},filters:{renderDateTime:function(e){return j.renderDateTime(e)}},methods:{handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.getData()},handleCurrentChange:function(e){this.currentPage=e,this.getData()},handleSelectionChange:function(e){this.selectedRows=e},bindGridData:function(e){this.tableData=e.page.list,this.currentPage=e.page.index,this.pageSize=e.page.size,this.total=e.page.total},datavalueLink:function(e){return"TMS_COM_MTRAIN"!==e.table_name},toCompare:function(e){var t={operate_name:e.operate_name,table_name:e.table_name,table_pk:e.table_pk,table_pkvalue:e.table_pkvalue,auth_id:e.auth_id,modelName:this.modelName,flag:1};this.$router.push({name:"authDataCompare",query:t})},getData:function(){var e=this,t={authId:this.authId,pageindex:this.currentPage,pagesize:this.pageSize};G.post({url:"/auth/listSubOperate",param:t,success:function(t){t.page&&e.bindGridData(t)}})},back:function(){this.$router.go(-1)}}},mt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px","text-align":"left"}},[a("el-button",{staticClass:"el-icon-back",attrs:{type:"primary"},on:{click:function(t){e.back()}}},[e._v("返回")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"操作数据",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.datavalueLink(t.row)?a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){e.toCompare(t.row)}}},[e._v(e._s(t.row.operatedata_value))]):a("span",[e._v(e._s(t.row.operatedata_value))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"is_main",label:"是否为初始操作",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operate_name",label:"子操作名称",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"real_name",label:"操作人",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作时间",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("renderDateTime")(t.row.operate_time)))])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{"current-page":e.currentPage,"page-sizes":[10,25,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]},ft=a("/Xao")(dt,mt,!1,function(e){a("8AI5")},null,null).exports,pt={mounted:function(){this.$nextTick(function(){this.modelName=this.$route.query.modelName,this.tableName=this.$route.query.table_name,this.tablePk=this.$route.query.table_pk,this.tablePkvalue=this.$route.query.table_pkvalue,this.getData()})},filters:{renderDateTime:function(e){return j.renderDateTime(e)},renderDate:function(e){return j.renderDate(e)}},data:function(){return{modelName:"",tableName:"",tablePk:"",tablePkvalue:"",tableData:[]}},methods:{getData:function(){var e=this,t={table_name:this.tableName,table_pk:this.tablePk,table_pkvalue:this.tablePkvalue};G.post({url:"/auth/dataCompare",param:t,success:function(t){t.page&&(e.tableData=t.page.list)}})},back:function(){this.$router.go(-1)}}},ht={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px","text-align":"left"}},[a("el-button",{staticClass:"el-icon-back",attrs:{type:"primary"},on:{click:function(t){e.back()}}},[e._v("返回")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"col_num",label:"序号",align:"left",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"field_name",label:"属性名称",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{label:"新值",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{"red-span":t.row.new_value!==t.row.old_value}},["date"===t.row.type?a("span",[e._v(e._s(e._f("renderDate")(t.row.new_value)))]):"datetime"===t.row.type?a("span",[e._v(e._s(e._f("renderDateTime")(t.row.new_value)))]):a("span",[e._v(e._s(t.row.new_value))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"旧值",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:{"green-span":t.row.new_value!==t.row.old_value}},["date"===t.row.type?a("span",[e._v(e._s(e._f("renderDate")(t.row.old_value)))]):"datetime"===t.row.type?a("span",[e._v(e._s(e._f("renderDateTime")(t.row.old_value)))]):a("span",[e._v(e._s(t.row.old_value))])])]}}])})],1)],1)},staticRenderFns:[]},gt=a("/Xao")(pt,ht,!1,function(e){a("27eR")},null,null).exports,bt={computed:{categoryIdReadonly:function(){return"edit"===this.dialogType},notSelectOne:function(){return 1!==this.selectedRows.length}},data:function(){var e=this;return{inline:!0,dialogTitle:"",infoDialogTitle:"",dictDialogVisible:!1,infoDialogVisible:!1,formLabelWidth:"130px",dialogType:"",infoDialogType:"",currentPage:1,pageSize:10,total:0,queryShowForm:{category_id:"",category_name:""},queryForm:{category_id:"",category_name:""},dictData:[],dictInfoData:[],dictInfoShow:!1,selectedRows:[],selectRow:{},showDictInfoRow:{},dictDialogForm:this.initDialogForm(),dictInfoDialogForm:{code_id:"",category_id:"",code_key:"",code_value:"",onum:"",info:""},queryRules:{category_id:[{max:50,message:"长度在50个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}],category_name:[{max:50,message:"长度在50个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}]},rules:{category_id:[{required:!0,message:"请输入代码类别key",trigger:"blur"},{max:50,message:"长度在50个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"},{validator:function(t,a,l){"edit"===e.dialogType&&e.selectRow.category_id===a?l():G.post({url:"/codedict/check/categoryId",param:{categoryId:a},success:function(e){if(!1===e.checkresult)return l(new Error("该代码类别key已存在"));l()}})},trigger:"blur"}],category_name:[{required:!0,message:"请输入代码类别value",trigger:"blur"},{max:50,message:"长度在50个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}],category_sql:[{max:50,message:"长度在50个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}],info:[{max:200,message:"长度在200个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}]},infoRules:{category_id:[{required:!0,message:"请输入代码类别key",trigger:"blur"},{max:50,message:"长度在50个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}],code_key:[{required:!0,message:"请输入代码key",trigger:"blur"},{max:50,message:"长度在50个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}],code_value:[{required:!0,message:"请输入代码value",trigger:"blur"},{max:50,message:"长度在50个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}],onum:[{pattern:/^[1-9]\d{0,2}$/,message:"顺序最多只能输入3位数字"}],info:[{max:200,message:"长度在200个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}]}}},mounted:function(){this.$nextTick(function(){this.getData()})},methods:{initDialogForm:function(){return{category_id:"",category_name:"",category_sql:"",info:""}},initInfoDialogForm:function(){return{category_id:"",code_key:"",code_value:"",onum:"",info:""}},searchData:function(e){this.dictInfoShow=!1,$()(this.queryForm,this.queryShowForm),this.getData()},getData:function(){var e=this,t={pageindex:this.currentPage,pagesize:this.pageSize};this.dictInfoShow=!1;var a=j.toggleObjKey(this.queryForm,"upper");$()(t,a),G.post({url:"/codedict/category/list",param:t,success:function(t){t.page&&e.bindGridData(t)}})},addData:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t,l=t.dictDialogForm;G.post({url:"/codedict/category/add",param:l,success:function(e){a.getData(),a.$message.success("添加成功"),a.dictDialogVisible=!1}})})},addInfoData:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t,l=t.dictInfoDialogForm;G.post({url:"/codedict/code/add",param:l,success:function(e){a.handleSelectionChange(a.showDictInfoRow),a.$message.success("添加成功"),a.infoDialogVisible=!1}})})},delData:function(e){var t=this,a=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){G.post({url:"/codedict/category/del",param:{categoryId:e.category_id},success:function(e){a.$message.success("删除成功"),a.getData()}})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},delInfoData:function(e){var t=this,a=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){G.post({url:"/codedict/code/del",param:{codeId:e.code_id},success:function(e){a.$message.success("删除成功"),a.handleSelectionChange(a.showDictInfoRow)}})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},updData:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t,l=t.dictDialogForm;G.post({url:"/codedict/category/update",param:l,success:function(e){a.getData(),a.$message.success("编辑成功"),a.dictDialogVisible=!1}})})},updInfoData:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t,l=t.dictInfoDialogForm;G.post({url:"/codedict/code/update",param:l,success:function(e){a.handleSelectionChange(a.showDictInfoRow),a.$message.success("编辑成功"),a.infoDialogVisible=!1}})})},showData:function(e){this.$router.push({name:"codeDictInfo",query:{category_id:e.category_id}})},submitForm:function(e){"add"===this.dialogType?this.addData(e):"edit"===this.dialogType&&this.updData(e)},infoSubmitForm:function(e){"add"===this.infoDialogType?this.addInfoData(e):"edit"===this.infoDialogType&&this.updInfoData(e)},bindGridData:function(e){this.dictData=e.page.list,this.currentPage=e.page.index,this.pageSize=e.page.size,this.total=e.page.total},handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.getData()},handleCurrentChange:function(e){this.currentPage=e,this.getData()},handleSelectionChange:function(e){if(null!=e){this.dictInfoShow=!0,this.showDictInfoRow=e;var t=this,a={categoryId:this.showDictInfoRow.category_id,pageindex:1,pagesize:2147483647};G.post({url:"/codedict/category/codelist",param:a,success:function(e){e.page&&(t.dictInfoData=e.page.list)}})}else this.dictInfoShow=!1},openDialog:function(e,t){this.dialogType=e,"edit"===e?(this.selectRow=t,this.dialogTitle="编辑代码类别",$()(this.dictDialogForm,t)):"add"===e&&(this.dialogTitle="新建代码类别",this.dictDialogForm=this.initDialogForm()),this.dictDialogVisible=!0,this.$refs.dictDialogForm&&this.$refs.dictDialogForm.clearValidate()},openInfoDialog:function(e,t){this.infoDialogType=e,"edit"===e?(this.infoDialogTitle="编辑字典信息",$()(this.dictInfoDialogForm,t)):"add"===e&&(this.infoDialogTitle="新建字典信息",this.dictInfoDialogForm=this.initInfoDialogForm(),this.dictInfoDialogForm.category_id=this.showDictInfoRow.category_id),this.infoDialogVisible=!0,this.$refs.dictInfoDialogForm&&this.$refs.dictInfoDialogForm.clearValidate()}}},vt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticStyle:{height:"100%",border:"1px solid #eee"}},[a("el-col",{staticStyle:{"border-right":"1px solid #eee"},attrs:{span:12}},[a("div",{staticStyle:{height:"38px","margin-top":"5px","text-align":"left","border-bottom":"1px solid #eee","margin-left":"10px"}},[a("el-row",[a("el-col",{attrs:{span:16}},[a("el-button",{staticClass:"el-icon-plus",attrs:{plain:""},on:{click:function(t){e.openDialog("add")}}},[e._v("新建")])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticStyle:{"margin-right":"10px"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:50,placeholder:"请输入搜索内容"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.searchData("queryShowForm")}},model:{value:e.queryShowForm.category_id,callback:function(t){e.$set(e.queryShowForm,"category_id",t)},expression:"queryShowForm.category_id"}})],1)])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dictData,"highlight-current-row":""},on:{"current-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit",title:"编辑"},on:{click:function(a){e.openDialog("edit",t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete",title:"删除"},on:{click:function(a){e.delData(t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"category_id",label:"代码类别key",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"category_name",label:"代码类别value",align:"left"}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{"current-page":e.currentPage,"page-sizes":[10,25,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-col",{staticStyle:{"border-right":"1px solid #eee"},attrs:{span:12}},[a("div",{staticStyle:{height:"38px","margin-top":"5px","text-align":"left","border-bottom":"1px solid #eee","margin-left":"10px"}},[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.dictInfoShow,expression:"dictInfoShow"}]},[a("el-button",{staticClass:"el-icon-plus",attrs:{plain:""},on:{click:function(t){e.openInfoDialog("add")}}},[e._v("新建")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.dictInfoShow,expression:"dictInfoShow"}],staticStyle:{width:"100%"},attrs:{data:e.dictInfoData}},[a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit",title:"编辑"},on:{click:function(a){e.openInfoDialog("edit",t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete",title:"删除"},on:{click:function(a){e.delInfoData(t.row)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"code_key",label:"代码key",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code_value",label:"代码value",align:"left"}})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dictDialogVisible},on:{"update:visible":function(t){e.dictDialogVisible=t}}},[a("el-form",{ref:"dictDialogForm",staticStyle:{"text-align":"left"},attrs:{model:e.dictDialogForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"代码类别key:","label-width":e.formLabelWidth,prop:"category_id"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:e.categoryIdReadonly,maxlength:50},model:{value:e.dictDialogForm.category_id,callback:function(t){e.$set(e.dictDialogForm,"category_id",t)},expression:"dictDialogForm.category_id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代码类别value:","label-width":e.formLabelWidth,prop:"category_name"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:50},model:{value:e.dictDialogForm.category_name,callback:function(t){e.$set(e.dictDialogForm,"category_name",t)},expression:"dictDialogForm.category_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代码类别sql:","label-width":e.formLabelWidth,prop:"category_sql"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:50},model:{value:e.dictDialogForm.category_sql,callback:function(t){e.$set(e.dictDialogForm,"category_sql",t)},expression:"dictDialogForm.category_sql"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述信息:","label-width":e.formLabelWidth,prop:"info"}},[a("el-input",{attrs:{type:"textarea",maxlength:200},model:{value:e.dictDialogForm.info,callback:function(t){e.$set(e.dictDialogForm,"info",t)},expression:"dictDialogForm.info"}})],1),e._v(" "),a("el-form-item",{attrs:{label:" ","label-width":e.formLabelWidth}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("dictDialogForm")}}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:function(t){e.dictDialogVisible=!1}}},[e._v("取 消")])],1)],1)],1),e._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:e.infoDialogTitle,visible:e.infoDialogVisible},on:{"update:visible":function(t){e.infoDialogVisible=t}}},[a("el-form",{ref:"dictInfoDialogForm",attrs:{model:e.dictInfoDialogForm,rules:e.infoRules}},[a("el-form-item",{attrs:{label:"代码类别key:","label-width":e.formLabelWidth,prop:"category_id"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0,maxlength:50},model:{value:e.dictInfoDialogForm.category_id,callback:function(t){e.$set(e.dictInfoDialogForm,"category_id",t)},expression:"dictInfoDialogForm.category_id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代码key:","label-width":e.formLabelWidth,prop:"code_key"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:50},model:{value:e.dictInfoDialogForm.code_key,callback:function(t){e.$set(e.dictInfoDialogForm,"code_key",t)},expression:"dictInfoDialogForm.code_key"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代码value:","label-width":e.formLabelWidth,prop:"code_value"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:50},model:{value:e.dictInfoDialogForm.code_value,callback:function(t){e.$set(e.dictInfoDialogForm,"code_value",t)},expression:"dictInfoDialogForm.code_value"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"顺序:","label-width":e.formLabelWidth,prop:"onum"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:3},model:{value:e.dictInfoDialogForm.onum,callback:function(t){e.$set(e.dictInfoDialogForm,"onum",t)},expression:"dictInfoDialogForm.onum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述信息:","label-width":e.formLabelWidth,prop:"info"}},[a("el-input",{attrs:{type:"textarea",maxlength:200},model:{value:e.dictInfoDialogForm.info,callback:function(t){e.$set(e.dictInfoDialogForm,"info",t)},expression:"dictInfoDialogForm.info"}})],1),e._v(" "),a("el-form-item",{attrs:{label:" ","label-width":e.formLabelWidth}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.infoSubmitForm("dictInfoDialogForm")}}},[e._v("保 存")]),e._v(" "),a("el-button",{on:{click:function(t){e.infoDialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)],1)},staticRenderFns:[]},_t=a("/Xao")(bt,vt,!1,function(e){a("AaoM")},null,null).exports,yt={computed:{notSelectOne:function(){return 1!==this.selectedRows.length}},data:function(){return{tableData:[],dialogTitle:"",dictDialogVisible:!1,formLabelWidth:"130px",dialogType:"",currentPage:1,pageSize:10,total:0,selectedRows:[],categoryId:"",dictDialogForm:{code_id:"",category_id:"",code_key:"",code_value:"",onum:"",info:""},rules:{category_id:[{required:!0,message:"请输入代码类别key",trigger:"blur"},{max:50,message:"长度在50个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}],code_key:[{required:!0,message:"请输入代码key",trigger:"blur"},{max:50,message:"长度在50个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}],code_value:[{required:!0,message:"请输入代码value",trigger:"blur"},{max:50,message:"长度在50个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}],onum:[{pattern:/^[1-9]\d{0,2}$/,message:"顺序最多只能输入3位数字"}],info:[{max:200,message:"长度在200个字符以内",trigger:"blur"},{validator:te.checkFormSpecialCode,trigger:"blur"}]}}},mounted:function(){this.$nextTick(function(){this.categoryId=this.$route.query.category_id,this.getData()})},methods:{handleSizeChange:function(e){this.currentPage=1,this.pageSize=e,this.getData()},handleCurrentChange:function(e){this.currentPage=e,this.getData()},handleSelectionChange:function(e){this.selectedRows=e},bindGridData:function(e){this.tableData=e.page.list,this.currentPage=e.page.index,this.pageSize=e.page.size,this.total=e.page.total},initDialogForm:function(){return{category_id:"",code_key:"",code_value:"",onum:"",info:""}},openDialog:function(e,t){this.dialogType=e,"edit"===e?(this.dialogTitle="编辑字典信息",$()(this.dictDialogForm,t)):"add"===e&&(this.dialogTitle="新建字典信息",this.dictDialogForm=this.initDialogForm(),this.dictDialogForm.category_id=this.categoryId),this.dictDialogVisible=!0,this.$refs.dictDialogForm&&this.$refs.dictDialogForm.clearValidate()},submitForm:function(e){"add"===this.dialogType?this.addData(e):"edit"===this.dialogType&&this.updData(e)},addData:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t,l=t.dictDialogForm;G.post({url:"/codedict/code/add",param:l,success:function(e){a.getData(),a.$message.success("添加成功"),a.dictDialogVisible=!1}})})},getData:function(){var e=this,t={categoryId:this.categoryId,pageindex:this.currentPage,pagesize:this.pageSize};G.post({url:"/codedict/category/codelist",param:t,success:function(t){t.page&&e.bindGridData(t)}})},delData:function(e){var t=this,a=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){G.post({url:"/codedict/code/del",param:{codeId:e.code_id},success:function(e){a.$message.success("删除成功"),a.getData()}})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},updData:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t,l=t.dictDialogForm;G.post({url:"/codedict/code/update",param:l,success:function(e){a.getData(),a.$message.success("编辑成功"),a.dictDialogVisible=!1}})})},back:function(){this.$router.push({name:"codedict"})}}},Ft={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px","text-align":"left"}},[a("el-button",{staticClass:"el-icon-back",attrs:{type:"primary"},on:{click:function(t){e.back()}}},[e._v("返回")]),e._v(" "),a("el-button",{staticClass:"el-icon-plus",attrs:{plain:""},on:{click:function(t){e.openDialog("add")}}},[e._v("新建")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{fixed:"left",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.openDialog("edit",t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.delData(t.row)}}},[e._v("删除")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"category_id",label:"类别代码",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"category_name",label:"类别名称",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code_key",label:"代码key",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"code_value",label:"代码value",align:"left"}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{"current-page":e.currentPage,"page-sizes":[10,25,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dictDialogVisible},on:{"update:visible":function(t){e.dictDialogVisible=t}}},[a("el-form",{ref:"dictDialogForm",attrs:{model:e.dictDialogForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"代码类别key:","label-width":e.formLabelWidth,prop:"category_id"}},[a("el-input",{attrs:{"auto-complete":"off",disabled:!0,maxlength:50},model:{value:e.dictDialogForm.category_id,callback:function(t){e.$set(e.dictDialogForm,"category_id",t)},expression:"dictDialogForm.category_id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代码key:","label-width":e.formLabelWidth,prop:"code_key"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:50},model:{value:e.dictDialogForm.code_key,callback:function(t){e.$set(e.dictDialogForm,"code_key",t)},expression:"dictDialogForm.code_key"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"代码value:","label-width":e.formLabelWidth,prop:"code_value"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:50},model:{value:e.dictDialogForm.code_value,callback:function(t){e.$set(e.dictDialogForm,"code_value",t)},expression:"dictDialogForm.code_value"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"顺序:","label-width":e.formLabelWidth,prop:"onum"}},[a("el-input",{attrs:{"auto-complete":"off",maxlength:3},model:{value:e.dictDialogForm.onum,callback:function(t){e.$set(e.dictDialogForm,"onum",t)},expression:"dictDialogForm.onum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"描述信息:","label-width":e.formLabelWidth,prop:"info"}},[a("el-input",{attrs:{type:"textarea",maxlength:200},model:{value:e.dictDialogForm.info,callback:function(t){e.$set(e.dictDialogForm,"info",t)},expression:"dictDialogForm.info"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dictDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("dictDialogForm")}}},[e._v("保 存")])],1)],1)],1)},staticRenderFns:[]},Dt=a("/Xao")(yt,Ft,!1,function(e){a("f9qI")},null,null).exports,wt=null,xt={computed:{timeCountShow:function(){return 0!==this.timeCount},timeCountStr:function(){var e=0,t=0,a=0;return(e=parseInt(this.timeCount/60/60))<10&&(e="0"+e),(t=parseInt(this.timeCount/60%60))<10&&(t="0"+t),(a=parseInt(this.timeCount%60))<10&&(a="0"+a),e+":"+t+":"+a},IPProgressStatus:function(){return 100===this.IPProgress?"success":""},cityProgressStatus:function(){return 100===this.cityProgress?"success":""},cardProgressStatus:function(){return 100===this.cardProgress?"success":""},mobileProgressStatus:function(){return 100===this.mobileProgress?"success":""}},data:function(){return{timeCount:0,IPProgressShow:!1,cityProgressShow:!1,cardProgressShow:!1,mobileProgressShow:!1,IPProgress:0,cityProgress:0,cardProgress:0,mobileProgress:0,upload_url:"higitech",uploadForm:new FormData,rules:{}}},methods:{submitForm:function(){this.uploadForm=new FormData;var e=!1,t=!1,a=!1,l=!1,i="",o="",r="",n="";try{var s=this.$refs.importIPFile.$data.uploadFiles,c=this.$refs.importCityFile.$data.uploadFiles,u=this.$refs.importCardFile.$data.uploadFiles,d=this.$refs.importMobileFile.$data.uploadFiles;s&&s[0]&&(e=!0,i=s[0].name),c&&c[0]&&(t=!0,o=c[0].name),u&&u[0]&&(a=!0,r=u[0].name),d&&d[0]&&(l=!0,n=d[0].name)}catch(e){console.log(e)}if(e)if(t)if(a)if(l)if(i.endsWith(".csv"))if(o.endsWith(".csv"))if(r.endsWith(".csv"))if(n.endsWith(".csv")){this.$refs.importIPFile.submit(),this.$refs.importCityFile.submit(),this.$refs.importCardFile.submit(),this.$refs.importMobileFile.submit();var m=this;this.progressReset(),this.timeCount=0;try{window.clearInterval(wt)}catch(e){}e&&(this.IPProgressShow=!0),t&&(this.cityProgressShow=!0),a&&(this.cardProgressShow=!0),l&&(this.mobileProgressShow=!0),G.post({url:"/ip/import",param:m.uploadForm,success:function(e){m.uploadForm=new FormData,G.post({url:"/ip/recordImpInfo",param:{},success:function(){wt=window.setInterval(m.getImportProgress,1e3)}})},error:function(e){m.uploadForm=new FormData,m.$message(e.error),m.progressReset();try{window.clearInterval(wt)}catch(e){}},fail:function(e){m.uploadForm=new FormData,m.$message("导入文件发生错误"),console.log(e),m.progressReset();try{window.clearInterval(wt)}catch(e){}}})}else this.$message("手机号段文件必须为csv文件");else this.$message("身份证号段文件必须为csv文件");else this.$message("城市代码文件必须为csv文件");else this.$message("IP地址文件必须为csv文件");else this.$message("请选择手机号段文件");else this.$message("请选择身份证号段文件");else this.$message("请选择城市代码文件");else this.$message("请选择IP地址文件")},getImportProgress:function(){var e=this;G.post({url:"/ip/getProgress",param:{},success:function(t){var a=t.errorinfo,l=t.ipprogress,i=t.cityprogress,o=t.cardprogress,r=t.mobileprogress;if(console.log(l+"-"+i+"-"+o+"-"+r),e.IPProgress=l,e.cityProgress=i,e.cardProgress=o,e.mobileProgress=r,j.isEmpty(a)||(e.$message(a),console.log("clear timer"),window.clearInterval(wt)),e.timeCount++,30===e.timeCount&&0===l&&0===i&&0===o&&0===r&&(e.$message("导入文件发生错误"),window.clearInterval(wt)),!j.isEmpty(a)||!(l<100||i<100||o<100||r<100))try{console.log("clear timer"),window.clearInterval(wt)}catch(e){console.log(e)}}})},progressReset:function(){this.IPProgress=0,this.cityProgress=0,this.cardProgress=0,this.mobileProgress=0,this.IPProgressShow=!1,this.cityProgressShow=!1,this.cardProgressShow=!1,this.mobileProgressShow=!1},importIPFile:function(e){return this.uploadForm.append("importIPFile",e),this.$refs.importIPFile.abort(),!1},importCityFile:function(e){return this.uploadForm.append("importCityFile",e),this.$refs.importIPFile.abort(),!1},importCardFile:function(e){return this.uploadForm.append("importCardFile",e),this.$refs.importIPFile.abort(),!1},importMobileFile:function(e){return this.uploadForm.append("importMobileFile",e),this.$refs.importIPFile.abort(),!1},importIPFileFinish:function(){return!1},importCityFileFinish:function(){return!1},importCardFileFinish:function(){return!1},importMobileFileFinish:function(){return!1}}},St={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("IP地址维护")]),e._v(" "),a("el-row",{staticClass:"ip-content-box"},[e.timeCountShow?a("el-alert",{staticClass:"time-tip",attrs:{title:e.timeCountStr,type:"success",closable:!1,center:""}}):e._e(),e._v(" "),a("el-col",{attrs:{span:6}},[e.IPProgressShow?a("el-progress",{staticClass:"progress-box",attrs:{"text-inside":!0,"stroke-width":18,percentage:e.IPProgress,status:e.IPProgressStatus}}):e._e(),e._v(" "),a("el-container",[a("el-main",[a("el-upload",{ref:"importIPFile",staticClass:"ip-file-upload ipaddr-fie-upload",attrs:{accept:".csv",name:"importIPFileInput",drag:"",action:e.upload_url,limit:1,multiple:!1,"auto-upload":!1,"before-upload":e.importIPFile,"on-success":e.importIPFileFinish,"on-error":e.importIPFileFinish}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[a("em",[e._v("IP地址文件")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("请导入csv文件")])])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[e.cityProgressShow?a("el-progress",{staticClass:"progress-box",attrs:{"text-inside":!0,"stroke-width":18,percentage:e.cityProgress,status:e.cityProgressStatus}}):e._e(),e._v(" "),a("el-container",[a("el-main",[a("el-upload",{ref:"importCityFile",staticClass:"ip-file-upload ipaddr-fie-upload",attrs:{accept:".csv",name:"importCityFileInput",drag:"",action:e.upload_url,limit:1,multiple:!1,"auto-upload":!1,"before-upload":e.importCityFile,"on-success":e.importCityFileFinish,"on-error":e.importCityFileFinish}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[a("em",[e._v("城市代码文件")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("请导入csv文件")])])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[e.cardProgressShow?a("el-progress",{staticClass:"progress-box",attrs:{"text-inside":!0,"stroke-width":18,percentage:e.cardProgress,status:e.cardProgressStatus}}):e._e(),e._v(" "),a("el-container",[a("el-main",[a("el-upload",{ref:"importCardFile",staticClass:"ip-file-upload ipaddr-fie-upload",attrs:{accept:".csv",name:"importCardFileInput",drag:"",action:e.upload_url,limit:1,multiple:!1,"auto-upload":!1,"before-upload":e.importCardFile,"on-success":e.importCardFileFinish,"on-error":e.importCardFileFinish}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[a("em",[e._v("身份证号段文件")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("请导入csv文件")])])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[e.mobileProgressShow?a("el-progress",{staticClass:"progress-box",attrs:{"text-inside":!0,"stroke-width":18,percentage:e.mobileProgress,status:e.mobileProgressStatus}}):e._e(),e._v(" "),a("el-container",[a("el-main",[a("el-upload",{ref:"importMobileFile",staticClass:"ip-file-upload ipaddr-fie-upload",attrs:{accept:".csv",name:"importMobileFileInput",drag:"",action:e.upload_url,limit:1,multiple:!1,"auto-upload":!1,"before-upload":e.importMobileFile,"on-success":e.importMobileFileFinish,"on-error":e.importMobileFileFinish}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[a("em",[e._v("手机号段文件")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("请导入csv文件")])])],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"50px"}},[a("el-button",{staticClass:"submit-btn",attrs:{type:"success"},on:{click:function(t){e.submitForm()}}},[e._v("确定")])],1),e._v(" "),a("el-row")],1)},staticRenderFns:[]},kt=a("/Xao")(xt,St,!1,function(e){a("2WvI")},null,null).exports,Ct={created:function(){this.selLog(),this.selFunc()},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e)},handleSelectionChange:function(e){this.multipleSelection=e},bindGridData:function(e){this.roleData=e.page.list,this.currentPage=e.page.index,this.pagesize=e.page.size,this.total=e.page.total},selFunc:function(){var e=this,t={url:"/func/getAll",success:function(t){e.funcList=t.row}};G.post(t)},selLog:function(){var e=this,t="",a="";null!==e.value6&&e.value6.length>0&&(t=e.value6[0],a=e.value6[1]);var l={url:"/log/list",param:{operator_name:e.logForm.operator_name,operate_func:e.logForm.operate_func,operate_time:t,end_time:a,pageindex:1,pagesize:10},success:function(t){t.page&&e.bindGridData(t)}};G.post(l)},formatterDate:function(e,t){return j.renderDateTime(e.operate_time)}},data:function(){return{inline:!0,value6:[],funcList:[],logForm:{operator_name:"",operate_func:"",operate_time:"",end_time:""},roleData:[{operate_time:1513130185e3,func_name:"用户登录",operate_data:"用户名称:admin;",split_rows_num:1,log_mac:"530BB7696F839F0606CC375A201CBF74",operate_result:"1",log_id:"77564A9B988A40359DADCBE08D49D40A",real_name:"系统管理员",login_name:"admin"}],currentPage:4,pagesize:10,total:100,formLabelWidth:"100px",multipleSelection:[],flag:""}}},$t={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{staticStyle:{"text-align":"left"},attrs:{"label-position":"right","label-width":"80px",model:e.logForm,inline:e.inline}},[a("el-form-item",{attrs:{label:"操作员",prop:"operator_name"}},[a("el-input",{model:{value:e.logForm.operator_name,callback:function(t){e.$set(e.logForm,"operator_name",t)},expression:"logForm.operator_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属功能",prop:"operate_func"}},[a("el-select",{attrs:{placeholder:"所属功能"},model:{value:e.logForm.operate_func,callback:function(t){e.$set(e.logForm,"operate_func",t)},expression:"logForm.operate_func"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.funcList,function(e){return a("el-option",{key:e.func_id,attrs:{label:e.func_name,value:e.func_id}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"操作时间",prop:"real_name"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"到","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.value6,callback:function(t){e.value6=t},expression:"value6"}})],1)],1),e._v(" "),a("div",{staticStyle:{"margin-bottom":"10px","text-align":"left"}},[a("el-button",{staticClass:"el-icon-search",attrs:{type:"primary"},on:{click:e.selLog}},[e._v("查询")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleData,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"35",align:"left"}}),e._v(" "),a("el-table-column",{attrs:{prop:"real_name",label:"操作员",align:"left",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"login_name",label:"用户名",align:"left",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operate_time",label:"操作时间",align:"left",width:"100",formatter:e.formatterDate}}),e._v(" "),a("el-table-column",{attrs:{prop:"func_name",label:"所属功能",align:"left",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operate_result",label:"操作结果",align:"left",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operate_data",label:"操作数据",align:"left"}})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px","text-align":"right"},attrs:{"current-page":e.currentPage,"page-sizes":[10,25,50,100],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]},It=a("/Xao")(Ct,$t,!1,function(e){a("TPNC")},null,null).exports,Lt={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("交易事件查询")])])}]},Tt=a("/Xao")({},Lt,!1,function(e){a("tqU+")},null,null).exports,Vt={data:function(){return{value10:(new Date).format("yyyy-MM-dd hh:mm:ss"),defaultValue:new Date}}},Pt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("预警事件查询")]),e._v(" "),a("h2",[e._v("选择时间： "+e._s(e.value10))]),e._v(" "),a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","default-value":e.defaultValue},model:{value:e.value10,callback:function(t){e.value10=t},expression:"value10"}})],1)},staticRenderFns:[]},Rt=a("/Xao")(Vt,Pt,!1,function(e){a("2/Do")},null,null).exports,zt={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("404")]),this._v(" "),t("h2",[this._v("找不到该页面")])])}]},Nt=a("/Xao")({},zt,!1,function(e){a("0XQa")},null,null).exports;w.default.use(k.a);var qt=new k.a({mode:"history",base:j.getWebRootPath(),linkActiveClass:"active",routes:[{path:"/login_vue",name:"login",component:Q},{path:"/",name:"main",component:Y,meta:{requireAuth:!0},children:[{path:"user_vue",name:"user",component:ie},{path:"role_vue",name:"role",component:de},{path:"func_vue",name:"func",component:pe},{path:"valuelist_vue",name:"valuelist",component:we},{path:"list_vue",name:"list",component:be},{path:"namelist_vue",name:"namelist",component:ye},{path:"txn_vue",name:"txn",component:tt},{path:"authCenter_vue",name:"authCenter",component:it},{path:"authDataCompare_vue",name:"authDataCompare",component:gt},{path:"authDataList_vue",name:"authDataList",component:nt},{path:"authLogList_vue",name:"authLogList",component:ut},{path:"authSubDataList_vue",name:"authSubDataList",component:ft},{path:"codedict_vue",name:"codedict",component:_t},{path:"codeDictInfo_vue",name:"codeDictInfo",component:Dt},{path:"ipaddr_vue",name:"ipaddr",component:kt},{path:"log_vue",name:"log",component:It},{path:"txnEventQuery_vue",name:"txnEventQuery",component:Tt},{path:"alarmEventQuery_vue",name:"alarmEventQuery",component:Rt}]},{path:"*",name:"notFound",component:Nt}]}),Bt=a("FDFR"),Et=a.n(Bt);a("Uo1D");w.default.use(Et.a,{size:"small"}),w.default.prototype.$axios=L.a,w.default.config.productionTip=!1,se.getCodeData(),new w.default({el:"#app",router:qt,template:"<App/>",components:{App:S}})},TPNC:function(e,t){},Uo1D:function(e,t){},ZeV0:function(e,t){},ehQg:function(e,t){},f9qI:function(e,t){},ftD4:function(e,t){},jAsF:function(e,t){},k2ED:function(e,t){},kirL:function(e,t){},mU65:function(e,t){},pECu:function(e,t){},qnw5:function(e,t){},rSw5:function(e,t){},rlv6:function(e,t){},"tqU+":function(e,t){},wMv7:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.79fe816009eae4ec0955.js.map