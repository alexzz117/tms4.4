<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>#springMessage("view.tms.alarm.strategy.title")</title>
<link href="$rc.contextPath/s/common/css/page.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="$rc.contextPath/s/common/js/jquery.min.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/js/browser.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/js/jcl.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/tms35/js/commoncheck.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/env/env.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/env/message.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/js/jquery.url.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/js/validate.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/tms35/js/query/jcq.js"></script>
<script type="text/javascript">
var dualAudit = '${readonly}' == 'false';
var params = decodeURIComponent(jcq.util.getUrlParamsString());
$(document).ready(function(){
	var stForm = null, ruleHitGrid = null;
	jcl.postJSON('/tms35/rate/queryRateRules', params, function(data){
		var rules = data['ruleList'];
		
		jcl.postJSON('/tms35/rule/disposal', '', function(dpData){
			var dps = dpData.row;
			if (rules) {
				ruleHitGrid = new jcl.ui.Grid({
					title:'规则命中列表',
					marginTop:0,
					table:{
						checkboxEnable:false,
						columns:[
							{name:'规则名称', width: 50, dataIndex:'RULE_SHORTDESC'},
							{name:'规则条件', width: 60, dataIndex:'RULE_COND_IN'},
							{name:'风险类型', width: 12, dataIndex:'EVAL_TYPE', render:'tms.rule.evaltype'},
							{name:'分值', width: 8, dataIndex:'RULE_SCORE'},
							{name:'处置方式', width: 15, dataIndex:'DISPOSAL', render:function(v){
								for (var i = 0; i < dps.length; i++) {
									var dp = dps[i];
									var dp_code = dp['DP_CODE'];
									if(dp_code == v){
										return dp['DP_NAME'];
									}
								}
							}},
							{name:'执行耗时', width: 10, dataIndex:'NUMTIMES'}
						],
						pagebar: false
					}
				});
				ruleHitGrid.jqDom.css('padding-top', 8);
				ruleHitGrid.renderPage({list:rules});
			}
			jcq.common.autoSiteIframeHeight(true, params, dualAudit);
		}, false);
	}, false);
});
</script>
</head>
<body>
</body>
</html>