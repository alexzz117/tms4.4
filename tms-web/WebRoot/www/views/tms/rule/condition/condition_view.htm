<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>#springMessage("view.tms.rule.condition.view.title")</title>
<link href="$rc.contextPath/s/common/css/page.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="$rc.contextPath/s/common/js/jquery.min.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/js/browser.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/js/jcl.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/env/env.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/env/message.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/js/jquery.url.js"></script>
<script type="text/javascript">
$(document).ready(function(){
	
	var box = new jcl.ui.Box({
		title: '#springMessage("view.tms.rule.condition.view.title")',
		width:1150,
		id:'conditionFormBox'
	});
	box.addDom('dataForm');
	
	var conditionId = "conditionId="+jQuery.url.param("conditionId");
	jcl.postJSON('/tms/rule/condition/get', conditionId, function(data){
			document.getElementById("condname").innerHTML=data.row.CONDNAME;
			document.getElementById("globalid").innerHTML=data.row.GLOBALID;
			if(data.row.RISKTYPE!=null)
			{
			document.getElementById("risktype").innerHTML=data.row.RISKTYPE;
			}else
			{
				document.getElementById("risktype").innerHTML='';
			}
			var data = data.row.CONDDESC.split(";");
			var dataStr='';
			for(var i=0;i<data.length;i++){
				dataStr+=data[i]+"<br />";
			}
			dataStr=dataStr.substring(0,dataStr.length-6);
			document.getElementById("conddesc").innerHTML=dataStr;
	});
	
	
    var conId= jQuery.url.param("conditionId");
	//组装表格
	var g = $("#boxdiv").grid({
		title:'#springMessage("view.tms.rule.condparamgrp.list")',
		width:1135,
		height:175,
		checkboxEnable:false,
		columns:[
			{name:'#springMessage("view.tms.rule.condparam.add.condparamlabel")', width: 15, dataIndex:'CONDPARAMLABEL'},
			{name:'#springMessage("view.tms.rule.condparam.add.condparamname")', width: 15, dataIndex:'CONDPARAMNAME'},
		    {name:'#springMessage("view.tms.rule.condparam.add.defaultvalue")', width: 10, dataIndex:'DEFAULTVALUE'},
			{name:'#springMessage("view.tms.rule.condparam.add.condparamdesc")', width: 30, dataIndex:'CONDPARAMDESC'}
		],
		ds:{
			url:"/tms/rule/condition/getGroupParam",
			params:{conId:''+conId}
		},
		pagebar: true,
		qform: {id:"qform", display:false}

	});
	g.goPage();
	
	
	//组装表格
	var g = $("#boxdiv2").grid({
		title:'#springMessage("view.tms.rule.condparam.list")',
		width:1135,
		height:175,
		checkboxEnable:false,
		columns:[
			{name:'#springMessage("view.tms.rule.condparam.add.condparamlabel")', width: 15, dataIndex:'CONDPARAMLABEL'},
			{name:'#springMessage("view.tms.rule.condparam.add.condparamname")', width: 15, dataIndex:'CONDPARAMNAME'},
		    {name:'#springMessage("view.tms.rule.condparam.add.defaultvalue")', width: 10, dataIndex:'DEFAULTVALUE'},
			{name:'#springMessage("view.tms.rule.condparam.add.condparamdesc")', width: 30, dataIndex:'CONDPARAMDESC'}
		],
		ds:{
			url:"/tms/rule/condition/getParam",
			params:{conId:''+conId}
		},

		pagebar: true,
		qform: {id:"qform", display:false}

	});
	g.goPage();
	
	$('#cancelBtn').click(function(){
		jcl.go('/tms/rule/condition/list');
	});
});


</script>

</head>
<body>
<form name="dataForm" id="dataForm" method="post">
<ul class="list-box">
	<li class="list-box-item">
		<label class="list-box-item-label">#springMessage("view.tms.rule.condition.add.condname")：</label> 
		<span class="list-box-item-content" id="condname"></span>
	</li>
	<li class="list-box-item">
		<label class="list-box-item-label">#springMessage("view.tms.rule.condition.add.gloid")：</label> 
		<span class="list-box-item-content" id="globalid"></span>
	</li>
	<li class="list-box-item">
		<label class="list-box-item-label">#springMessage("view.tms.rule.condition.add.type")：</label> 
		<span class="list-box-item-content" id="risktype"></span>
	</li>
	<li class="list-box-item">
		<label class="list-box-item-label">#springMessage("view.tms.rule.condition.add.desc")：</label> 
		<span class="list-box-item-content" id="conddesc"></span>
	</li>
</ul>
<div id="boxdiv" class="box"></div>
<div id="boxdiv2" class="box"></div>
<div class="button-box">
	<input type="button" value='#springMessage("view.cmc.pub.btn.banck")' class="btn" id="cancelBtn"/>
</div>
</form>

</body>
</html>
