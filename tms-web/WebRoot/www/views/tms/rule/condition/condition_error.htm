<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>#springMessage("view.tms.rule.condition.import.title")</title>
<link href="$rc.contextPath/s/common/css/page.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="$rc.contextPath/s/common/js/jquery.min.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/js/browser.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/js/jcl.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/env/env.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/env/message.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/js/jquery.url.js"></script>
<script type="text/javascript">
$(document).ready(function(){
	
	var box = new jcl.ui.Box({
		title: '#springMessage("view.tms.pub.imp.flase")',
		id:'conditionFormBox'
	});
	box.addDom('dataForm');
	
	jcl.postJSON('/tms/rule/condition/getfiles', "", function(data){
	           if(data.row.fileerrortemp!=null)
                {
                var dataerrorfile = data.row.fileerrortemp;
		        var dataerror = data.row.fileerrortemp.split(",");
	            var dataStrerror='';
	            for(var i=0;i<dataerror.length;i++){
	            dataStrerror+=dataerror[i]+"<br/>";
	            }
	              dataStrerror=dataStrerror.substring(0,dataStrerror.length-6);
	              document.getElementById("conderrornumber").innerHTML=(dataerror.length-1);
	              document.getElementById("conditionerrorxml").innerHTML=dataerrorfile;
	            }
	
	           
	            if(data.row.filesuccesstemp!=null)
                {
                var datafile = data.row.filesuccesstemp;
		        var data = data.row.filesuccesstemp.split(",");
		        var dataStr='';
		        for(var i=0;i<data.length;i++){
	             dataStr+=data[i]+"<br/>";
	             }
	
	             dataStr=dataStr.substring(0,dataStr.length-6);
	   
	             document.getElementById("condnumber").innerHTML=(data.length-1);
	             document.getElementById("conditionxml").innerHTML=datafile;
		        }else
		        {
		         document.getElementById("condnumber").innerHTML=0;
	             document.getElementById("conditionxml").innerHTML="无";
		        }
		         

	        
	       
	});
	
	

	//组装表格
	var g = $("#boxdiv").grid({
		title:'#springMessage("view.tms.pub.imp.errorarray")',
		width:1150,
		height:325,checkboxEnable:false,
		columns:[
			{name:'#springMessage("view.tms.rule.condition.add.successname")', width: 8, dataIndex:'condname'},
			{name:'#springMessage("view.tms.pub.imp.errorarray")', width: 22, dataIndex:'conderinfo'}
		],
		ds:{
			url:"/tms/rule/condition/getErrorArray",
			params:{}
		},
		pagebar: true,
		qform: {id:"qform", display:false}

	});
	g.goPage();
	
	

	
	$('#cancelBtn').click(function(){
		jcl.go('/tms/rule/condition/list');
	});
});


</script>

</head>
<body>
<form name="dataForm" id="dataForm" method="post">
<ul class="list-box">
	<li class="list-box-item">
		<label class="list-box-item-label">#springMessage("view.tms.rule.condition.add.success")：</label> 
		<span class="list-box-item-content" id="condnumber"></span>#springMessage("view.tms.rule.condition.add.successnum")
	</li>
	<li class="list-box-item">
		<label class="list-box-item-label">#springMessage("view.tms.rule.condition.add.successname")：</label> 
		<span class="list-box-item-content" id="conditionxml"></span>
	</li>
		<li class="list-box-item">
		<label class="list-box-item-label">#springMessage("view.tms.rule.condition.add.false")：</label> 
		<span class="list-box-item-content" id="conderrornumber"></span>#springMessage("view.tms.rule.condition.add.successnum")
	</li>
		<li class="list-box-item">
		<label class="list-box-item-label">#springMessage("view.tms.rule.condition.add.successname")：</label> 
		<span class="list-box-item-content" id="conditionerrorxml"></span>
	</li>
</ul>
<div id="boxdiv" class="box"></div>
<div class="button-box">
	<input type="button" value='#springMessage("view.cmc.pub.btn.banck")' class="btn" id="cancelBtn"/>
</div>
</form>

</body>
</html>
