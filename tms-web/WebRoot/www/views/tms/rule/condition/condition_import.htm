<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>#springMessage("view.tms.rule.condition.view.title")</title>
<link href="$rc.contextPath/s/common/css/page.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="$rc.contextPath/s/common/js/jquery.min.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/js/browser.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/js/jcl.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/env/env.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/js/fun.js" charset="gb2312"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/js/fun-plugins.js" charset="gb2312"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/env/message.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/js/jquery.url.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/scms/js/jquery.request.js"></script>
<script type="text/javascript">
$(document).ready(function(){
	
   var box = new jcl.ui.Box({
		title: '#springMessage("view.tms.rule.condition.import.title")',
		id:'importConditionFormBox'
	});
	box.addDom('dataForm');
	


	
	
	/*
检查上传文件类型				
str						传入的字符
Msg						输入域标题,用于提示
返回值					true or false
*/
function FileType(str) {
	allowSubmit = false; 
	if (!str) {
		return false;
	}
	
	while (str.indexOf("\\") != -1){
		str = str.slice(str.indexOf("\\") + 1);
	}
	
	ext = str.slice(str.indexOf(".")).toLowerCase();	
	
	if(ext==".zip"){
		allowSubmit = true; 
	}
	return allowSubmit;
}
	
	$("#importfile").click(function(){
	
	if($("input[name='importFile']").val() == '' ||$("input[name='importFile']").val() == '' ) {
			alert('#springMessage("view.tms.rule.condition.impbody.title")!');
			return false;
		}
	if(!FileType($("input[name='importFile']").val())){
		alert('#springMessage("view.tms.rule.condition.impbody.onlyzip")!');
		return false;
	}
	window.document.dataForm.submit();    
});
	
	$('#cancelBtn').click(function(){
		jcl.go('/tms/rule/condition/list');
	});
	

});




</script>

</head>
<body>
<form id="dataForm" name="dataForm" action="$rc.contextPath/tms/rule/condition/uploadCond" method="post" enctype="multipart/form-data">
<ul class="list-box">
	<li class="list-box-item">

		<label width="14%">#springMessage("view.tms.rule.condition.impbody.title"):</label> 
		<span width="86%">
		<input name="importFile" id="upload" type="file" contentEditable="false">
		</span>
	 </li>
		<li class="list-box-item">
		<label width="14%">#springMessage("view.tms.rule.condition.impbody.limit"):</label> 
		<span width="86%">
		 <br>
	     #springMessage("view.tms.rule.condition.impbody.limitcond")<br>
	     #springMessage("view.tms.rule.condition.impbody.limitcondgroup")<br>
	     #springMessage("view.tms.rule.condition.impbody.limitparam")<br>
	     #springMessage("view.tms.rule.condition.impbody.limitrisktype")<br>
	     #springMessage("view.tms.rule.condition.impbody.limitsstype")<br>
		</span>
	</li>
</ul>
<div class="button-box">
	     <input type="button" value='#springMessage("view.tms.pub.btn.import")' class="btn" id="importfile"/>
		 <input type="button" value='#springMessage("view.cmc.pub.btn.banck")' class="btn" id="cancelBtn"/>   
</div>
</form>

</body>
</html>
