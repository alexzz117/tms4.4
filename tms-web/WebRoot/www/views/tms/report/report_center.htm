<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>#springMessage("view.tms.report.center.alert")</title>
<link href="$rc.contextPath/s/common/css/page.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="$rc.contextPath/s/tms/css/Style.css" type="text/css" />
<script type="text/javascript" src="$rc.contextPath/s/common/js/jquery.min.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/js/browser.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/js/jcl.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/env/env.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/common/env/message.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/tms/js/FusionCharts/FusionCharts.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/tms/js/FusionMaps/FusionMaps.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/tms/js/FusionWidgets/FusionCharts.js"></script>
<script type="text/javascript" src="$rc.contextPath/s/tms/js/PowerCharts/FusionCharts.js"></script>
<script type="text/javascript">
$(document).ready(function(){
	changeSubject();
	
	jcl.postJSON('/tms/report/chart/top5', "", function(data){
		//var chart = new FusionCharts("$rc.contextPath/s/tms/chart/FCMap_China2.swf", "ChartId","250", "200", "0", "0");
		//
		var chart = new FusionCharts("$rc.contextPath/s/tms/chart/Column2D.swf", "ChartId","225", "200", "0", "0");
		chart.setDataXML(data.row[0]);
		chart.render("chartdiv_stsessionnum");
		
		var chart = new FusionCharts("$rc.contextPath/s/tms/chart/Column2D.swf", "ChartId","225", "200", "0", "0");
		chart.setDataXML(data.row[1]);
		chart.render("chartdiv_stusernum");
		
		var chart = new FusionCharts("$rc.contextPath/s/tms/chart/Column2D.swf", "ChartId","225", "200", "0", "0");
		chart.setDataXML(data.row[2]);
		chart.render("chartdiv_stalarmnum");
		
		var chart = new FusionCharts("$rc.contextPath/s/tms/chart/Column2D.swf", "ChartId","225", "200", "0", "0");
		chart.setDataXML(data.row[3]);
		chart.render("chartdiv_sttrafficnum");
	});
	
	$("#boxdiv_contrast").click(function(){
		jcl.go('/tms/report/contrast/condition');
	});
});

function changeSubject(){
	//宏观数据地图展示
	var frm = document.getElementById("subject");
	var value = frm.options[frm.selectedIndex].value; 
	jcl.postJSON('/tms/report/chart/reportmap', "subject="+value, function(data){
		//var chart = new FusionCharts("$rc.contextPath/s/tms/chart/FCMap_China2.swf", "ChartId","900", "700", "0", "0");
		var chart = new FusionCharts("$rc.contextPath/s/tms/chart/FCMap_China2.swf", "ChartId",document.body.clientWidth-30, "600", "0", "0");
		
		chart.setDataXML(data.row);
		chart.render("chartdiv_reportmap");
	});
}
	
function test(c){
	jcl.go('/tms/report/chart/detail/list?regioncode='+c);
}


</script>

</head>
	<body>
		<table width="98%" border="0" cellspacing="0" cellpadding="1" align="center">
		  <tr >
		    <td height="28" colspan="4" width="800">
		    <div id="al006" style="font-size:13px">#springMessage("view.tms.report.center.subject")：
		    	<select name="subject" id="subject" onchange="changeSubject()">
			    	<option value="tms.report.s_alert_chinamap" selected>#springMessage("view.tms.report.center.alarmnum")</option>
			    	<option value="tms.report.s_session_chinamap">#springMessage("view.tms.report.center.sessionnum")</option>
			    	<option value="tms.report.s_user_chinamap">#springMessage("view.tms.report.center.usernum")</option>
			    	<option value="tms.report.s_txn_chinamap">#springMessage("view.tms.report.center.trafficnum")</option>
			    </select>
			    <input id="boxdiv_contrast" name="boxdiv_contrast" type="button" class="btn" value="#springMessage('view.tms.report.center.contrast')"/>
		    </div></td>
		  </tr>
		  <tr>
		    <td height="600" colspan="4" width="800" align="center"><div class="button-box" id="chartdiv_reportmap"></div></td>
		  </tr>
		  <tr >
		    <td height="200" width="225"><div class="button-box" id="chartdiv_stalarmnum"></div></td>
		    <td height="200" width="225"><div class="button-box" id="chartdiv_stsessionnum"></div></td>
		    <td height="200" width="225"><div class="button-box" id="chartdiv_stusernum"></div></td>
		    <td height="200" width="225"><div class="button-box" id="chartdiv_sttrafficnum"></div></td>
		  </tr>
		</table>
	</body>
</html>
