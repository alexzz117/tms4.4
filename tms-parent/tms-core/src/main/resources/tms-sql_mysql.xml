<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<!-- sql命名规范:tms +模块名称(dp,rule,stat)+sql名称 -->
<properties>
	<!--tmsDataBus使用的sql语句-->
	<entry key="C_TMS_RUN_TRAFFICDATA"><![CDATA[INSERT INTO TMS_RUN_TRAFFICDATA (CITYCODE,COUNTRYCODE,CURDAY,CURHOUR,CURMINUTE,DEVICEID,EXECTIMES,FINISHTIME,IPADDR,IPADDRLONG,ISLOGIN,ISPCODE,ISRISK,NUM1,NUM10,NUM11,NUM12,NUM13,NUM14,NUM15,NUM2,NUM3,NUM4,NUM5,NUM6,NUM7,NUM8,NUM9,REGIONCODE,SESSIONID,TEXT1,TEXT10,TEXT11,TEXT12,TEXT13,TEXT14,TEXT15,TEXT2,TEXT3,TEXT4,TEXT5,TEXT6,TEXT7,TEXT8,TEXT9,TRAFFICID,TXNCODE,TXNID,TXNSTATUS,TXNTIME,TXNTYPE,USERID) VALUES (:CITYCODE,:COUNTRYCODE,:CURDAY,:CURHOUR,:CURMINUTE,:DEVICEID,:EXECTIMES,:FINISHTIME,:IPADDR,:IPADDRLONG,:ISLOGIN,:ISPCODE,:ISRISK,:NUM1,:NUM10,:NUM11,:NUM12,:NUM13,:NUM14,:NUM15,:NUM2,:NUM3,:NUM4,:NUM5,:NUM6,:NUM7,:NUM8,:NUM9,:REGIONCODE,:SESSIONID,:TEXT1,:TEXT10,:TEXT11,:TEXT12,:TEXT13,:TEXT14,:TEXT15,:TEXT2,:TEXT3,:TEXT4,:TEXT5,:TEXT6,:TEXT7,:TEXT8,:TEXT9,:TRAFFICID,:TXNCODE,:TXNID,:TXNSTATUS,:TXNTIME,:TXNTYPE,:USERID)]]></entry>
	<entry key="C_TMS_RUN_USERPATTERN"><![CDATA[INSERT INTO TMS_RUN_USERPATTERN (USERID,TXNID,CURMON,STORECOLUMN,PATTERNS1,PATTERNS2) VALUES (:USERID,:TXNID,:CURMON,:STORECOLUMN,:PATTERNS1,:PATTERNS2)]]></entry>
	<entry key="C_TMS_RUN_SESSION"><![CDATA[INSERT INTO TMS_RUN_SESSION (CITYCODE,COUNTRYCODE,CURDAY,CURHOUR,CURMINUTE,DEVICEID,ENDTIME,IPADDR,IPADDRLONG,ISPCODE,MODIFYTIME,NUMVISITS,REGIONCODE,SESSIONID,STARTTIME,SUMSCORE,SUMTIMES,USERID,USERNAME,RISKTYPE,RISKSCORE) VALUES (:CITYCODE,:COUNTRYCODE,:CURDAY,:CURHOUR,:CURMINUTE,:DEVICEID,:ENDTIME,:IPADDR,:IPADDRLONG,:ISPCODE,:MODIFYTIME,:NUMVISITS,:REGIONCODE,:SESSIONID,:STARTTIME,:SUMSCORE,:SUMTIMES,:USERID,:USERNAME,:RISKTYPE,:RISKSCORE)]]></entry>
	<entry key="C_TMS_RUN_USER"><![CDATA[INSERT INTO TMS_RUN_USER (ACCTYPE,BIRTHDATE,OPENNODE,OPENTIME,SEX,SUMSCORE,USERID,USERNAME,RISKTYPE,RISKSCORE) VALUES (:ACCTYPE,:BIRTHDATE,:OPENNODE,:OPENTIME,:SEX,:SUMSCORE,:USERID,:USERNAME,:RISKTYPE,:RISKSCORE)]]></entry>
	<entry key="C_TMS_RUN_RULETRIG"><![CDATA[INSERT INTO TMS_RUN_RULETRIG (TXNID,ALERTID,CITYCODE,COUNTRYCODE,DEVICEID,ENDTIME,IPADDR,MESSAGE,NUMTIMES,REGIONCODE,RULEID,RULETRIGID,SCORE,SESSIONID,STARTTIME,TRAFFICID,USERID) VALUES (:TXNID,:ALERTID,:CITYCODE,:COUNTRYCODE,:DEVICEID,:ENDTIME,:IPADDR,:MESSAGE,:NUMTIMES,:REGIONCODE,:RULEID,:RULETRIGID,:SCORE,:SESSIONID,:STARTTIME,:TRAFFICID,:USERID)]]></entry>
	<entry key="C_TMS_RUN_ALERT"><![CDATA[INSERT INTO TMS_RUN_ALERT (ALERTID,CITYCODE,COUNTRYCODE,CREATETIME,DEVICEID,HITRULENUM,IPADDR,ISCORRECT,MODIFYTIME,REGIONCODE,RISKLEVEL,RISKLEVELCODE,SCORE,SESSIONID,TRAFFICID,TRIGRULENUM,TXNID,USERID,RISKTYPE,RISKSCORE,TAMPERCOLUMN,DISPOSAL) VALUES (:ALERTID,:CITYCODE,:COUNTRYCODE,:CREATETIME,:DEVICEID,:HITRULENUM,:IPADDR,:ISCORRECT,:MODIFYTIME,:REGIONCODE,:RISKLEVEL,:RISKLEVELCODE,:SCORE,:SESSIONID,:TRAFFICID,:TRIGRULENUM,:TXNID,:USERID,:RISKTYPE,:RISKSCORE,:TAMPERCOLUMN,:DISPOSAL)]]></entry>
	<entry key="C_TMS_RUN_TXNSTATCONTROL"><![CDATA[INSERT INTO TMS_RUN_TXNSTATCONTROL (CONFIRMTIME,THREADID,TRAFFICID,CONDIDSTR) VALUES (TO_CHAR(SYSDATE + :INTERVAL/86400,'YYYYMMDDHH24MISSSSS'),:THREADID,:TRAFFICID,:CONDIDSTR)]]></entry>
	<entry key="C_TMS_RUN_OBJREAL"><![CDATA[INSERT INTO TMS_RUN_OBJREAL (AVGSCORE,DATATYPE,DATAVALUE,LASTVISITCITY,LASTVISITCOUNTRY,LASTVISITREGION,LASTVISITTIME,MAXSCORE,MINSCORE,NUMSTAT,OBJECTID,SUMFAILS,SUMSCORE,SUMSUCCESS,SUMVISITS,SUMRISKS,LASTSCORE) VALUES (:AVGSCORE,:DATATYPE,:DATAVALUE,:LASTVISITCITY,:LASTVISITCOUNTRY,:LASTVISITREGION,:LASTVISITTIME,:MAXSCORE,:MINSCORE,:NUMSTAT,:OBJECTID,:SUMFAILS,:SUMSCORE,:SUMSUCCESS,:SUMVISITS,:SUMRISKS,:LASTSCORE)]]></entry>
	<entry key="C_TMS_RUN_OBJTW"><![CDATA[INSERT INTO TMS_RUN_OBJTW (STATCOLUMN,DATATYPE,DATAVALUE,COUNTUNIT,STATCOLUMN1,DATATYPE1,COUNTROUND,STATVALUE1,STATVALUE2) VALUES (:STATCOLUMN,:DATATYPE,:DATAVALUE,:COUNTUNIT,:STATCOLUMN1,:DATATYPE1,:COUNTROUND,:STATVALUE1,:STATVALUE2)]]></entry>
	<entry key="C_TMS_MGR_ROSTERVALUE"><![CDATA[INSERT INTO TMS_MGR_ROSTERVALUE(ROSTERVALUEID,ROSTERID,VALUESTART,VALUEEND,NUMSTART,NUMEND,VALUEDESC,CREATETIME,MODIFYTIME) VALUES(:ROSTERVALUEID,:ROSTERID,:VALUESTART,:VALUEEND,:NUMSTART,:NUMEND,:VALUEDESC,:CREATETIME,:MODIFYTIME)]]></entry>
	<entry key="U_TMS_RUN_TRAFFICDATA"><![CDATA[UPDATE TMS_RUN_TRAFFICDATA SET ISRISK=:ISRISK,TXNSTATUS=:TXNSTATUS,FINISHTIME=:FINISHTIME,EXECTIMES=:EXECTIMES,TEXT1=:TEXT1,TEXT2=:TEXT2,TEXT3=:TEXT3,TEXT4=:TEXT4,TEXT5=:TEXT5,TEXT6=:TEXT6,TEXT7=:TEXT7,TEXT8=:TEXT8,TEXT9=:TEXT9,TEXT10=:TEXT10,TEXT11=:TEXT11,TEXT12=:TEXT12,TEXT13=:TEXT13,TEXT14=:TEXT14,TEXT15=:TEXT15,NUM1=:NUM1,NUM2=:NUM2,NUM3=:NUM3,NUM4=:NUM4,NUM5=:NUM5,NUM6=:NUM6,NUM7=:NUM7,NUM8=:NUM8,NUM9=:NUM9,NUM10=:NUM10,NUM11=:NUM11,NUM12=:NUM12,NUM13=:NUM13,NUM14=:NUM14,NUM15=:NUM15 WHERE TRAFFICID=:TRAFFICID]]></entry>
	<entry key="U_TMS_RUN_TXNSTATCONTROL"><![CDATA[UPDATE TMS_RUN_TXNSTATCONTROL SET CONDIDSTR=:CONDIDSTR WHERE TRAFFICID=:TRAFFICID]]></entry>
	<entry key="U_TMS_RUN_ALERT"><![CDATA[UPDATE TMS_RUN_ALERT SET ISCORRECT=:ISCORRECT,MODIFYTIME=:MODIFYTIME WHERE ALERTID=:ALERTID]]></entry>
	<entry key="U_TMS_STAT_TRAFFICDATA"><![CDATA[UPDATE TMS_STAT_TRAFFICDATA SET ISRISK=:ISRISK,TXNSTATUS=:TXNSTATUS,FINISHTIME=:FINISHTIME,EXECTIMES=:EXECTIMES,TEXT1=:TEXT1,TEXT2=:TEXT2,TEXT3=:TEXT3,TEXT4=:TEXT4,TEXT5=:TEXT5,TEXT6=:TEXT6,TEXT7=:TEXT7,TEXT8=:TEXT8,TEXT9=:TEXT9,TEXT10=:TEXT10,TEXT11=:TEXT11,TEXT12=:TEXT12,TEXT13=:TEXT13,TEXT14=:TEXT14,TEXT15=:TEXT15,NUM1=:NUM1,NUM2=:NUM2,NUM3=:NUM3,NUM4=:NUM4,NUM5=:NUM5,NUM6=:NUM6,NUM7=:NUM7,NUM8=:NUM8,NUM9=:NUM9,NUM10=:NUM10,NUM11=:NUM11,NUM12=:NUM12,NUM13=:NUM13,NUM14=:NUM14,NUM15=:NUM15 WHERE TRAFFICID=:TRAFFICID]]></entry>
	<entry key="STAT_U_TMS_RUN_SESSION"><![CDATA[UPDATE TMS_RUN_SESSION SET NUMVISITS=:NUMVISITS,SUMTIMES=:SUMTIMES,SUMSCORE=:SUMSCORE,RISKTYPE=:RISKTYPE,RISKSCORE=:RISKSCORE,MODIFYTIME=:MODIFYTIME,ENDTIME=:ENDTIME WHERE SESSIONID=:SESSIONID]]></entry>
	<entry key="STAT_U_TMS_RUN_USER"><![CDATA[UPDATE TMS_RUN_USER SET SUMSCORE=:SUMSCORE,RISKTYPE=:RISKTYPE,RISKSCORE=:RISKSCORE,NORISKNUM=:NORISKNUM WHERE USERID=:USERID]]></entry>
	<entry key="STAT_U_TMS_RUN_OBJREAL"><![CDATA[UPDATE TMS_RUN_OBJREAL SET AVGSCORE=:AVGSCORE,LASTVISITCITY=:LASTVISITCITY,LASTVISITCOUNTRY=:LASTVISITCOUNTRY,LASTVISITREGION=:LASTVISITREGION,LASTVISITTIME=:LASTVISITTIME,MAXSCORE=:MAXSCORE,MINSCORE=:MINSCORE,NUMSTAT=:NUMSTAT,SUMFAILS=:SUMFAILS,SUMSCORE=:SUMSCORE,SUMSUCCESS=:SUMSUCCESS,SUMVISITS=:SUMVISITS,SUMRISKS=:SUMRISKS,LASTSCORE=:LASTSCORE WHERE OBJECTID=:OBJECTID AND DATAVALUE=:DATAVALUE]]></entry>
	<entry key="STAT_U_TMS_RUN_OBJTW"><![CDATA[UPDATE TMS_RUN_OBJTW SET COUNTUNIT=:COUNTUNIT,COUNTROUND=:COUNTROUND,STATVALUE1=:STATVALUE1,STATVALUE2=:STATVALUE2 WHERE STATCOLUMN=:STATCOLUMN AND DATAVALUE=:DATAVALUE AND COUNTUNIT=:COUNTUNIT AND STATCOLUMN1=:STATCOLUMN1]]></entry>
	<entry key="STAT_U_TMS_RUN_USERPATTERN"><![CDATA[UPDATE TMS_RUN_USERPATTERN SET PATTERNS1=:PATTERNS1,PATTERNS2=:PATTERNS2 WHERE USERID=:USERID AND TXNID=:TXNID AND CURMON=:CURMON AND STORECOLUMN=:STORECOLUMN]]></entry>
	<entry key="D_TMS_RUN_TXNSTATCONTROL"><![CDATA[DELETE FROM TMS_RUN_TXNSTATCONTROL WHERE TRAFFICID=:TRAFFICID]]></entry>
	<entry key="C_TMS_RUN_TXNSTATCONTROL_ERR"><![CDATA[INSERT INTO TMS_RUN_TXNSTATCONTROL_ERR SELECT TRAFFICID,CONFIRMTIME,THREADID,CONDIDSTR FROM TMS_RUN_TXNSTATCONTROL WHERE TRAFFICID=:TRAFFICID]]></entry>
	<entry key="C_TMS_STAT_TRAFFICDATA"><![CDATA[INSERT INTO TMS_STAT_TRAFFICDATA (CITYCODE,COUNTRYCODE,CURDAY,CURHOUR,CURMINUTE,DEVICEID,EXECTIMES,FINISHTIME,IPADDR,IPADDRLONG,ISLOGIN,ISPCODE,ISRISK,NUM1,NUM10,NUM11,NUM12,NUM13,NUM14,NUM15,NUM2,NUM3,NUM4,NUM5,NUM6,NUM7,NUM8,NUM9,REGIONCODE,SESSIONID,TEXT1,TEXT10,TEXT11,TEXT12,TEXT13,TEXT14,TEXT15,TEXT2,TEXT3,TEXT4,TEXT5,TEXT6,TEXT7,TEXT8,TEXT9,TRAFFICID,TXNCODE,TXNID,TXNSTATUS,TXNTIME,TXNTYPE,USERID) VALUES (:CITYCODE,:COUNTRYCODE,:CURDAY,:CURHOUR,:CURMINUTE,:DEVICEID,:EXECTIMES,:FINISHTIME,:IPADDR,:IPADDRLONG,:ISLOGIN,:ISPCODE,:ISRISK,:NUM1,:NUM10,:NUM11,:NUM12,:NUM13,:NUM14,:NUM15,:NUM2,:NUM3,:NUM4,:NUM5,:NUM6,:NUM7,:NUM8,:NUM9,:REGIONCODE,:SESSIONID,:TEXT1,:TEXT10,:TEXT11,:TEXT12,:TEXT13,:TEXT14,:TEXT15,:TEXT2,:TEXT3,:TEXT4,:TEXT5,:TEXT6,:TEXT7,:TEXT8,:TEXT9,:TRAFFICID,:TXNCODE,:TXNID,:TXNSTATUS,:TXNTIME,:TXNTYPE,:USERID)]]></entry>
	<entry key="C_TMS_STAT_RULETRIG"><![CDATA[INSERT INTO TMS_STAT_RULETRIG (TXNID,ALERTID,CITYCODE,COUNTRYCODE,DEVICEID,ENDTIME,IPADDR,MESSAGE,NUMTIMES,REGIONCODE,RULEID,RULETRIGID,SCORE,SESSIONID,STARTTIME,TRAFFICID,USERID,HITFLAG) VALUES (:TXNID,:ALERTID,:CITYCODE,:COUNTRYCODE,:DEVICEID,:ENDTIME,:IPADDR,:MESSAGE,:NUMTIMES,:REGIONCODE,:RULEID,:RULETRIGID,:SCORE,:SESSIONID,:STARTTIME,:TRAFFICID,:USERID,:HITFLAG)]]></entry>
	<entry key="C_TMS_STAT_ALERT"><![CDATA[INSERT INTO TMS_STAT_ALERT (ALERTID,CITYCODE,COUNTRYCODE,CREATETIME,DEVICEID,HITRULENUM,IPADDR,ISCORRECT,MODIFYTIME,REGIONCODE,RISKLEVEL,RISKLEVELCODE,SCORE,SESSIONID,TRAFFICID,TRIGRULENUM,TXNID,USERID,RISKTYPE,RISKSCORE,DISPOSAL) VALUES (:ALERTID,:CITYCODE,:COUNTRYCODE,:CREATETIME,:DEVICEID,:HITRULENUM,:IPADDR,:ISCORRECT,:MODIFYTIME,:REGIONCODE,:RISKLEVEL,:RISKLEVELCODE,:SCORE,:SESSIONID,:TRAFFICID,:TRIGRULENUM,:TXNID,:USERID,:RISKTYPE,:RISKSCORE,:DISPOSAL)]]></entry>
	
	<!-- 系统日志sql 错误日志 -->
	<entry key="TMS_LOG_ERROR_INSERT"><![CDATA[INSERT INTO TMS_MGR_ERRORLOG (ERRORID, ERRORCODE, ERRORDESC, ERRORTIME) VALUES (tms_log_id.nextval, :ERRORCODE, :ERRORDESC, :ERRORTIME)]]></entry>
	<!-- 系统日志sql 业务日志 -->
	<entry key="TMS_LOG_BIZ_INSERT"><![CDATA[INSERT INTO TMS_MGR_BIZLOG (BIZID, BIZSERVICECODE, BIZTRANSCODE, BIZRECODE, BIZTIME) VALUES (tms_log_id.nextval, :BIZSERVICECODE, :BIZTRANSCODE, :BIZRECODE, :BIZTIME)]]></entry> 

	<!--tmsDataBus使用的sql语句-->
	<!-- 运行统计查询sql -->
	<entry key="tms.runstat.query"><![CDATA[SELECT * FROM ( SELECT   C.*,E.CONDIDSTR,E.CONFIRMTIME,E.THREADID,A.STARTTIME,A.SUMSCORE SESSION_SUMSCORE,A.RISKTYPE SESSION_RISKTYPE,A.RISKSCORE SESSION_RISKSCORE FROM TMS_RUN_TXNSTATCONTROL E join TMS_RUN_TRAFFICDATA C on E.TRAFFICID = C.TRAFFICID left join TMS_RUN_SESSION A on C.SESSIONID = A.SESSIONID WHERE E.CONFIRMTIME <= TO_CHAR(SYSDATE,'YYYYMMDDHH24MISSSSS') AND E.THREADID = ? ORDER BY E.CONFIRMTIME) WHERE   ROWNUM <= ?]]></entry>
	
	<!-- 服务心跳sql -->
	<entry key="tms.server.create"><![CDATA[INSERT INTO TMS_RUN_SERVER(SERVERID,SERVERNAME,IPADDR,PORT,STARTTIME,ACTIVETIME) VALUES (:SERVERID,:SERVERNAME,:IPADDR,:PORT,TO_CHAR(SYSDATE,'YYYYMMDDHH24MISSSSS'),TO_CHAR(SYSDATE,'YYYYMMDDHH24MISSSSS'))]]></entry>
	<entry key="tms.server.updatebyip"><![CDATA[UPDATE TMS_RUN_SERVER SET ACTIVETIME=TO_CHAR(SYSDATE,'YYYYMMDDHH24MISSSSS') WHERE IPADDR=:IPADDR AND PORT=:PORT]]></entry>
	<entry key="tms.server.updatebyid"><![CDATA[UPDATE TMS_RUN_SERVER SET ACTIVETIME=TO_CHAR(SYSDATE,'YYYYMMDDHH24MISSSSS') WHERE SERVERID=:SERVERID]]></entry>
	<entry key="tms.server.changebyid"><![CDATA[UPDATE TMS_RUN_SERVER SET IPADDR=:IPADDR,PORT=:PORT,ACTIVETIME=TO_CHAR(SYSDATE,'YYYYMMDDHH24MISSSSS') WHERE SERVERID=:SERVERID]]></entry>
	
	<!-- 通用sql -->
	<entry key="tms.common.systime"><![CDATA[select now() as dbsystime]]></entry>
	<entry key="tms.common.sequenceid"><![CDATA[select nextval('${SEQUENCENAME}') SEQUENCEID]]></entry>
	<entry key="tms.common.testconnection"><![CDATA[select 1]]></entry>
	
	<!-- 
		实现类似merge into语句功能，用到临时表功能，Sybase数据库许开启DDL，命令如下：
		sp_dboption tempdb, "ddl in tran",true
	 -->
	<!-- 名单值(类型long)是否已存在  -->
	<entry key="tms.dao_stat_batch_query_lob.createtemptable"><![CDATA[create table %s(STAT_PARAM varchar(100), ROW_ID numeric(8)) engine=heap]]></entry>
	<entry key="tms.dao_stat_batch_query_lob.inserttmp">insert into %s (STAT_PARAM,ROW_ID) values (?,?)</entry>
	<entry key="tms.roster.interval.long"><![CDATA[select 1 from TMS_MGR_ROSTERVALUE t where t.ROSTERID=? and cast(t.VALUESTART as unsigned int)<=? and cast(t.VALUEEND as unsigned int)>=?]]></entry>
	<entry key="tms.dao.merge.serv_live_insert"><![CDATA[select ? as IPADDR,? as PORT,nextval('SEQ_TMS_COM_SRE_ID') as SERVERID,? as SERVTYPE,now() as ACTIVETIME,? as PINGDELAY]]></entry>
	<entry key="tms.dao.merge.serv_live_update"><![CDATA[update TMS_RUN_SERVER set SERVTYPE=?, ACTIVETIME=now(), PINGDELAY=? where IPADDR=? and PORT=?]]></entry>
	<entry key="tms.dao.merge.session"><![CDATA[replace into TMS_RUN_SESSION (sessionid, userid, deviceid, ipaddr, countrycode, regioncode, citycode, ispcode, maxscore, sumscore, starttime, finishtime) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]]></entry>
	<entry key="tms.run.merge.user"><![CDATA[replace into TMS_RUN_USER (?) select ?]]></entry>
	<entry key="tms.run.merge.account"><![CDATA[replace into TMS_RUN_ACCOUNT (?) select ?]]></entry>
	<entry key="TMS.SERVER.LIST"><![CDATA[SELECT T.* FROM TMS_RUN_SERVER T WHERE (TIMESTAMPDIFF(SECOND, T.ACTIVETIME, NOW()) * 1000) < T.PINGDELAY  AND T.SERVTYPE=?]]></entry>
</properties>
